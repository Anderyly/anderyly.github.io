<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>内网穿透 on 轻风云</title>
        <link>http://blog.aaayun.cc/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</link>
        <description>Recent content in 内网穿透 on 轻风云</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>轻风云</copyright>
        <lastBuildDate>Fri, 02 Dec 2022 15:43:55 +0000</lastBuildDate><atom:link href="http://blog.aaayun.cc/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>最好用的完全开源的内网穿透工具frps</title>
        <link>http://blog.aaayun.cc/archives/947.html</link>
        <pubDate>Fri, 02 Dec 2022 15:43:55 +0000</pubDate>
        
        <guid>http://blog.aaayun.cc/archives/947.html</guid>
        <description>&lt;h2 id=&#34;前期准备&#34;&gt;前期准备：
&lt;/h2&gt;&lt;p&gt;首先你要有一台云服务器或者VPS，有公网ip或域名都可以，内网主机（自己的电脑）一台。&lt;/p&gt;
&lt;p&gt;本文所用的服务端是我用阿里云的Linux系统，客户端是windows11系统。&lt;/p&gt;
&lt;h2 id=&#34;服务端linux搭建步骤&#34;&gt;服务端(Linux)搭建步骤
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;下载服务端的&lt;a class=&#34;link&#34; href=&#34;https://github.com/fatedier/frp/releases&#34;  title=&#34;frp&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;frp&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用tar命令解压下载成功的压缩包文件:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;```shell
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;tar -zxvf frp_0.45.0_linux_arm64.tar.gz&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  3. 使用cd命令进入解压出来的文件夹:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ```shell
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mv frp_0.45.0_linux_arm64 frp &amp;amp;&amp;amp; cd frp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;修改服务器配置文件(frps.ini):&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;```shell
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;vim fros.ini&lt;/p&gt;
&lt;h1 id=&#34;编辑&#34;&gt;编辑
&lt;/h1&gt;&lt;p&gt;[common]
bind_port = 7000
vhost_http_port = 88
vhost_https_port = 89
#与客户端通信的令牌
token = 57854
dashboard_user  = admin
#dashboard 密码
dashboard_pwd = admin
#dashboard 端口，启动成功后可通过浏览器访问如http://ip:7500
dashboard_port = 7500&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  5. 启动frp服务端，让frp在后台运行:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ```shell
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nohup ./frps -c frps.ini &amp;amp;  &amp;gt; frp.log
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这样即使关掉了SSH，frp依然在后台运行中。到此，服务端的搭建已经完成。&lt;/p&gt;
&lt;h2 id=&#34;客户端搭建步骤&#34;&gt;客户端搭建步骤
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;下载客户端的frp，在上文地址下载最新windows压缩包&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;解压下载成功的压缩包&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;编辑frpc.ini文件，内容如下：&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;```ini
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[common]
server_addr = x.x.x.x  #公网ip
server_port = 7000
#与服务端通信的令牌
token = 57854
[mysql]
type = tcp
#local_ip = 127.0.0.1
local_port = 3306  #本地mysql端口
remote_port = 3366 #印射公网端口
#连接Windows远程桌面的
[rdp]
type = tcp
local_ip = 127.0.0.1
local_port = 3389
remote_port = 3389
custom_domains = x.x.x.x  #公网ip或域名
[web01]
type = http
local_ip = 127.0.0.1
local_port = 80
locations  = /
custom_domains =  x.x.x.x  #公网ip或域名
[web02]
type = http
local_ip =  127.0.0.1
local_port = 8090
locations  = /cardmanager
custom_domains =  x.x.x.x  #公网ip或域名
#通过tcp来连接svn
[svn]
type = tcp
local_ip =127.0.0.1
local_port = 81
remote_port = 9000&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  4. 启动frp客户端：  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    在目录下打开cmd命令窗口，执行如下命令：
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ```cmd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;frpc.exe -c frpc.ini
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;到此，客户端的搭建已经完成。&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
